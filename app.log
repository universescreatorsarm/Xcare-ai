2025-04-19 10:22:18,138 - __main__ - INFO - Initializing Gemini with API key
2025-04-19 10:22:18,140 - __main__ - INFO - === Starting RAG Initialization ===
2025-04-19 10:22:18,140 - __main__ - INFO - Loading and preparing data...
2025-04-19 10:22:18,141 - __main__ - INFO - Loading data from CSV...
2025-04-19 10:22:18,144 - __main__ - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:22:18,144 - __main__ - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:22:18,145 - __main__ - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:22:18,153 - __main__ - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:22:18,160 - __main__ - INFO - Successfully created 80 documents
2025-04-19 10:22:18,161 - __main__ - INFO - Loaded 80 documents
2025-04-19 10:22:18,161 - __main__ - INFO - Creating vector store...
2025-04-19 10:22:18,161 - __main__ - INFO - Creating vector store
2025-04-19 10:22:18,161 - __main__ - INFO - Embeddings model initialized
2025-04-19 10:22:18,162 - __main__ - INFO - Text splitter initialized
2025-04-19 10:22:18,162 - __main__ - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:22:18,163 - __main__ - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:22:21,610 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:22:21,636 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:22:21,643 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:22:21,648 - __main__ - INFO - Vector store created successfully
2025-04-19 10:22:21,649 - __main__ - INFO - Testing search with query: SPF ����
2025-04-19 10:22:22,098 - __main__ - INFO - Search results count: 3
2025-04-19 10:22:22,098 - __main__ - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:22:22,099 - __main__ - INFO - Vector store created successfully
2025-04-19 10:22:22,099 - __main__ - INFO - Initializing chain...
2025-04-19 10:22:22,100 - __main__ - INFO - Prompt template created
2025-04-19 10:22:22,100 - __main__ - INFO - Checking model initialization...
2025-04-19 10:22:22,101 - __main__ - INFO - Model is initialized
2025-04-19 10:22:22,101 - __main__ - INFO - Checking vector store initialization...
2025-04-19 10:22:22,101 - __main__ - INFO - Vector store is initialized
2025-04-19 10:22:22,101 - __main__ - INFO - Creating retriever...
2025-04-19 10:22:22,102 - __main__ - INFO - Retriever created
2025-04-19 10:22:22,102 - __main__ - INFO - Initializing RetrievalQA chain...
2025-04-19 10:22:22,103 - __main__ - INFO - Chain initialized successfully
2025-04-19 10:22:22,103 - __main__ - INFO - Verifying chain initialization...
2025-04-19 10:22:22,103 - __main__ - INFO - Chain verification successful
2025-04-19 10:22:22,103 - __main__ - INFO - RAG system initialized successfully
2025-04-19 10:22:22,104 - __main__ - INFO - === RAG Initialization Completed ===
2025-04-19 10:22:45,484 - app - INFO - Initializing Gemini with API key
2025-04-19 10:22:45,486 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:22:45,486 - app - INFO - Loading and preparing data...
2025-04-19 10:22:45,486 - app - INFO - Loading data from CSV...
2025-04-19 10:22:45,490 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:22:45,491 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:22:45,491 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:22:45,492 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:22:45,497 - app - INFO - Successfully created 80 documents
2025-04-19 10:22:45,498 - app - INFO - Loaded 80 documents
2025-04-19 10:22:45,498 - app - INFO - Creating vector store...
2025-04-19 10:22:45,498 - app - INFO - Creating vector store
2025-04-19 10:22:45,499 - app - INFO - Embeddings model initialized
2025-04-19 10:22:45,499 - app - INFO - Text splitter initialized
2025-04-19 10:22:45,499 - app - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:22:45,500 - app - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:22:48,101 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:22:48,123 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:22:48,130 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:22:48,136 - app - INFO - Vector store created successfully
2025-04-19 10:22:48,136 - app - INFO - Testing search with query: SPF ����
2025-04-19 10:22:48,591 - app - INFO - Search results count: 3
2025-04-19 10:22:48,591 - app - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:22:48,592 - app - INFO - Vector store created successfully
2025-04-19 10:22:48,592 - app - INFO - Initializing chain...
2025-04-19 10:22:48,593 - app - INFO - Prompt template created
2025-04-19 10:22:48,593 - app - INFO - Checking model initialization...
2025-04-19 10:22:48,593 - app - INFO - Model is initialized
2025-04-19 10:22:48,594 - app - INFO - Checking vector store initialization...
2025-04-19 10:22:48,594 - app - INFO - Vector store is initialized
2025-04-19 10:22:48,594 - app - INFO - Creating retriever...
2025-04-19 10:22:48,595 - app - INFO - Retriever created
2025-04-19 10:22:48,595 - app - INFO - Initializing RetrievalQA chain...
2025-04-19 10:22:48,596 - app - INFO - Chain initialized successfully
2025-04-19 10:22:48,596 - app - INFO - Verifying chain initialization...
2025-04-19 10:22:48,596 - app - INFO - Chain verification successful
2025-04-19 10:22:48,596 - app - INFO - RAG system initialized successfully
2025-04-19 10:22:48,597 - app - INFO - === RAG Initialization Completed ===
2025-04-19 10:24:38,124 - app - INFO - Initializing Gemini with API key
2025-04-19 10:24:38,126 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:24:38,127 - app - INFO - Loading and preparing data...
2025-04-19 10:24:38,127 - app - INFO - Loading data from CSV...
2025-04-19 10:24:38,131 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:24:38,131 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:24:38,132 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:24:38,133 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:24:38,138 - app - INFO - Successfully created 80 documents
2025-04-19 10:24:38,138 - app - INFO - Loaded 80 documents
2025-04-19 10:24:38,138 - app - INFO - Creating vector store...
2025-04-19 10:24:38,139 - app - INFO - Creating vector store
2025-04-19 10:24:38,139 - app - INFO - Embeddings model initialized
2025-04-19 10:24:38,139 - app - INFO - Text splitter initialized
2025-04-19 10:24:38,140 - app - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:24:38,140 - app - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:24:41,533 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:24:41,556 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:24:41,565 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:24:41,570 - app - INFO - Vector store created successfully
2025-04-19 10:24:41,570 - app - INFO - Testing search with query: SPF ����
2025-04-19 10:24:41,985 - app - INFO - Search results count: 3
2025-04-19 10:24:41,985 - app - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:24:41,985 - app - INFO - Vector store created successfully
2025-04-19 10:24:41,986 - app - INFO - Initializing chain...
2025-04-19 10:24:41,986 - app - INFO - Prompt template created
2025-04-19 10:24:41,986 - app - INFO - Checking model initialization...
2025-04-19 10:24:41,987 - app - INFO - Model is initialized
2025-04-19 10:24:41,987 - app - INFO - Checking vector store initialization...
2025-04-19 10:24:41,987 - app - INFO - Vector store is initialized
2025-04-19 10:24:41,988 - app - INFO - Creating retriever...
2025-04-19 10:24:41,988 - app - INFO - Retriever created
2025-04-19 10:24:41,988 - app - INFO - Initializing RetrievalQA chain...
2025-04-19 10:24:41,989 - app - INFO - Chain initialized successfully
2025-04-19 10:24:41,989 - app - INFO - Verifying chain initialization...
2025-04-19 10:24:41,989 - app - INFO - Chain verification successful
2025-04-19 10:24:41,989 - app - INFO - RAG system initialized successfully
2025-04-19 10:24:41,990 - app - INFO - === RAG Initialization Completed ===
2025-04-19 10:25:01,226 - app - INFO - Initializing Gemini with API key
2025-04-19 10:25:01,229 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:25:01,230 - app - INFO - Loading and preparing data...
2025-04-19 10:25:01,230 - app - INFO - Loading data from CSV...
2025-04-19 10:25:01,234 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:25:01,235 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:25:01,235 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:25:01,237 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:25:01,247 - app - INFO - Successfully created 80 documents
2025-04-19 10:25:01,248 - app - INFO - Loaded 80 documents
2025-04-19 10:25:01,248 - app - INFO - Creating vector store...
2025-04-19 10:25:01,248 - app - INFO - Creating vector store
2025-04-19 10:25:01,249 - app - INFO - Embeddings model initialized
2025-04-19 10:25:01,249 - app - INFO - Text splitter initialized
2025-04-19 10:25:01,250 - app - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:25:01,250 - app - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:25:04,743 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:25:04,779 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:25:04,790 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:25:04,797 - app - INFO - Vector store created successfully
2025-04-19 10:25:04,797 - app - INFO - Testing search with query: SPF ����
2025-04-19 10:25:05,211 - app - INFO - Search results count: 3
2025-04-19 10:25:05,211 - app - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:25:05,211 - app - INFO - Vector store created successfully
2025-04-19 10:25:05,212 - app - INFO - Initializing chain...
2025-04-19 10:25:05,212 - app - INFO - Prompt template created
2025-04-19 10:25:05,212 - app - INFO - Checking model initialization...
2025-04-19 10:25:05,213 - app - INFO - Model is initialized
2025-04-19 10:25:05,213 - app - INFO - Checking vector store initialization...
2025-04-19 10:25:05,213 - app - INFO - Vector store is initialized
2025-04-19 10:25:05,214 - app - INFO - Creating retriever...
2025-04-19 10:25:05,214 - app - INFO - Retriever created
2025-04-19 10:25:05,214 - app - INFO - Initializing RetrievalQA chain...
2025-04-19 10:25:05,215 - app - INFO - Chain initialized successfully
2025-04-19 10:25:05,215 - app - INFO - Verifying chain initialization...
2025-04-19 10:25:05,216 - app - INFO - Chain verification successful
2025-04-19 10:25:05,216 - app - INFO - RAG system initialized successfully
2025-04-19 10:25:05,216 - app - INFO - === RAG Initialization Completed ===
2025-04-19 10:25:05,232 - app - INFO - === Starting chat request ===
2025-04-19 10:25:05,232 - app - INFO - Received message: spf ����
2025-04-19 10:25:05,232 - app - INFO - === RAG System Debug Info ===
2025-04-19 10:25:05,233 - app - INFO - Chain is None: False
2025-04-19 10:25:05,233 - app - INFO - Chain is initialized
2025-04-19 10:25:05,233 - app - INFO - Chain type: <class 'langchain.chains.retrieval_qa.base.RetrievalQA'>
2025-04-19 10:25:05,234 - app - INFO - Chain attributes: ['Config', 'InputType', 'OutputType', '__abstractmethods__', '__annotations__', '__call__', '__class__', '__class_getitem__', '__class_vars__', '__config__', '__custom_root_type__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__exclude_fields__', '__fields__', '__fields_set__', '__firstlineno__', '__format__', '__ge__', '__get_validators__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__include_fields__', '__init__', '__init_subclass__', '__iter__', '__json_encoder__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__or__', '__orig_bases__', '__parameters__', '__post_root_validators__', '__pre_root_validators__', '__pretty__', '__private_attributes__', '__reduce__', '__reduce_ex__', '__repr__', '__repr_args__', '__repr_name__', '__repr_str__', '__rich_repr__', '__ror__', '__schema_cache__', '__setattr__', '__setstate__', '__signature__', '__sizeof__', '__slots__', '__static_attributes__', '__str__', '__subclasshook__', '__try_update_forward_refs__', '__validators__', '__weakref__', '_abatch_with_config', '_abc_impl', '_acall', '_acall_with_config', '_aget_docs', '_atransform_stream_with_config', '_batch_with_config', '_calculate_keys', '_call', '_call_with_config', '_chain_type', '_copy_and_set_values', '_decompose_class', '_enforce_dict_if_root', '_get_docs', '_get_value', '_init_private_attributes', '_iter', '_lc_kwargs', '_run_output_key', '_transform_stream_with_config', '_validate_inputs', '_validate_outputs', 'abatch', 'acall', 'ainvoke', 'apply', 'arun', 'assign', 'astream', 'astream_events', 'astream_log', 'atransform', 'batch', 'bind', 'callback_manager', 'callbacks', 'combine_documents_chain', 'config_schema', 'config_specs', 'configurable_alternatives', 'configurable_fields', 'construct', 'copy', 'dict', 'from_chain_type', 'from_llm', 'from_orm', 'get_graph', 'get_input_schema', 'get_lc_namespace', 'get_name', 'get_output_schema', 'get_prompts', 'input_key', 'input_keys', 'input_schema', 'invoke', 'is_lc_serializable', 'json', 'lc_attributes', 'lc_id', 'lc_secrets', 'map', 'memory', 'metadata', 'name', 'output_key', 'output_keys', 'output_schema', 'parse_file', 'parse_obj', 'parse_raw', 'pick', 'pipe', 'prep_inputs', 'prep_outputs', 'raise_callback_manager_deprecation', 'retriever', 'return_source_documents', 'run', 'save', 'schema', 'schema_json', 'set_verbose', 'stream', 'tags', 'to_json', 'to_json_not_implemented', 'transform', 'update_forward_refs', 'validate', 'verbose', 'with_config', 'with_fallbacks', 'with_listeners', 'with_retry', 'with_types']
2025-04-19 10:25:05,235 - app - INFO - Retriever is present
2025-04-19 10:25:05,235 - app - INFO - Retriever type: <class 'langchain_core.vectorstores.VectorStoreRetriever'>
2025-04-19 10:25:05,236 - app - INFO - Vector store is initialized
2025-04-19 10:25:05,236 - app - INFO - Vector store type: <class 'langchain_community.vectorstores.faiss.FAISS'>
2025-04-19 10:25:06,072 - app - INFO - Vector store search test successful, found 1 documents
2025-04-19 10:25:06,073 - app - INFO - Embeddings test successful
2025-04-19 10:25:06,073 - app - INFO - === End of RAG System Debug Info ===
2025-04-19 10:25:06,074 - app - INFO - Processing message with chain
2025-04-19 10:25:06,074 - app - INFO - Calling chain with question
2025-04-19 10:25:06,698 - app - ERROR - Error in chain processing: Missing some input keys: {'query'}
Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 317, in chat
    result = chain({"question": message})
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 363, in __call__
    return self.invoke(
           ~~~~~~~~~~~^
        inputs,
        ^^^^^^^
    ...<2 lines>...
        include_run_info=include_run_info,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 138, in invoke
    inputs = self.prep_inputs(input)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 475, in prep_inputs
    self._validate_inputs(inputs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 264, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'query'}
2025-04-19 10:25:06,701 - app - ERROR - Error type: <class 'ValueError'>
2025-04-19 10:25:06,701 - app - ERROR - Error args: ("Missing some input keys: {'query'}",)
2025-04-19 10:25:06,701 - app - INFO - === Chat request completed ===
2025-04-19 10:25:13,890 - app - INFO - Initializing Gemini with API key
2025-04-19 10:25:13,892 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:25:13,893 - app - INFO - Loading and preparing data...
2025-04-19 10:25:13,893 - app - INFO - Loading data from CSV...
2025-04-19 10:25:13,897 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:25:13,898 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:25:13,899 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:25:13,899 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:25:13,908 - app - INFO - Successfully created 80 documents
2025-04-19 10:25:13,909 - app - INFO - Loaded 80 documents
2025-04-19 10:25:13,909 - app - INFO - Creating vector store...
2025-04-19 10:25:13,909 - app - INFO - Creating vector store
2025-04-19 10:25:13,910 - app - INFO - Embeddings model initialized
2025-04-19 10:25:13,910 - app - INFO - Text splitter initialized
2025-04-19 10:25:13,910 - app - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:25:13,911 - app - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:25:17,678 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:25:17,724 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:25:17,738 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:25:17,753 - app - INFO - Vector store created successfully
2025-04-19 10:25:17,754 - app - INFO - Testing search with query: SPF ����
2025-04-19 10:25:18,187 - app - INFO - Search results count: 3
2025-04-19 10:25:18,188 - app - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:25:18,188 - app - INFO - Vector store created successfully
2025-04-19 10:25:18,189 - app - INFO - Initializing chain...
2025-04-19 10:25:18,189 - app - INFO - Prompt template created
2025-04-19 10:25:18,189 - app - INFO - Checking model initialization...
2025-04-19 10:25:18,190 - app - INFO - Model is initialized
2025-04-19 10:25:18,190 - app - INFO - Checking vector store initialization...
2025-04-19 10:25:18,190 - app - INFO - Vector store is initialized
2025-04-19 10:25:18,191 - app - INFO - Creating retriever...
2025-04-19 10:25:18,191 - app - INFO - Retriever created
2025-04-19 10:25:18,191 - app - INFO - Initializing RetrievalQA chain...
2025-04-19 10:25:18,193 - app - INFO - Chain initialized successfully
2025-04-19 10:25:18,193 - app - INFO - Verifying chain initialization...
2025-04-19 10:25:18,194 - app - INFO - Chain verification successful
2025-04-19 10:25:18,195 - app - INFO - RAG system initialized successfully
2025-04-19 10:25:18,195 - app - INFO - === RAG Initialization Completed ===
2025-04-19 10:26:44,862 - app - INFO - Initializing Gemini with API key
2025-04-19 10:26:44,865 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:26:44,865 - app - INFO - Loading and preparing data...
2025-04-19 10:26:44,866 - app - INFO - Loading data from CSV...
2025-04-19 10:26:44,870 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:26:44,870 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:26:44,871 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:26:44,871 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:26:44,878 - app - INFO - Successfully created 80 documents
2025-04-19 10:26:44,878 - app - INFO - Loaded 80 documents
2025-04-19 10:26:44,878 - app - INFO - Creating vector store...
2025-04-19 10:26:44,879 - app - INFO - Creating vector store
2025-04-19 10:26:44,879 - app - INFO - Embeddings model initialized
2025-04-19 10:26:44,880 - app - INFO - Text splitter initialized
2025-04-19 10:26:44,880 - app - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:26:44,881 - app - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:26:48,394 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:26:48,422 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:26:48,431 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:26:48,437 - app - INFO - Vector store created successfully
2025-04-19 10:26:48,438 - app - INFO - Testing search with query: SPF ����
2025-04-19 10:26:48,873 - app - INFO - Search results count: 3
2025-04-19 10:26:48,873 - app - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:26:48,874 - app - INFO - Vector store created successfully
2025-04-19 10:26:48,874 - app - INFO - Initializing chain...
2025-04-19 10:26:48,875 - app - INFO - Prompt template created
2025-04-19 10:26:48,875 - app - INFO - Checking model initialization...
2025-04-19 10:26:48,875 - app - INFO - Model is initialized
2025-04-19 10:26:48,876 - app - INFO - Checking vector store initialization...
2025-04-19 10:26:48,876 - app - INFO - Vector store is initialized
2025-04-19 10:26:48,876 - app - INFO - Creating retriever...
2025-04-19 10:26:48,877 - app - INFO - Retriever created
2025-04-19 10:26:48,877 - app - INFO - Initializing RetrievalQA chain...
2025-04-19 10:26:48,878 - app - INFO - Chain initialized successfully
2025-04-19 10:26:48,878 - app - INFO - Verifying chain initialization...
2025-04-19 10:26:48,878 - app - INFO - Chain verification successful
2025-04-19 10:26:48,879 - app - INFO - RAG system initialized successfully
2025-04-19 10:26:48,879 - app - INFO - === RAG Initialization Completed ===
2025-04-19 10:27:51,377 - app - INFO - Initializing Gemini with API key
2025-04-19 10:27:51,379 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:27:51,379 - app - INFO - Loading and preparing data...
2025-04-19 10:27:51,379 - app - INFO - Loading data from CSV...
2025-04-19 10:27:51,384 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:27:51,384 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:27:51,384 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:27:51,385 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:27:51,390 - app - INFO - Successfully created 80 documents
2025-04-19 10:27:51,390 - app - INFO - Loaded 80 documents
2025-04-19 10:27:51,391 - app - INFO - Creating vector store...
2025-04-19 10:27:51,391 - app - INFO - Creating vector store
2025-04-19 10:27:51,391 - app - INFO - Embeddings model initialized
2025-04-19 10:27:51,391 - app - INFO - Text splitter initialized
2025-04-19 10:27:51,392 - app - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:27:51,392 - app - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:27:54,754 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:27:54,777 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:27:54,786 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:27:54,790 - app - INFO - Vector store created successfully
2025-04-19 10:27:54,791 - app - INFO - Testing search with query: SPF ����
2025-04-19 10:27:55,187 - app - INFO - Search results count: 3
2025-04-19 10:27:55,188 - app - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:27:55,188 - app - INFO - Vector store created successfully
2025-04-19 10:27:55,188 - app - INFO - Initializing chain...
2025-04-19 10:27:55,189 - app - INFO - Prompt template created
2025-04-19 10:27:55,189 - app - INFO - Checking model initialization...
2025-04-19 10:27:55,189 - app - INFO - Model is initialized
2025-04-19 10:27:55,190 - app - INFO - Checking vector store initialization...
2025-04-19 10:27:55,190 - app - INFO - Vector store is initialized
2025-04-19 10:27:55,190 - app - INFO - Creating retriever...
2025-04-19 10:27:55,190 - app - INFO - Retriever created
2025-04-19 10:27:55,191 - app - INFO - Initializing RetrievalQA chain...
2025-04-19 10:27:55,191 - app - INFO - Chain initialized successfully
2025-04-19 10:27:55,192 - app - INFO - Verifying chain initialization...
2025-04-19 10:27:55,192 - app - INFO - Chain verification successful
2025-04-19 10:27:55,192 - app - INFO - RAG system initialized successfully
2025-04-19 10:27:55,192 - app - INFO - === RAG Initialization Completed ===
2025-04-19 10:27:59,655 - app - INFO - Initializing Gemini with API key
2025-04-19 10:27:59,657 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:27:59,658 - app - INFO - Loading and preparing data...
2025-04-19 10:27:59,658 - app - INFO - Loading data from CSV...
2025-04-19 10:27:59,661 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:27:59,661 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:27:59,662 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:27:59,664 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:27:59,674 - app - INFO - Successfully created 80 documents
2025-04-19 10:27:59,674 - app - INFO - Loaded 80 documents
2025-04-19 10:27:59,674 - app - INFO - Creating vector store...
2025-04-19 10:27:59,675 - app - INFO - Creating vector store
2025-04-19 10:27:59,675 - app - INFO - Embeddings model initialized
2025-04-19 10:27:59,675 - app - INFO - Text splitter initialized
2025-04-19 10:27:59,676 - app - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:27:59,676 - app - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:28:03,107 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:28:03,139 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:28:03,148 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:28:03,155 - app - INFO - Vector store created successfully
2025-04-19 10:28:03,156 - app - INFO - Testing search with query: SPF ����
2025-04-19 10:28:03,557 - app - INFO - Search results count: 3
2025-04-19 10:28:03,557 - app - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:28:03,558 - app - INFO - Vector store created successfully
2025-04-19 10:28:03,558 - app - INFO - Initializing chain...
2025-04-19 10:28:03,558 - app - INFO - Prompt template created
2025-04-19 10:28:03,559 - app - INFO - Checking model initialization...
2025-04-19 10:28:03,559 - app - INFO - Model is initialized
2025-04-19 10:28:03,559 - app - INFO - Checking vector store initialization...
2025-04-19 10:28:03,560 - app - INFO - Vector store is initialized
2025-04-19 10:28:03,560 - app - INFO - Creating retriever...
2025-04-19 10:28:03,560 - app - INFO - Retriever created
2025-04-19 10:28:03,561 - app - INFO - Initializing RetrievalQA chain...
2025-04-19 10:28:03,562 - app - INFO - Chain initialized successfully
2025-04-19 10:28:03,563 - app - INFO - Verifying chain initialization...
2025-04-19 10:28:03,563 - app - INFO - Chain verification successful
2025-04-19 10:28:03,563 - app - INFO - RAG system initialized successfully
2025-04-19 10:28:03,564 - app - INFO - === RAG Initialization Completed ===
2025-04-19 10:28:53,964 - app - INFO - === Starting chat request ===
2025-04-19 10:28:53,964 - app - INFO - Received message: ���� � spf
2025-04-19 10:28:53,964 - app - INFO - === RAG System Debug Info ===
2025-04-19 10:28:53,965 - app - INFO - Chain is None: False
2025-04-19 10:28:53,965 - app - INFO - Chain is initialized
2025-04-19 10:28:53,965 - app - INFO - Chain type: <class 'langchain.chains.retrieval_qa.base.RetrievalQA'>
2025-04-19 10:28:53,966 - app - INFO - Chain attributes: ['Config', 'InputType', 'OutputType', '__abstractmethods__', '__annotations__', '__call__', '__class__', '__class_getitem__', '__class_vars__', '__config__', '__custom_root_type__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__exclude_fields__', '__fields__', '__fields_set__', '__firstlineno__', '__format__', '__ge__', '__get_validators__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__include_fields__', '__init__', '__init_subclass__', '__iter__', '__json_encoder__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__or__', '__orig_bases__', '__parameters__', '__post_root_validators__', '__pre_root_validators__', '__pretty__', '__private_attributes__', '__reduce__', '__reduce_ex__', '__repr__', '__repr_args__', '__repr_name__', '__repr_str__', '__rich_repr__', '__ror__', '__schema_cache__', '__setattr__', '__setstate__', '__signature__', '__sizeof__', '__slots__', '__static_attributes__', '__str__', '__subclasshook__', '__try_update_forward_refs__', '__validators__', '__weakref__', '_abatch_with_config', '_abc_impl', '_acall', '_acall_with_config', '_aget_docs', '_atransform_stream_with_config', '_batch_with_config', '_calculate_keys', '_call', '_call_with_config', '_chain_type', '_copy_and_set_values', '_decompose_class', '_enforce_dict_if_root', '_get_docs', '_get_value', '_init_private_attributes', '_iter', '_lc_kwargs', '_run_output_key', '_transform_stream_with_config', '_validate_inputs', '_validate_outputs', 'abatch', 'acall', 'ainvoke', 'apply', 'arun', 'assign', 'astream', 'astream_events', 'astream_log', 'atransform', 'batch', 'bind', 'callback_manager', 'callbacks', 'combine_documents_chain', 'config_schema', 'config_specs', 'configurable_alternatives', 'configurable_fields', 'construct', 'copy', 'dict', 'from_chain_type', 'from_llm', 'from_orm', 'get_graph', 'get_input_schema', 'get_lc_namespace', 'get_name', 'get_output_schema', 'get_prompts', 'input_key', 'input_keys', 'input_schema', 'invoke', 'is_lc_serializable', 'json', 'lc_attributes', 'lc_id', 'lc_secrets', 'map', 'memory', 'metadata', 'name', 'output_key', 'output_keys', 'output_schema', 'parse_file', 'parse_obj', 'parse_raw', 'pick', 'pipe', 'prep_inputs', 'prep_outputs', 'raise_callback_manager_deprecation', 'retriever', 'return_source_documents', 'run', 'save', 'schema', 'schema_json', 'set_verbose', 'stream', 'tags', 'to_json', 'to_json_not_implemented', 'transform', 'update_forward_refs', 'validate', 'verbose', 'with_config', 'with_fallbacks', 'with_listeners', 'with_retry', 'with_types']
2025-04-19 10:28:53,966 - app - INFO - Retriever is present
2025-04-19 10:28:53,967 - app - INFO - Retriever type: <class 'langchain_core.vectorstores.VectorStoreRetriever'>
2025-04-19 10:28:53,967 - app - INFO - Vector store is initialized
2025-04-19 10:28:53,967 - app - INFO - Vector store type: <class 'langchain_community.vectorstores.faiss.FAISS'>
2025-04-19 10:28:55,226 - app - INFO - Vector store search test successful, found 1 documents
2025-04-19 10:28:55,227 - app - INFO - Embeddings test successful
2025-04-19 10:28:55,227 - app - INFO - === End of RAG System Debug Info ===
2025-04-19 10:28:55,227 - app - INFO - Processing message with chain
2025-04-19 10:28:55,227 - app - INFO - Calling chain with query
2025-04-19 10:28:57,202 - app - ERROR - Error in chain processing: Missing some input keys: {'query'}
Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 317, in chat
    result = chain({"query": message})
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 363, in __call__
    return self.invoke(
           ~~~~~~~~~~~^
        inputs,
        ^^^^^^^
    ...<2 lines>...
        include_run_info=include_run_info,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 162, in invoke
    raise e
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 156, in invoke
    self._call(inputs, run_manager=run_manager)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\retrieval_qa\base.py", line 144, in _call
    answer = self.combine_documents_chain.run(
        input_documents=docs, question=question, callbacks=_run_manager.get_child()
    )
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 543, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
           ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 363, in __call__
    return self.invoke(
           ~~~~~~~~~~~^
        inputs,
        ^^^^^^^
    ...<2 lines>...
        include_run_info=include_run_info,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 138, in invoke
    inputs = self.prep_inputs(input)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 475, in prep_inputs
    self._validate_inputs(inputs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 264, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'query'}
2025-04-19 10:28:57,208 - app - ERROR - Error type: <class 'ValueError'>
2025-04-19 10:28:57,208 - app - ERROR - Error args: ("Missing some input keys: {'query'}",)
2025-04-19 10:28:57,209 - app - INFO - === Chat request completed ===
2025-04-19 10:30:14,035 - app - INFO - Initializing Gemini with API key
2025-04-19 10:30:14,037 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:30:14,037 - app - INFO - Loading and preparing data...
2025-04-19 10:30:14,038 - app - INFO - Loading data from CSV...
2025-04-19 10:30:14,041 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:30:14,041 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:30:14,041 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:30:14,042 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:30:14,047 - app - INFO - Successfully created 80 documents
2025-04-19 10:30:14,048 - app - INFO - Loaded 80 documents
2025-04-19 10:30:14,048 - app - INFO - Creating vector store...
2025-04-19 10:30:14,048 - app - INFO - Creating vector store
2025-04-19 10:30:14,049 - app - INFO - Embeddings model initialized
2025-04-19 10:30:14,049 - app - INFO - Text splitter initialized
2025-04-19 10:30:14,049 - app - INFO - First text sample: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcoho...
2025-04-19 10:30:14,049 - app - INFO - First metadata sample: {'type': 'recommendation'}
2025-04-19 10:30:17,368 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:30:17,396 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:30:17,403 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:30:17,408 - app - INFO - Vector store created successfully
2025-04-19 10:30:17,408 - app - INFO - Testing search with query: SPF ����
2025-04-19 10:30:17,807 - app - INFO - Search results count: 3
2025-04-19 10:30:17,807 - app - INFO - First search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:30:17,807 - app - INFO - Vector store created successfully
2025-04-19 10:30:17,808 - app - INFO - Initializing chain...
2025-04-19 10:30:17,808 - app - INFO - Prompt template created
2025-04-19 10:30:17,809 - app - INFO - Checking model initialization...
2025-04-19 10:30:17,809 - app - INFO - Model is initialized
2025-04-19 10:30:17,809 - app - INFO - Checking vector store initialization...
2025-04-19 10:30:17,810 - app - INFO - Vector store is initialized
2025-04-19 10:30:17,810 - app - INFO - Creating retriever...
2025-04-19 10:30:17,810 - app - INFO - Retriever created
2025-04-19 10:30:17,810 - app - INFO - Initializing RetrievalQA chain...
2025-04-19 10:30:17,811 - app - INFO - Chain initialized successfully
2025-04-19 10:30:17,811 - app - INFO - Verifying chain initialization...
2025-04-19 10:30:17,812 - app - INFO - Chain verification successful
2025-04-19 10:30:17,812 - app - INFO - RAG system initialized successfully
2025-04-19 10:30:17,812 - app - INFO - === RAG Initialization Completed ===
2025-04-19 10:34:31,260 - app - INFO - === Starting chat request ===
2025-04-19 10:34:31,260 - app - INFO - Received message: cream with spf
2025-04-19 10:34:31,260 - app - INFO - === RAG System Debug Info ===
2025-04-19 10:34:31,261 - app - INFO - Chain is None: False
2025-04-19 10:34:31,261 - app - INFO - Chain is initialized
2025-04-19 10:34:31,261 - app - INFO - Chain type: <class 'langchain.chains.retrieval_qa.base.RetrievalQA'>
2025-04-19 10:34:31,262 - app - INFO - Chain attributes: ['Config', 'InputType', 'OutputType', '__abstractmethods__', '__annotations__', '__call__', '__class__', '__class_getitem__', '__class_vars__', '__config__', '__custom_root_type__', '__delattr__', '__dict__', '__dir__', '__doc__', '__eq__', '__exclude_fields__', '__fields__', '__fields_set__', '__firstlineno__', '__format__', '__ge__', '__get_validators__', '__getattribute__', '__getstate__', '__gt__', '__hash__', '__include_fields__', '__init__', '__init_subclass__', '__iter__', '__json_encoder__', '__le__', '__lt__', '__module__', '__ne__', '__new__', '__or__', '__orig_bases__', '__parameters__', '__post_root_validators__', '__pre_root_validators__', '__pretty__', '__private_attributes__', '__reduce__', '__reduce_ex__', '__repr__', '__repr_args__', '__repr_name__', '__repr_str__', '__rich_repr__', '__ror__', '__schema_cache__', '__setattr__', '__setstate__', '__signature__', '__sizeof__', '__slots__', '__static_attributes__', '__str__', '__subclasshook__', '__try_update_forward_refs__', '__validators__', '__weakref__', '_abatch_with_config', '_abc_impl', '_acall', '_acall_with_config', '_aget_docs', '_atransform_stream_with_config', '_batch_with_config', '_calculate_keys', '_call', '_call_with_config', '_chain_type', '_copy_and_set_values', '_decompose_class', '_enforce_dict_if_root', '_get_docs', '_get_value', '_init_private_attributes', '_iter', '_lc_kwargs', '_run_output_key', '_transform_stream_with_config', '_validate_inputs', '_validate_outputs', 'abatch', 'acall', 'ainvoke', 'apply', 'arun', 'assign', 'astream', 'astream_events', 'astream_log', 'atransform', 'batch', 'bind', 'callback_manager', 'callbacks', 'combine_documents_chain', 'config_schema', 'config_specs', 'configurable_alternatives', 'configurable_fields', 'construct', 'copy', 'dict', 'from_chain_type', 'from_llm', 'from_orm', 'get_graph', 'get_input_schema', 'get_lc_namespace', 'get_name', 'get_output_schema', 'get_prompts', 'input_key', 'input_keys', 'input_schema', 'invoke', 'is_lc_serializable', 'json', 'lc_attributes', 'lc_id', 'lc_secrets', 'map', 'memory', 'metadata', 'name', 'output_key', 'output_keys', 'output_schema', 'parse_file', 'parse_obj', 'parse_raw', 'pick', 'pipe', 'prep_inputs', 'prep_outputs', 'raise_callback_manager_deprecation', 'retriever', 'return_source_documents', 'run', 'save', 'schema', 'schema_json', 'set_verbose', 'stream', 'tags', 'to_json', 'to_json_not_implemented', 'transform', 'update_forward_refs', 'validate', 'verbose', 'with_config', 'with_fallbacks', 'with_listeners', 'with_retry', 'with_types']
2025-04-19 10:34:31,262 - app - INFO - Retriever is present
2025-04-19 10:34:31,262 - app - INFO - Retriever type: <class 'langchain_core.vectorstores.VectorStoreRetriever'>
2025-04-19 10:34:31,263 - app - INFO - Vector store is initialized
2025-04-19 10:34:31,263 - app - INFO - Vector store type: <class 'langchain_community.vectorstores.faiss.FAISS'>
2025-04-19 10:34:31,908 - app - INFO - Vector store search test successful, found 1 documents
2025-04-19 10:34:31,909 - app - INFO - Embeddings test successful
2025-04-19 10:34:31,909 - app - INFO - === End of RAG System Debug Info ===
2025-04-19 10:34:31,909 - app - INFO - Processing message with chain
2025-04-19 10:34:31,910 - app - INFO - Calling chain with query
2025-04-19 10:34:33,400 - app - ERROR - Error in chain processing: Missing some input keys: {'query'}
Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 317, in chat
    result = chain({"query": message})
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 363, in __call__
    return self.invoke(
           ~~~~~~~~~~~^
        inputs,
        ^^^^^^^
    ...<2 lines>...
        include_run_info=include_run_info,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 162, in invoke
    raise e
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 156, in invoke
    self._call(inputs, run_manager=run_manager)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\retrieval_qa\base.py", line 144, in _call
    answer = self.combine_documents_chain.run(
        input_documents=docs, question=question, callbacks=_run_manager.get_child()
    )
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 543, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
           ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 363, in __call__
    return self.invoke(
           ~~~~~~~~~~~^
        inputs,
        ^^^^^^^
    ...<2 lines>...
        include_run_info=include_run_info,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 138, in invoke
    inputs = self.prep_inputs(input)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 475, in prep_inputs
    self._validate_inputs(inputs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 264, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'query'}
2025-04-19 10:34:33,404 - app - ERROR - Error type: <class 'ValueError'>
2025-04-19 10:34:33,404 - app - ERROR - Error args: ("Missing some input keys: {'query'}",)
2025-04-19 10:34:33,404 - app - INFO - === Chat request completed ===
2025-04-19 10:38:42,055 - app - INFO - Initializing Gemini with API key
2025-04-19 10:38:42,057 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:38:42,058 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:38:42,058 - app - INFO - Loading and preparing data...
2025-04-19 10:38:42,058 - app - INFO - Loading data from CSV...
2025-04-19 10:38:42,061 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:38:42,062 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:38:42,062 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:38:42,063 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:38:42,068 - app - INFO - Successfully created 80 documents
2025-04-19 10:38:42,068 - app - INFO - Creating vector store...
2025-04-19 10:38:42,068 - app - INFO - Creating vector store
2025-04-19 10:38:42,069 - app - INFO - Embeddings model initialized
2025-04-19 10:38:45,436 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:38:45,457 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:38:45,464 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:38:45,474 - app - INFO - Vector store created successfully
2025-04-19 10:38:45,911 - app - INFO - Test search results count: 3
2025-04-19 10:38:45,911 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:38:45,911 - app - INFO - Initializing chain...
2025-04-19 10:38:45,912 - app - INFO - RAG system initialized successfully
2025-04-19 10:39:06,929 - app - INFO - Initializing Gemini with API key
2025-04-19 10:39:06,931 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:39:06,932 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:39:06,932 - app - INFO - Loading and preparing data...
2025-04-19 10:39:06,932 - app - INFO - Loading data from CSV...
2025-04-19 10:39:06,937 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:39:06,937 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:39:06,938 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:39:06,938 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:39:06,945 - app - INFO - Successfully created 80 documents
2025-04-19 10:39:06,946 - app - INFO - Creating vector store...
2025-04-19 10:39:06,946 - app - INFO - Creating vector store
2025-04-19 10:39:06,946 - app - INFO - Embeddings model initialized
2025-04-19 10:39:10,181 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:39:10,205 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:39:10,212 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:39:10,217 - app - INFO - Vector store created successfully
2025-04-19 10:39:10,627 - app - INFO - Test search results count: 3
2025-04-19 10:39:10,627 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:39:10,627 - app - INFO - Initializing chain...
2025-04-19 10:39:10,628 - app - INFO - RAG system initialized successfully
2025-04-19 10:43:26,653 - app - INFO - Initializing Gemini with API key
2025-04-19 10:43:26,656 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:43:26,658 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:43:26,658 - app - INFO - Loading and preparing data...
2025-04-19 10:43:26,658 - app - INFO - Loading data from CSV...
2025-04-19 10:43:26,663 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:43:26,664 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:43:26,664 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:43:26,665 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:43:26,674 - app - INFO - Successfully created 80 documents
2025-04-19 10:43:26,675 - app - INFO - Creating vector store...
2025-04-19 10:43:26,675 - app - INFO - Creating vector store
2025-04-19 10:43:26,676 - app - INFO - Embeddings model initialized
2025-04-19 10:43:29,312 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:43:29,357 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:43:29,371 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:43:29,383 - app - INFO - Vector store created successfully
2025-04-19 10:43:29,804 - app - INFO - Test search results count: 3
2025-04-19 10:43:29,805 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:43:29,805 - app - INFO - Initializing chain...
2025-04-19 10:43:29,806 - app - INFO - RAG system initialized successfully
2025-04-19 10:44:38,773 - app - INFO - Received message: cream with spf
2025-04-19 10:44:38,773 - app - INFO - Processing message with chain
2025-04-19 10:44:40,718 - app - ERROR - Error in chat endpoint: Missing some input keys: {'query'}
Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 207, in chat
    result = chain.invoke({"query": message})
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 162, in invoke
    raise e
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 156, in invoke
    self._call(inputs, run_manager=run_manager)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\retrieval_qa\base.py", line 144, in _call
    answer = self.combine_documents_chain.run(
        input_documents=docs, question=question, callbacks=_run_manager.get_child()
    )
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 543, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
           ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 363, in __call__
    return self.invoke(
           ~~~~~~~~~~~^
        inputs,
        ^^^^^^^
    ...<2 lines>...
        include_run_info=include_run_info,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 138, in invoke
    inputs = self.prep_inputs(input)
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 475, in prep_inputs
    self._validate_inputs(inputs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "C:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 264, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'query'}
2025-04-19 10:44:57,078 - app - INFO - Received image: cream-ingredients.jpg
2025-04-19 10:45:20,279 - app - INFO - Initializing Gemini with API key
2025-04-19 10:45:20,281 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:45:20,281 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:45:20,282 - app - INFO - Loading and preparing data...
2025-04-19 10:45:20,282 - app - INFO - Loading data from CSV...
2025-04-19 10:45:20,285 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:45:20,285 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:45:20,286 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:45:20,286 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:45:20,292 - app - INFO - Successfully created 80 documents
2025-04-19 10:45:20,292 - app - INFO - Creating vector store...
2025-04-19 10:45:20,293 - app - INFO - Creating vector store
2025-04-19 10:45:20,293 - app - INFO - Embeddings model initialized
2025-04-19 10:45:23,101 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:45:23,128 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:45:23,136 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:45:23,142 - app - INFO - Vector store created successfully
2025-04-19 10:45:23,556 - app - INFO - Test search results count: 3
2025-04-19 10:45:23,556 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:45:23,557 - app - INFO - Initializing chain...
2025-04-19 10:45:23,558 - app - INFO - RAG system initialized successfully

2025-04-19 10:46:08,282 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:46:08,283 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:46:08,283 - app - INFO - Loading and preparing data...
2025-04-19 10:46:08,284 - app - INFO - Loading data from CSV...
2025-04-19 10:46:08,290 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:46:08,290 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:46:08,291 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:46:08,292 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:46:08,299 - app - INFO - Successfully created 80 documents
2025-04-19 10:46:08,299 - app - INFO - Creating vector store...
2025-04-19 10:46:08,300 - app - INFO - Creating vector store
2025-04-19 10:46:08,300 - app - INFO - Embeddings model initialized
2025-04-19 10:46:11,792 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:46:11,825 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:46:11,835 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:46:11,846 - app - INFO - Vector store created successfully
2025-04-19 10:46:12,281 - app - INFO - Test search results count: 3
2025-04-19 10:46:12,282 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:46:12,282 - app - INFO - Initializing chain...
2025-04-19 10:46:12,283 - app - INFO - RAG system initialized successfully
2025-04-19 10:47:05,062 - __main__ - INFO - Initializing Gemini with API key
2025-04-19 10:47:05,064 - __main__ - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:47:05,065 - __main__ - INFO - === Starting RAG Initialization ===
2025-04-19 10:47:05,065 - __main__ - INFO - Loading and preparing data...
2025-04-19 10:47:05,066 - __main__ - INFO - Loading data from CSV...
2025-04-19 10:47:05,070 - __main__ - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:47:05,071 - __main__ - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:47:05,071 - __main__ - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:47:05,072 - __main__ - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:47:05,078 - __main__ - INFO - Successfully created 80 documents
2025-04-19 10:47:05,079 - __main__ - INFO - Creating vector store...
2025-04-19 10:47:05,079 - __main__ - INFO - Creating vector store
2025-04-19 10:47:05,080 - __main__ - INFO - Embeddings model initialized
2025-04-19 10:47:07,590 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:47:07,629 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:47:07,642 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:47:07,654 - __main__ - INFO - Vector store created successfully
2025-04-19 10:47:08,057 - __main__ - INFO - Test search results count: 3
2025-04-19 10:47:08,057 - __main__ - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:47:08,058 - __main__ - INFO - Initializing chain...
2025-04-19 10:47:08,058 - __main__ - INFO - RAG system initialized successfully
2025-04-19 10:47:47,085 - app - INFO - Initializing Gemini with API key
2025-04-19 10:47:47,088 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:47:47,090 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:47:47,091 - app - INFO - Loading and preparing data...
2025-04-19 10:47:47,091 - app - INFO - Loading data from CSV...
2025-04-19 10:47:47,095 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:47:47,096 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:47:47,096 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:47:47,097 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:47:47,110 - app - INFO - Successfully created 80 documents
2025-04-19 10:47:47,111 - app - INFO - Creating vector store...
2025-04-19 10:47:47,111 - app - INFO - Creating vector store
2025-04-19 10:47:47,112 - app - INFO - Embeddings model initialized
2025-04-19 10:47:49,880 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:47:49,921 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:47:49,933 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:47:49,942 - app - INFO - Vector store created successfully
2025-04-19 10:47:50,365 - app - INFO - Test search results count: 3
2025-04-19 10:47:50,365 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:47:50,366 - app - INFO - Initializing chain...
2025-04-19 10:47:50,367 - app - INFO - RAG system initialized successfully
2025-04-19 10:48:38,366 - app - ERROR - Error in chat endpoint: Expecting value: line 1 column 1 (char 0)
2025-04-19 10:48:47,327 - app - INFO - Initializing Gemini with API key
2025-04-19 10:48:47,329 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:48:47,330 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:48:47,331 - app - INFO - Loading and preparing data...
2025-04-19 10:48:47,331 - app - INFO - Loading data from CSV...
2025-04-19 10:48:47,336 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:48:47,336 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:48:47,337 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:48:47,338 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:48:47,351 - app - INFO - Successfully created 80 documents
2025-04-19 10:48:47,351 - app - INFO - Creating vector store...
2025-04-19 10:48:47,351 - app - INFO - Creating vector store
2025-04-19 10:48:47,352 - app - INFO - Embeddings model initialized
2025-04-19 10:48:50,428 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:48:50,483 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:48:50,499 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:48:50,512 - app - INFO - Vector store created successfully
2025-04-19 10:48:50,963 - app - INFO - Test search results count: 3
2025-04-19 10:48:50,964 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:48:50,964 - app - INFO - Initializing chain...
2025-04-19 10:48:50,966 - app - INFO - RAG system initialized successfully
2025-04-19 10:49:26,387 - app - INFO - Received image: cream-ingredients.jpg
2025-04-19 10:49:53,645 - app - ERROR - Error in chat endpoint: Expecting value: line 1 column 1 (char 0)
2025-04-19 10:53:01,601 - app - INFO - Initializing Gemini with API key
2025-04-19 10:53:01,603 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:53:01,603 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:53:01,604 - app - INFO - Loading and preparing data...
2025-04-19 10:53:01,604 - app - INFO - Loading data from CSV...
2025-04-19 10:53:01,608 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:53:01,608 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:53:01,608 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:53:01,609 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:53:01,618 - app - INFO - Successfully created 80 documents
2025-04-19 10:53:01,619 - app - INFO - Creating vector store...
2025-04-19 10:53:01,619 - app - INFO - Creating vector store
2025-04-19 10:53:01,620 - app - INFO - Embeddings model initialized
2025-04-19 10:53:04,284 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:53:04,317 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:53:04,329 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:53:04,338 - app - INFO - Vector store created successfully
2025-04-19 10:53:04,757 - app - INFO - Test search results count: 3
2025-04-19 10:53:04,758 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:53:04,758 - app - INFO - Initializing chain...
2025-04-19 10:53:04,759 - app - INFO - RAG system initialized successfully
2025-04-19 10:53:09,563 - app - INFO - Initializing Gemini with API key
2025-04-19 10:53:09,566 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:53:09,567 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:53:09,568 - app - INFO - Loading and preparing data...
2025-04-19 10:53:09,568 - app - INFO - Loading data from CSV...
2025-04-19 10:53:09,573 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:53:09,573 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:53:09,574 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:53:09,575 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:53:09,585 - app - INFO - Successfully created 80 documents
2025-04-19 10:53:09,585 - app - INFO - Creating vector store...
2025-04-19 10:53:09,586 - app - INFO - Creating vector store
2025-04-19 10:53:09,586 - app - INFO - Embeddings model initialized
2025-04-19 10:53:12,181 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:53:12,210 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:53:12,218 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:53:12,225 - app - INFO - Vector store created successfully
2025-04-19 10:53:12,628 - app - INFO - Test search results count: 3
2025-04-19 10:53:12,629 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:53:12,629 - app - INFO - Initializing chain...
2025-04-19 10:53:12,630 - app - INFO - RAG system initialized successfully
2025-04-19 10:53:22,588 - app - ERROR - Error in chat endpoint: Expecting value: line 1 column 1 (char 0)
Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 200, in chat
    data = await request.json()
           ^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\starlette\requests.py", line 252, in json
    self._json = json.loads(body)
                 ~~~~~~~~~~^^^^^^
  File "C:\Users\AnnBer\AppData\Local\Programs\Python\Python313\Lib\json\__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "C:\Users\AnnBer\AppData\Local\Programs\Python\Python313\Lib\json\decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\AnnBer\AppData\Local\Programs\Python\Python313\Lib\json\decoder.py", line 363, in raw_decode
    raise JSONDecodeError("Expecting value", s, err.value) from None
json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)
2025-04-19 10:53:57,704 - app - INFO - Initializing Gemini with API key
2025-04-19 10:53:57,710 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:53:57,713 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:53:57,714 - app - INFO - Loading and preparing data...
2025-04-19 10:53:57,716 - app - INFO - Loading data from CSV...
2025-04-19 10:53:57,732 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:53:57,734 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:53:57,736 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:53:57,739 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:53:57,768 - app - INFO - Successfully created 80 documents
2025-04-19 10:53:57,769 - app - INFO - Creating vector store...
2025-04-19 10:53:57,770 - app - INFO - Creating vector store
2025-04-19 10:53:57,771 - app - INFO - Embeddings model initialized
2025-04-19 10:54:02,090 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:54:02,242 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:54:02,359 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:54:02,402 - app - INFO - Vector store created successfully
2025-04-19 10:54:02,910 - app - INFO - Test search results count: 3
2025-04-19 10:54:02,911 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:54:02,912 - app - INFO - Initializing chain...
2025-04-19 10:54:02,917 - app - INFO - RAG system initialized successfully
2025-04-19 10:54:08,184 - app - INFO - Initializing Gemini with API key
2025-04-19 10:54:08,191 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:54:08,200 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:54:08,203 - app - INFO - Loading and preparing data...
2025-04-19 10:54:08,206 - app - INFO - Loading data from CSV...
2025-04-19 10:54:08,224 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:54:08,233 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:54:08,241 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:54:08,252 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:54:08,301 - app - INFO - Successfully created 80 documents
2025-04-19 10:54:08,304 - app - INFO - Creating vector store...
2025-04-19 10:54:08,305 - app - INFO - Creating vector store
2025-04-19 10:54:08,308 - app - INFO - Embeddings model initialized
2025-04-19 10:54:13,769 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:54:13,903 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:54:13,957 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:54:13,989 - app - INFO - Vector store created successfully
2025-04-19 10:54:14,479 - app - INFO - Test search results count: 3
2025-04-19 10:54:14,482 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:54:14,484 - app - INFO - Initializing chain...
2025-04-19 10:54:14,487 - app - INFO - RAG system initialized successfully
2025-04-19 10:54:20,077 - app - INFO - Initializing Gemini with API key
2025-04-19 10:54:20,082 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:54:20,084 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:54:20,085 - app - INFO - Loading and preparing data...
2025-04-19 10:54:20,085 - app - INFO - Loading data from CSV...
2025-04-19 10:54:20,098 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:54:20,099 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:54:20,101 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:54:20,103 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:54:20,124 - app - INFO - Successfully created 80 documents
2025-04-19 10:54:20,125 - app - INFO - Creating vector store...
2025-04-19 10:54:20,126 - app - INFO - Creating vector store
2025-04-19 10:54:20,127 - app - INFO - Embeddings model initialized
2025-04-19 10:54:22,860 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:54:22,896 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:54:22,908 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:54:22,920 - app - INFO - Vector store created successfully
2025-04-19 10:54:23,339 - app - INFO - Test search results count: 3
2025-04-19 10:54:23,339 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:54:23,340 - app - INFO - Initializing chain...
2025-04-19 10:54:23,341 - app - INFO - RAG system initialized successfully
2025-04-19 10:54:23,350 - app - ERROR - No question provided in request
2025-04-19 10:55:20,251 - app - ERROR - No question provided in request
2025-04-19 10:55:44,995 - app - INFO - Initializing Gemini with API key
2025-04-19 10:55:44,997 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:55:44,999 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:55:45,000 - app - INFO - Loading and preparing data...
2025-04-19 10:55:45,000 - app - INFO - Loading data from CSV...
2025-04-19 10:55:45,009 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:55:45,009 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:55:45,010 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:55:45,011 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:55:45,018 - app - INFO - Successfully created 80 documents
2025-04-19 10:55:45,019 - app - INFO - Creating vector store...
2025-04-19 10:55:45,020 - app - INFO - Creating vector store
2025-04-19 10:55:45,020 - app - INFO - Embeddings model initialized
2025-04-19 10:55:47,706 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:55:47,735 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:55:47,743 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:55:47,748 - app - INFO - Vector store created successfully
2025-04-19 10:55:48,167 - app - INFO - Test search results count: 3
2025-04-19 10:55:48,167 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:55:48,167 - app - INFO - Initializing chain...
2025-04-19 10:55:48,168 - app - INFO - RAG system initialized successfully
2025-04-19 10:55:52,174 - app - INFO - Initializing Gemini with API key
2025-04-19 10:55:52,176 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:55:52,177 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:55:52,178 - app - INFO - Loading and preparing data...
2025-04-19 10:55:52,178 - app - INFO - Loading data from CSV...
2025-04-19 10:55:52,183 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:55:52,183 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:55:52,184 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:55:52,185 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:55:52,197 - app - INFO - Successfully created 80 documents
2025-04-19 10:55:52,197 - app - INFO - Creating vector store...
2025-04-19 10:55:52,198 - app - INFO - Creating vector store
2025-04-19 10:55:52,198 - app - INFO - Embeddings model initialized
2025-04-19 10:55:54,608 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:55:54,639 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:55:54,648 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:55:54,655 - app - INFO - Vector store created successfully
2025-04-19 10:55:55,051 - app - INFO - Test search results count: 3
2025-04-19 10:55:55,051 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:55:55,051 - app - INFO - Initializing chain...
2025-04-19 10:55:55,053 - app - INFO - RAG system initialized successfully
2025-04-19 10:55:55,061 - app - ERROR - No query provided in request
2025-04-19 10:56:11,520 - app - INFO - Initializing Gemini with API key
2025-04-19 10:56:11,523 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:56:11,525 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:56:11,526 - app - INFO - Loading and preparing data...
2025-04-19 10:56:11,526 - app - INFO - Loading data from CSV...
2025-04-19 10:56:11,534 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:56:11,535 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:56:11,536 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:56:11,537 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:56:11,557 - app - INFO - Successfully created 80 documents
2025-04-19 10:56:11,558 - app - INFO - Creating vector store...
2025-04-19 10:56:11,559 - app - INFO - Creating vector store
2025-04-19 10:56:11,560 - app - INFO - Embeddings model initialized
2025-04-19 10:56:14,187 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:56:14,213 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:56:14,227 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:56:14,237 - app - INFO - Vector store created successfully
2025-04-19 10:56:14,685 - app - INFO - Test search results count: 3
2025-04-19 10:56:14,685 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:56:14,686 - app - INFO - Initializing chain...
2025-04-19 10:56:14,687 - app - INFO - RAG system initialized successfully
2025-04-19 10:56:38,574 - app - INFO - Initializing Gemini with API key
2025-04-19 10:56:38,576 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:56:38,577 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:56:38,577 - app - INFO - Loading and preparing data...
2025-04-19 10:56:38,577 - app - INFO - Loading data from CSV...
2025-04-19 10:56:38,581 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:56:38,581 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:56:38,581 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:56:38,582 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:56:38,588 - app - INFO - Successfully created 80 documents
2025-04-19 10:56:38,589 - app - INFO - Creating vector store...
2025-04-19 10:56:38,589 - app - INFO - Creating vector store
2025-04-19 10:56:38,589 - app - INFO - Embeddings model initialized
2025-04-19 10:56:42,085 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:56:42,119 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:56:42,132 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:56:42,139 - app - INFO - Vector store created successfully
2025-04-19 10:56:42,539 - app - INFO - Test search results count: 3
2025-04-19 10:56:42,540 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:56:42,540 - app - INFO - Initializing chain...
2025-04-19 10:56:42,541 - app - INFO - RAG system initialized successfully
2025-04-19 10:56:44,049 - app - INFO - Initializing Gemini with API key
2025-04-19 10:56:44,051 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:56:44,052 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:56:44,053 - app - INFO - Loading and preparing data...
2025-04-19 10:56:44,053 - app - INFO - Loading data from CSV...
2025-04-19 10:56:44,058 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:56:44,058 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:56:44,059 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:56:44,060 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:56:44,068 - app - INFO - Successfully created 80 documents
2025-04-19 10:56:44,068 - app - INFO - Creating vector store...
2025-04-19 10:56:44,068 - app - INFO - Creating vector store
2025-04-19 10:56:44,069 - app - INFO - Embeddings model initialized
2025-04-19 10:56:47,548 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:56:47,581 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:56:47,594 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:56:47,603 - app - INFO - Vector store created successfully
2025-04-19 10:56:48,002 - app - INFO - Test search results count: 3
2025-04-19 10:56:48,003 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:56:48,003 - app - INFO - Initializing chain...
2025-04-19 10:56:48,004 - app - INFO - RAG system initialized successfully
2025-04-19 10:56:51,851 - app - INFO - Received chat request
2025-04-19 10:56:51,851 - app - INFO - JSON parsing failed: Expecting value: line 1 column 1 (char 0)
2025-04-19 10:56:51,852 - app - INFO - Received form data: FormData([('message', 'cream with spf')])
2025-04-19 10:56:51,852 - app - INFO - Processing query: cream with spf
2025-04-19 10:56:52,753 - app - ERROR - Error in chat endpoint: Missing some input keys: {'query'}
Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 229, in chat
    result = chain.invoke({"query": query})
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 162, in invoke
    raise e
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 156, in invoke
    self._call(inputs, run_manager=run_manager)
    ~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\retrieval_qa\base.py", line 144, in _call
    answer = self.combine_documents_chain.run(
        input_documents=docs, question=question, callbacks=_run_manager.get_child()
    )
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 543, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
           ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain_core\_api\deprecation.py", line 145, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 363, in __call__
    return self.invoke(
           ~~~~~~~~~~~^
        inputs,
        ^^^^^^^
    ...<2 lines>...
        include_run_info=include_run_info,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 138, in invoke
    inputs = self.prep_inputs(input)
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 475, in prep_inputs
    self._validate_inputs(inputs)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\langchain\chains\base.py", line 264, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'query'}
2025-04-19 10:58:50,191 - app - INFO - Initializing Gemini with API key
2025-04-19 10:58:50,193 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 10:58:50,194 - app - INFO - === Starting RAG Initialization ===
2025-04-19 10:58:50,195 - app - INFO - Loading and preparing data...
2025-04-19 10:58:50,195 - app - INFO - Loading data from CSV...
2025-04-19 10:58:50,198 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 10:58:50,198 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 10:58:50,199 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 10:58:50,199 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 10:58:50,204 - app - INFO - Successfully created 80 documents
2025-04-19 10:58:50,205 - app - INFO - Creating vector store...
2025-04-19 10:58:50,205 - app - INFO - Creating vector store
2025-04-19 10:58:50,205 - app - INFO - Embeddings model initialized
2025-04-19 10:58:53,474 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 10:58:53,503 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 10:58:53,512 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 10:58:53,518 - app - INFO - Vector store created successfully
2025-04-19 10:58:53,936 - app - INFO - Test search results count: 3
2025-04-19 10:58:53,936 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 10:58:53,936 - app - INFO - Initializing chain...
2025-04-19 10:58:53,938 - app - INFO - RAG system initialized successfully
2025-04-19 11:01:13,278 - app - INFO - Initializing Gemini with API key
2025-04-19 11:01:13,280 - app - INFO - ChatGoogleGenerativeAI initialized successfully
2025-04-19 11:01:13,281 - app - INFO - === Starting RAG Initialization ===
2025-04-19 11:01:13,282 - app - INFO - Loading and preparing data...
2025-04-19 11:01:13,282 - app - INFO - Loading data from CSV...
2025-04-19 11:01:13,286 - app - INFO - Successfully loaded 80 rows from CSV
2025-04-19 11:01:13,286 - app - INFO - Columns in CSV: ['product_name', 'category', 'ingredients']
2025-04-19 11:01:13,287 - app - INFO - First row sample: {'product_name': 'CeraVe Hydrating Facial Cleanser', 'category': 'Cleanser', 'ingredients': 'Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.'}
2025-04-19 11:01:13,288 - app - INFO - First document content: 
                ��������: CeraVe Hydrating Facial Cleanser
                ���������: Cleanser
                �����������: Aqua/Water/Eau, Glycerin, Cetearyl Alcohol, Peg-40 Stearate, Stearyl Alcohol, Potassium Phosphate, Ceramide Np, Ceramide Ap, Ceramide Eop, Carbomer, Glyceryl Stearate, Behentrimonium Methosulfate, Sodium Lauroyl Lactylate, Sodium Hyaluronate, Cholesterol, Phenoxyethanol, Disodium Edta, Dipotassium Phosphate, Tocopherol, Phytosphingosine, Xanthan Gum, Cetyl Alcohol, Polysorbate 20, Ethylhexylglycerin.
                
2025-04-19 11:01:13,294 - app - INFO - Successfully created 80 documents
2025-04-19 11:01:13,295 - app - INFO - Creating vector store...
2025-04-19 11:01:13,295 - app - INFO - Creating vector store
2025-04-19 11:01:13,296 - app - INFO - Embeddings model initialized
2025-04-19 11:01:16,899 - faiss.loader - INFO - Loading faiss with AVX2 support.
2025-04-19 11:01:16,935 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2025-04-19 11:01:16,947 - faiss - INFO - Failed to load GPU Faiss: name 'GpuIndexIVFFlat' is not defined. Will not load constructor refs for GPU indexes.
2025-04-19 11:01:16,958 - app - INFO - Vector store created successfully
2025-04-19 11:01:17,392 - app - INFO - Test search results count: 3
2025-04-19 11:01:17,393 - app - INFO - First test search result: 
                ��������: Avene Thermal Spring Water
                ���������: ���������� ����
                �����������: Aqua, Nitrogen
                ...
2025-04-19 11:01:17,393 - app - INFO - Initializing chain...
2025-04-19 11:01:17,395 - app - INFO - RAG system initialized successfully
2025-04-19 20:57:20,708 - app - INFO - ������� ������ �� ������� ��������
2025-04-19 21:05:19,613 - app - INFO - ������� ������ �� ������� ��������
2025-04-19 21:06:20,840 - app - INFO - ������� ������ �� ������� ��������
2025-04-19 21:13:55,251 - app - INFO - ������� ������ �� ������� ��������
2025-04-19 21:14:04,661 - app - INFO - ������� ������ ����. ���������: ����, Session ID: cf3a58a2-a6d1-4afe-bbcd-7ed76fee04c4
2025-04-19 21:14:04,661 - app - INFO - ������� ������� ����: 0 ���������
2025-04-19 21:14:04,662 - app - INFO - �������� ���������� ������� � Gemini: ����
2025-04-19 21:14:05,305 - app - ERROR - ������ ��� ������ � Gemini: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-04-19 21:15:36,736 - app - INFO - ������� ������ �� ������� ��������
2025-04-19 21:15:42,092 - app - INFO - ������� ������ ����. ���������: rhtv, Session ID: b5628233-7f4f-4efb-86b9-4a9a8bc20a5b
2025-04-19 21:15:42,092 - app - INFO - ������� ������� ����: 0 ���������
2025-04-19 21:15:42,093 - app - INFO - �������� ���������� ������� � Gemini: rhtv
2025-04-19 21:15:43,667 - app - INFO - ������� ����� �� Gemini: RHTV isn't a widely known or established acronym.  To understand what it means, I need more context....
2025-04-19 21:15:43,668 - app - ERROR - ������ ��� ������ � Gemini: 'message'
2025-04-19 21:15:56,372 - app - INFO - ������� ������ ����. ���������: ����, Session ID: b5628233-7f4f-4efb-86b9-4a9a8bc20a5b
2025-04-19 21:15:56,372 - app - INFO - ������� ������� ����: 2 ���������
2025-04-19 21:15:56,373 - app - INFO - �������� ���������� ������� � Gemini: ����
2025-04-19 21:15:57,853 - app - INFO - ������� ����� �� Gemini: ����� "����" ����� ��������� ��������, � ����������� �� ���������:

* **������������ ����:**  ��� ��...
2025-04-19 21:15:57,853 - app - ERROR - ������ ��� ������ � Gemini: 'message'
2025-04-19 21:16:01,104 - app - INFO - ������� ������ ����. ���������: ����, Session ID: b5628233-7f4f-4efb-86b9-4a9a8bc20a5b
2025-04-19 21:16:01,104 - app - INFO - ������� ������� ����: 4 ���������
2025-04-19 21:16:01,105 - app - INFO - �������� ���������� ������� � Gemini: ����
2025-04-19 21:16:02,515 - app - INFO - ������� ����� �� Gemini: The input "����" appears to be a fragment of a word, possibly a misspelling or a truncated word in a...
2025-04-19 21:16:02,516 - app - ERROR - ������ ��� ������ � Gemini: 'message'
2025-04-19 21:16:04,088 - app - INFO - ������� ������ ����. ���������: ������, Session ID: b5628233-7f4f-4efb-86b9-4a9a8bc20a5b
2025-04-19 21:16:04,088 - app - INFO - ������� ������� ����: 6 ���������
2025-04-19 21:16:04,089 - app - INFO - �������� ���������� ������� � Gemini: ������
2025-04-19 21:16:04,918 - app - INFO - ������� ����� �� Gemini: This appears to be a random sequence of letters.  Is there anything specific you'd like me to do wit...
2025-04-19 21:16:04,918 - app - ERROR - ������ ��� ������ � Gemini: 'message'
2025-04-19 21:16:06,914 - app - INFO - ������� ������ ����. ���������: �����, Session ID: b5628233-7f4f-4efb-86b9-4a9a8bc20a5b
2025-04-19 21:16:06,915 - app - INFO - ������� ������� ����: 8 ���������
2025-04-19 21:16:06,915 - app - INFO - �������� ���������� ������� � Gemini: �����
2025-04-19 21:16:08,426 - app - INFO - ������� ����� �� Gemini: The word "�����" doesn't appear to be a word in any commonly known language.  It's possible:

* **It...
2025-04-19 21:16:08,427 - app - ERROR - ������ ��� ������ � Gemini: 'message'
2025-04-19 21:16:12,419 - app - INFO - ������� ������ ����. ���������: ����������, Session ID: b5628233-7f4f-4efb-86b9-4a9a8bc20a5b
2025-04-19 21:16:12,419 - app - INFO - ������� ������� ����: 10 ���������
2025-04-19 21:16:12,420 - app - INFO - �������� ���������� ������� � Gemini: ����������
2025-04-19 21:16:13,561 - app - INFO - ������� ����� �� Gemini: It looks like the input "����������" is a string of Cyrillic letters.  There's no inherent meaning o...
2025-04-19 21:16:13,562 - app - ERROR - ������ ��� ������ � Gemini: 'message'
2025-04-19 21:16:19,809 - app - INFO - ������� ������ ����. ���������: �������, Session ID: b5628233-7f4f-4efb-86b9-4a9a8bc20a5b
2025-04-19 21:16:19,810 - app - INFO - ������� ������� ����: 12 ���������
2025-04-19 21:16:19,810 - app - INFO - �������� ���������� ������� � Gemini: �������
2025-04-19 21:16:21,180 - app - INFO - ������� ����� �� Gemini: "�������" doesn't have a direct translation or meaning in any widely known language.  It seems like ...
2025-04-19 21:16:21,180 - app - ERROR - ������ ��� ������ � Gemini: 'message'
2025-04-19 21:16:29,613 - app - INFO - ������� ������ ����. ���������: �����, Session ID: b5628233-7f4f-4efb-86b9-4a9a8bc20a5b
2025-04-19 21:16:29,614 - app - INFO - ������� ������� ����: 14 ���������
2025-04-19 21:16:29,614 - app - INFO - �������� ���������� ������� � Gemini: �����
2025-04-19 21:16:30,943 - app - INFO - ������� ����� �� Gemini: The input "�����" appears to be a sequence of Cyrillic characters.  Without more context, it's impos...
2025-04-19 21:16:30,944 - app - ERROR - ������ ��� ������ � Gemini: 'message'
2025-04-19 21:31:05,433 - app - INFO - ������ gemini-1.5-flash ������� ����������������
2025-04-19 21:32:09,683 - app - INFO -  gemini-1.5-flash  
2025-04-19 21:32:15,108 - app - INFO -   
2025-04-19 21:33:09,567 - app - INFO -   . : ..., Session ID: abbc1ca7-633d-40ca-a705-ead0bb977560, Image: No
2025-04-19 21:33:09,567 - app - INFO -      session_id: abbc1ca7-633d-40ca-a705-ead0bb977560
2025-04-19 21:33:12,419 - app - INFO -   Gemini : ""     .    ...
2025-04-19 21:33:12,420 - app - INFO -     session_id: abbc1ca7-633d-40ca-a705-ead0bb977560
2025-04-19 22:35:57,286 - app - INFO -  gemini-pro-vision  
2025-04-19 22:38:12,419 - app - INFO -   
2025-04-19 22:38:53,973 - app - INFO -   . : spf , Session ID: 07b38c28-6790-4579-82b4-64980fd64708
2025-04-19 22:38:53,988 - app - INFO -     Gemini: spf 
2025-04-19 22:38:55,430 - app - ERROR -     Gemini: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-04-19 22:40:00,344 - app - INFO -  gemini-1.5-flash  
2025-04-19 22:40:05,796 - app - INFO -  gemini-1.5-flash  
2025-04-19 22:40:22,396 - app - INFO -  gemini-1.5-flash  
2025-04-19 22:40:34,578 - app - INFO -   
2025-04-19 22:40:43,048 - app - INFO -   . : , Session ID: 24316fa5-7e6f-4f47-ada9-8dec35173a53
2025-04-19 22:40:43,057 - app - INFO -     Gemini: 
2025-04-19 22:40:44,261 - app - INFO -    Gemini: The word "" (krem) in Russian means **cream**.  This could refer to:

* **Cosmetic cream:**  A s...
2025-04-19 22:41:49,044 - app - INFO -   . : spf cream, Session ID: 24316fa5-7e6f-4f47-ada9-8dec35173a53
2025-04-19 22:41:49,047 - app - INFO -     Gemini: spf cream
2025-04-19 22:41:52,459 - app - INFO -    Gemini: SPF cream, or sunscreen with a Sun Protection Factor, is a topical product designed to protect your ...
2025-04-19 22:43:32,377 - app - INFO -   
2025-04-19 22:43:35,094 - app - INFO -   
2025-04-19 22:51:55,457 - app - INFO -   
2025-04-19 22:51:56,507 - app - INFO -  gemini-1.5-flash  
2025-04-19 22:52:52,661 - app - INFO -   . : spf cream, Session ID: 068de43e-6ebf-4c80-a291-792d2cc56a2f
2025-04-19 22:52:52,664 - app - INFO -     Gemini: spf cream
2025-04-19 22:52:56,102 - app - INFO -    Gemini: SPF cream refers to sunscreen cream with a Sun Protection Factor (SPF) rating.  The SPF number indic...
2025-04-19 23:03:55,389 - app - INFO -  gemini-1.5-flash  
2025-04-19 23:04:24,815 - app - INFO -   
2025-04-19 23:04:38,611 - app - INFO -   . : , Session ID: 9c1771d3-c686-4b65-a0fb-0ab92c68b67a
2025-04-19 23:04:38,614 - app - INFO -   
2025-04-19 23:04:38,614 - app - INFO -   
2025-04-19 23:04:38,615 - app - INFO -      Gemini
2025-04-19 23:04:44,579 - app - INFO -    Gemini:        , , ,  ...
2025-04-19 23:05:11,912 - app - INFO -   . : spf cream, Session ID: 9c1771d3-c686-4b65-a0fb-0ab92c68b67a
2025-04-19 23:05:11,915 - app - INFO -     Gemini: spf cream
2025-04-19 23:05:15,459 - app - INFO -    Gemini: SPF cream, or sun protection factor cream, is a topical product designed to protect your skin from t...
2025-04-19 23:14:15,604 - app - INFO -  gemini-1.5-flash  
2025-04-19 23:14:22,635 - app - INFO -   
2025-04-19 23:14:41,013 - app - INFO -   . : , Session ID: b67c6614-7297-4e1f-8fbd-6a24a1f0a3a9
2025-04-19 23:14:41,039 - app - INFO -   
2025-04-19 23:14:41,039 - app - INFO -   
2025-04-19 23:14:41,040 - app - INFO -      Gemini
2025-04-19 23:14:47,816 - app - INFO -    Gemini:           .    ...
2025-04-19 23:16:02,590 - app - INFO -   . : spf cream, Session ID: b67c6614-7297-4e1f-8fbd-6a24a1f0a3a9
2025-04-19 23:16:02,593 - app - INFO -     Gemini: spf cream
2025-04-19 23:16:05,254 - app - INFO -    Gemini: SPF cream refers to sunscreen cream with a Sun Protection Factor (SPF) rating.  The SPF number indic...
2025-04-19 23:29:30,171 - app - INFO -    Redis
2025-04-19 23:29:30,173 - app - INFO -  gemini-1.5-flash  
2025-04-19 23:30:00,930 - app - INFO -   
2025-04-19 23:30:13,873 - app - INFO -   . : spf cream, Session ID: e4212c37-8ae5-456a-8860-5d878f6527f9, Skin Type: None, Category: None
2025-04-19 23:34:27,423 - app - INFO -    Redis
2025-04-19 23:34:27,425 - app - INFO -  gemini-1.5-flash  
2025-04-19 23:34:32,778 - app - INFO -    Redis
2025-04-19 23:34:32,793 - app - INFO -  gemini-1.5-flash  
2025-04-19 23:35:02,805 - app - INFO -   
2025-04-19 23:35:11,590 - app - INFO -   . : spf cream, Session ID: 0f02f80a-6a80-42a1-a245-c54a2950aed0
2025-04-19 23:35:11,592 - app - INFO -     Gemini: spf cream
2025-04-19 23:35:16,257 - app - INFO -    Gemini: SPF cream, or sunscreen with a sun protection factor, is a topical cream used to protect the skin fr...
2025-04-19 23:35:49,984 - app - INFO -   . : , Session ID: 0f02f80a-6a80-42a1-a245-c54a2950aed0
2025-04-19 23:35:49,985 - app - INFO -   
2025-04-19 23:35:50,062 - app - INFO -   
2025-04-19 23:35:50,063 - app - INFO -      Gemini
2025-04-19 23:35:53,920 - app - INFO -    Gemini:    , ,   ,     ...
2025-04-20 07:22:28,923 - app - INFO -    Redis
2025-04-20 07:22:28,927 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:22:31,605 - app - INFO -   
2025-04-20 07:23:01,232 - app - INFO -   . :   , Session ID: 3fc4722f-7d93-4ea3-b063-2938f0eeea05
2025-04-20 07:23:01,235 - app - INFO -     Gemini:   
2025-04-20 07:23:03,579 - app - INFO -    Gemini: ,        .       ,  ...
2025-04-20 07:23:33,299 - app - INFO -   . :     ?, Session ID: 3fc4722f-7d93-4ea3-b063-2938f0eeea05
2025-04-20 07:23:33,304 - app - INFO -     Gemini:     ?
2025-04-20 07:23:35,668 - app - INFO -    Gemini:     , ,  ,   .       ...
2025-04-20 07:24:29,014 - app - INFO -   . :      skincare consultant, Session ID: 3fc4722f-7d93-4ea3-b063-2938f0eeea05
2025-04-20 07:24:29,016 - app - INFO -     Gemini:      skincare consultant
2025-04-20 07:24:30,471 - app - INFO -    Gemini: ,    ,           .  , ...
2025-04-20 07:25:06,418 - app - INFO -   . :     ?, Session ID: 3fc4722f-7d93-4ea3-b063-2938f0eeea05
2025-04-20 07:25:06,421 - app - INFO -     Gemini:     ?
2025-04-20 07:25:06,976 - app - INFO -    Gemini:     ,  Google.
...
2025-04-20 07:39:29,640 - app - INFO -    Redis
2025-04-20 07:39:29,642 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:39:29,645 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:39:29,646 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:39:42,787 - app - INFO -   
2025-04-20 07:40:11,735 - app - INFO -    Redis
2025-04-20 07:40:11,737 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:40:11,742 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:40:11,742 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:40:16,272 - app - INFO -   
2025-04-20 07:40:16,284 - app - INFO -   
2025-04-20 07:40:48,578 - app - INFO -    Redis
2025-04-20 07:40:48,580 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:40:48,584 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:40:48,584 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:41:03,118 - app - INFO -   
2025-04-20 07:41:04,265 - app - INFO -   
2025-04-20 07:41:17,308 - root - ERROR -    : [Errno 2] No such file or directory: 'products_dataset_complete.json'
2025-04-20 07:41:17,309 - root - ERROR -    : [Errno 2] No such file or directory: 'products_dataset_complete.json'
2025-04-20 07:43:22,957 - app - INFO -    Redis
2025-04-20 07:43:22,960 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:43:22,972 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:43:22,973 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:43:44,628 - app - INFO -    Redis
2025-04-20 07:43:44,629 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:43:44,632 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:43:44,632 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:44:53,611 - app - INFO -    Redis
2025-04-20 07:44:53,613 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:44:53,619 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:44:53,619 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:45:29,089 - app - INFO -   
2025-04-20 07:45:43,058 - root - INFO -     
2025-04-20 07:45:51,950 - root - ERROR -    : name 'store_message' is not defined
2025-04-20 07:47:05,474 - app - INFO -    Redis
2025-04-20 07:47:05,479 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:47:05,491 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:47:05,492 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:47:17,412 - app - INFO -    Redis
2025-04-20 07:47:17,414 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:47:17,418 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:47:17,419 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:47:21,670 - app - INFO -   
2025-04-20 07:47:21,681 - app - INFO -   
2025-04-20 07:47:21,683 - app - INFO -   
2025-04-20 07:48:30,788 - root - INFO -     
2025-04-20 07:52:52,464 - app - INFO -    Redis
2025-04-20 07:52:52,467 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:52:52,473 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:52:52,473 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:52:55,429 - app - INFO -    Redis
2025-04-20 07:52:55,431 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:52:55,435 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:52:55,436 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:53:15,157 - app - INFO -   
2025-04-20 07:53:42,893 - app - INFO -    Redis
2025-04-20 07:53:42,895 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:53:42,898 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:53:42,898 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:54:00,255 - app - INFO -    Redis
2025-04-20 07:54:00,257 - app - INFO -  gemini-1.5-flash  
2025-04-20 07:54:00,263 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 07:54:00,263 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 07:54:05,984 - app - INFO -   
2025-04-20 07:55:02,448 - root - INFO -     
2025-04-20 07:56:30,754 - app - INFO -   
2025-04-20 08:12:08,047 - app - INFO -    Redis
2025-04-20 08:12:08,049 - app - INFO -  gemini-1.5-flash  
2025-04-20 08:12:08,053 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 08:12:08,053 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 08:12:20,519 - app - INFO -    Redis
2025-04-20 08:12:20,522 - app - INFO -  gemini-1.5-flash  
2025-04-20 08:12:20,526 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 08:12:20,526 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 08:12:26,356 - app - INFO -   
2025-04-20 08:13:39,276 - root - INFO -     
2025-04-20 08:18:37,799 - app - INFO -    Redis
2025-04-20 08:18:37,801 - app - INFO -  gemini-1.5-flash  
2025-04-20 08:18:37,804 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 08:18:37,804 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 08:20:06,170 - app - INFO -   
2025-04-20 08:20:18,958 - app - INFO -    Redis
2025-04-20 08:20:18,959 - app - INFO -  gemini-1.5-flash  
2025-04-20 08:20:18,963 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 08:20:18,963 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 08:20:27,212 - root - INFO -     
2025-04-20 08:55:36,496 - app - INFO -    Redis
2025-04-20 08:55:36,497 - app - INFO -  gemini-1.5-flash  
2025-04-20 08:55:36,499 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 08:55:36,499 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 08:56:06,071 - app - INFO -    Redis
2025-04-20 08:56:06,072 - app - INFO -  gemini-1.5-flash  
2025-04-20 08:56:06,074 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 08:56:06,074 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 08:57:37,456 - app - INFO -    Redis
2025-04-20 08:57:37,458 - app - INFO -  gemini-1.5-flash  
2025-04-20 08:57:37,461 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 08:57:37,462 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 08:58:23,059 - app - INFO -   
2025-04-20 08:58:41,542 - app - INFO -    Redis
2025-04-20 08:58:41,544 - app - INFO -  gemini-1.5-flash  
2025-04-20 08:58:41,548 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 08:58:41,549 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 08:58:46,697 - app - INFO -   
2025-04-20 08:59:06,171 - root - INFO -     
2025-04-20 09:00:58,410 - app - INFO -    Redis
2025-04-20 09:00:58,412 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:00:58,417 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:00:58,417 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:02:20,833 - app - INFO -   
2025-04-20 09:02:37,832 - app - INFO -    Redis
2025-04-20 09:02:37,835 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:02:37,842 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:02:37,843 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:02:44,490 - app - INFO -    Redis
2025-04-20 09:02:44,492 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:02:44,497 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:02:44,497 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:02:49,340 - app - INFO -   
2025-04-20 09:03:12,104 - root - INFO -     
2025-04-20 09:04:48,344 - app - INFO -   
2025-04-20 09:04:55,075 - app - INFO -    Redis
2025-04-20 09:04:55,078 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:04:55,083 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:04:55,084 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:05:06,858 - app - INFO -    Redis
2025-04-20 09:05:06,859 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:05:06,863 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:05:06,864 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:05:21,675 - root - INFO -     
2025-04-20 09:06:30,491 - app - INFO -    Redis
2025-04-20 09:06:30,494 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:06:30,499 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:06:30,500 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:06:59,216 - app - INFO -    Redis
2025-04-20 09:06:59,217 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:06:59,220 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:06:59,220 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:07:21,394 - app - INFO -   
2025-04-20 09:07:34,186 - app - INFO -    Redis
2025-04-20 09:07:34,187 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:07:34,191 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:07:34,191 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:07:41,369 - app - INFO -    Redis
2025-04-20 09:07:41,371 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:07:41,374 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:07:41,375 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:07:45,836 - root - INFO - Received message: i have acne
2025-04-20 09:07:45,836 - root - INFO - Detected category: acne, skin type: None
2025-04-20 09:07:45,837 - root - INFO - Sending analysis prompt to Gemini
2025-04-20 09:07:47,926 - root - INFO - Received analysis from Gemini: ```json
{
  "category": "acne",
  "skin_type": null,
  "confidence": 0.8,
  "clarification_needed": true,
  "question": "What is your current skin type? (e.g., oily, dry, combination, sensitive)"
}
```

2025-04-20 09:07:47,927 - root - ERROR - Error analyzing message with Gemini: Expecting value: line 1 column 1 (char 0)
2025-04-20 09:07:47,928 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:07:53,253 - root - INFO - Received recommendations from Gemini: !  ,      .        "None",  ,         ,        - (, , ).    ,         .

**1.  :**   -  ,      .        ,      .

**2.   :**

* **  ():**     ,      .       0.5%  2%.
* ** ( B3):**   ,    ,       .
* ** :**    ,    ,  .      (2.5%),      .

**3.   :**

1. **:**          ,    ,   .
2. ** ():**      (,   )       .     !
3. **:**         ( ,    )    .     !        .
4. **:**       !   ,    .

**4.  :**

*      
*    ()
*      ,    
* ,   

**5.   :**

*     ,  ,      .
*   !      .
*  !    ,    ,    .
*         ,   .       .
*    ,    .
*          SPF,    .


,    !      !

2025-04-20 09:10:25,940 - app - INFO -    Redis
2025-04-20 09:10:25,941 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:10:25,947 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:10:25,947 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:10:26,620 - app - INFO -    Redis
2025-04-20 09:10:26,622 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:10:26,626 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:10:26,627 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:11:18,914 - app - INFO -   
2025-04-20 09:11:37,745 - app - INFO -    Redis
2025-04-20 09:11:37,747 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:11:37,749 - app - INFO -    Redis
2025-04-20 09:11:37,751 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:11:37,752 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:11:37,753 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:11:37,758 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:11:37,759 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:11:42,628 - root - INFO - Received message: i have acne
2025-04-20 09:11:44,738 - root - INFO - Detected language: da
2025-04-20 09:11:44,739 - root - INFO - Detected category: acne, skin type: None
2025-04-20 09:11:44,740 - root - INFO - Sending analysis prompt to Gemini
2025-04-20 09:11:46,045 - root - INFO - Received analysis from Gemini: ```json
{
  "category": "acne",
  "skin_type": null,
  "confidence": 0.8,
  "clarification_needed": true,
  "question": "What is your skin type (dry, oily, combination, or sensitive)?"
}
```

2025-04-20 09:11:46,045 - root - ERROR - Error analyzing message with Gemini: Expecting value: line 1 column 1 (char 0)
2025-04-20 09:11:46,046 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:11:51,556 - root - INFO - Received recommendations from Gemini: Hey there!  So you're dealing with acne and have a "None" skin type.  That means we need to figure out your skin type first!  Is your skin oily, dry, combination, or sensitive? Knowing this will help tailor the recommendations.  Let's assume for now that your skin is on the oily/combination side, as acne is often associated with that. We can adjust later if needed.

**1. Brief Analysis of Acne:**

Acne happens when pores get clogged with oil, dead skin cells, and bacteria. This leads to those pesky pimples, blackheads, and whiteheads.  Since we don't know your skin type yet,  we'll focus on general acne-fighting strategies.

**2. Key Active Ingredients:**

* **Salicylic Acid (BHA):** This is amazing for unclogging pores. It's an exfoliant that dissolves the oil and dead skin cells that contribute to breakouts.  Look for it in cleansers, toners, or serums.
* **Benzoyl Peroxide:** This is a powerhouse against acne-causing bacteria. It can be a bit drying, so start with a lower concentration (2.5%) and see how your skin reacts.  You'll find it in cleansers, gels, and creams.
* **Niacinamide (Vitamin B3):** This is a multi-tasker! It helps reduce inflammation (redness and swelling), controls oil production, and improves skin texture. It's generally well-tolerated by most skin types.

**3. Basic Skincare Steps:**

1. **Cleanse:**  Use a gentle cleanser morning and night to remove dirt, oil, and makeup.
2. **Treat (Active Ingredients):** Apply your acne treatment (containing salicylic acid, benzoyl peroxide, or niacinamide) after cleansing.  Don't use all three at once, start with one and add others gradually if needed.
3. **Moisturize:** Even oily skin needs moisture! Choose a lightweight, oil-free moisturizer.
4. **Sunscreen (AM):**  Always, always use sunscreen with an SPF of 30 or higher in the morning, even on cloudy days.  This protects your skin from sun damage, which can worsen acne scars.

**4. Product Types to Look For:**

* **Gentle Cleanser:** Look for terms like "non-comedogenic" (won't clog pores) and "for acne-prone skin."
* **Acne Treatment:**  Serums, gels, or creams containing the active ingredients mentioned above.
* **Lightweight Moisturizer:**  Look for "oil-free," "non-comedogenic," and "gel" or "lotion" formulations.
* **Broad-Spectrum Sunscreen:**  Choose a sunscreen that protects against both UVA and UVB rays.

**5. Usage Tips and Warnings:**

* **Patch Test:** Before applying any new product to your entire face, test it on a small area (like your inner arm) for 24 hours to check for any allergic reactions.
* **Start Slow:** Don't overwhelm your skin by using all the active ingredients at once. Introduce them one at a time and observe your skin's reaction.
* **Be Patient:**  Acne treatment takes time. You may not see results immediately, so be consistent with your routine.
* **Sun Sensitivity:** Some acne treatments (like benzoyl peroxide) can make your skin more sensitive to the sun, so sunscreen is crucial.
* **Listen to Your Skin:** If you experience excessive dryness, redness, or irritation, reduce the frequency of use or discontinue the product and consult a dermatologist.


Remember, this is general advice. If your acne is severe, persistent, or accompanied by other symptoms, please consult a dermatologist. They can properly diagnose your skin type and recommend a tailored treatment plan.  Let me know if you want to refine these recommendations based on your specific skin type!

2025-04-20 09:12:09,541 - root - INFO - Received message:      ?
2025-04-20 09:12:09,561 - root - INFO - Detected language: ru
2025-04-20 09:12:09,561 - root - INFO - Detected category: None, skin type: None
2025-04-20 09:12:09,562 - root - INFO - Sending analysis prompt to Gemini
2025-04-20 09:12:10,370 - root - INFO - Received analysis from Gemini: ```json
{
  "category": "hydration",
  "skin_type": "dry",
  "confidence": 0.95,
  "clarification_needed": false,
  "question": null
}
```

2025-04-20 09:12:10,371 - root - ERROR - Error analyzing message with Gemini: Expecting value: line 1 column 1 (char 0)
2025-04-20 09:12:27,521 - root - INFO - Received message:  
2025-04-20 09:12:27,527 - root - INFO - Detected language: ru
2025-04-20 09:12:27,527 - root - INFO - Detected category: None, skin type: None
2025-04-20 09:12:27,528 - root - INFO - Sending analysis prompt to Gemini
2025-04-20 09:12:28,346 - root - INFO - Received analysis from Gemini: ```json
{
  "category": "hydration",
  "skin_type": "dry",
  "confidence": 0.95,
  "clarification_needed": false,
  "question": ""
}
```

2025-04-20 09:12:28,347 - root - ERROR - Error analyzing message with Gemini: Expecting value: line 1 column 1 (char 0)
2025-04-20 09:12:46,186 - root - INFO - Received message: 
2025-04-20 09:12:46,193 - root - INFO - Detected language: ru
2025-04-20 09:12:46,194 - root - INFO - Detected category: None, skin type: None
2025-04-20 09:12:46,194 - root - INFO - Sending analysis prompt to Gemini
2025-04-20 09:12:47,173 - root - INFO - Received analysis from Gemini: ```json
{
  "category": null,
  "skin_type": "sensitive",
  "confidence": 0.95,
  "clarification_needed": true,
  "question": "What are your main skin concerns?  (e.g., dryness, acne, redness, aging)"
}
```

2025-04-20 09:12:47,174 - root - ERROR - Error analyzing message with Gemini: Expecting value: line 1 column 1 (char 0)
2025-04-20 09:13:10,483 - root - INFO - Received message: dry skin
2025-04-20 09:13:10,501 - root - INFO - Detected language: pl
2025-04-20 09:13:10,501 - root - INFO - Detected category: hydration, skin type: dry
2025-04-20 09:13:10,502 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:13:15,124 - root - INFO - Received recommendations from Gemini: Hey there!  So you're dealing with dry skin and are looking to boost hydration?  Totally understandable  dry skin can be super uncomfortable!

**1. Understanding Your Dry Skin:**

Dry skin means your skin barrier isn't holding onto moisture as well as it should. This can lead to tightness, flakiness, itchiness, and even increased sensitivity.  It's important to focus on replenishing that moisture and strengthening the barrier.

**2. Key Active Ingredients to Look For:**

* **Hyaluronic Acid:** This is a humectant, meaning it draws moisture *from* the environment *into* your skin.  Think of it as a little moisture magnet!  It's amazing for plumping up dry skin.
* **Ceramides:** These are lipids (fats) that are naturally found in your skin and are crucial for a healthy skin barrier.  They help lock in moisture and prevent water loss.
* **Glycerin:** Another humectant, glycerin is a gentle and effective ingredient that helps draw moisture to the skin's surface.

**3. Basic Skincare Steps (for dry skin):**

1. **Cleanse:** Use a gentle, creamy cleanser  avoid harsh foaming cleansers that can strip away your skin's natural oils.
2. **Treat (Serums):** Apply a serum containing hyaluronic acid or ceramides after cleansing. This will deliver concentrated hydration and support barrier function.
3. **Moisturize:**  Follow with a rich, moisturizing cream or lotion. Look for occlusives (ingredients that create a barrier on the skin to prevent moisture loss), like shea butter or petrolatum.
4. **Protect (Sunscreen):** Even dry skin needs sun protection! Use a broad-spectrum sunscreen with at least SPF 30 every day, even on cloudy days.

**4. Product Types to Look For:**

* **Cream Cleansers:**  Avoid gel or foaming cleansers which can be drying.
* **Hyaluronic Acid Serums:** Look for lightweight serums that absorb quickly.
* **Ceramide-rich Moisturizers:** These will help repair and strengthen your skin barrier.
* **Rich Creams or Lotions:** For nighttime, a richer cream will provide intense hydration.
* **Sunscreen:** Choose a moisturizing sunscreen or apply it after your moisturizer.

**5. Usage Tips and Warnings:**

* **Consistency is Key:**  Stick with your skincare routine consistently for best results. You might not see immediate improvements, but with regular use, you'll notice a difference.
* **Listen to Your Skin:** If a product irritates your skin, stop using it immediately.
* **Hydration from the Inside Out:** Drink plenty of water throughout the day to support skin hydration from within.
* **Avoid Hot Showers:**  Hot water can strip your skin of its natural oils, exacerbating dryness. Opt for lukewarm water instead.
* **Humidifier:** Consider using a humidifier, especially during dry winter months.


Remember, everyone's skin is different, so what works for one person might not work for another.  Don't be afraid to experiment and find what works best for *your* skin.  If you have persistent concerns,  consider chatting with a dermatologist for personalized advice. Good luck on your hydration journey!

2025-04-20 09:17:29,376 - app - INFO -    Redis
2025-04-20 09:17:29,379 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:17:29,389 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:17:29,390 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:17:34,923 - root - INFO - Received message: 
2025-04-20 09:17:34,925 - root - ERROR - Error processing request: 400: Message cannot be empty
2025-04-20 09:17:54,290 - app - INFO -    Redis
2025-04-20 09:17:54,291 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:17:54,297 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:17:54,298 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:17:56,995 - app - INFO -    Redis
2025-04-20 09:17:56,997 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:17:57,001 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:17:57,002 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:19:44,409 - app - INFO -    Redis
2025-04-20 09:19:44,419 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:19:44,431 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 09:19:44,436 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 09:21:24,117 - app - INFO -    Redis
2025-04-20 09:21:24,119 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:21:24,127 - app - INFO -   
2025-04-20 09:21:24,137 - app - INFO -   
2025-04-20 09:21:29,799 - app - INFO -    Redis
2025-04-20 09:21:29,801 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:21:43,483 - root - INFO - Received message:   
2025-04-20 09:21:44,016 - root - INFO - Detected language: ru
2025-04-20 09:21:44,016 - root - INFO - Detected category: acne, skin type: None
2025-04-20 09:21:44,017 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:21:50,940 - root - INFO - Received recommendations from Gemini: !  ,         .   ,     !

**1.  :**

           (  -: , , ),    ().     ,   ,  .         ( )   ,     ,    .

**2.   :**

* **  (BHA):**     ,       .    ,   .
* ** ( 3):**   ,   ,      .     ,  .
* ** (, ):**    ,    ( ),      .      ,        .

**3.   :**

* **:**       ,     ,    .    ,    .
* **:**                 .
* **:**        ( ,        !).    ,          .
* **:**       !       ,  (  ).
* **  :**       SPF 30    ,   .        .

**4.  :**

*      
*      
*    ,   
* ,     
*    SPF 30+

**5.     :**

*       .       ,    .
*  !    ,       .
*     ,    .       .
*             .
*    !        .

,    !   ,  - .  (),   !

2025-04-20 09:22:00,454 - root - INFO - Received message: i have dry skin
2025-04-20 09:22:00,512 - root - INFO - Detected language: no
2025-04-20 09:22:00,512 - root - INFO - Detected category: hydration, skin type: dry
2025-04-20 09:22:00,513 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:22:04,998 - root - INFO - Received recommendations from Gemini: Hey there!  So you're dealing with dry skin and are concerned about hydration?  Totally understandable  dry skin can be really uncomfortable!

**1.  Understanding Dry Skin:**

Dry skin means your skin isn't producing enough oil (sebum) to keep itself moisturized.  This can lead to tightness, flakiness, itching, and even increased sensitivity.  Proper hydration is key to plumping up the skin and addressing these issues.


**2. Key Active Ingredients to Look For:**

To combat dryness and boost hydration, I'd recommend focusing on these ingredients:

* **Hyaluronic Acid:** This is a humectant, meaning it draws moisture *from* the air *into* your skin.  It's amazing at plumping and hydrating.
* **Ceramides:** These are lipids (fats) that are naturally found in your skin's barrier. They help to repair and strengthen that barrier, preventing moisture loss.
* **Glycerin:** Another humectant, glycerin is a fantastic ingredient for attracting and retaining water in the skin.


**3. Basic Skincare Steps (for dry skin):**

1. **Cleanse:** Use a gentle, creamy cleanser (avoid harsh sulfates).  Don't over-wash  once or twice a day is enough.
2. **Treat (Serums):** Apply a serum containing hyaluronic acid or a blend of hydrating ingredients.
3. **Moisturize:** Use a rich, creamy moisturizer or even an occlusive cream (like a balm or petrolatum-based product) to seal in all that hydration.
4. **Sunscreen (Daytime):**  This is crucial, even on cloudy days! Dry skin is often more sensitive to sun damage. Look for a sunscreen labeled as "non-comedogenic" (won't clog pores).

**4. Product Types to Look For:**

* **Cream Cleansers:**  Avoid foaming cleansers as they can be drying.
* **Hydrating Serums:** Look for those containing hyaluronic acid or glycerin.
* **Rich Moisturizers or Creams:**  The thicker, the better for dry skin.  Look for terms like "intense hydration" or "rich cream."
* **Occlusive Moisturizers (at night):**  These seal in moisture like a barrier  think balms or petroleum jelly.


**5. Usage Tips & Warnings:**

* **Consistency is Key:**  Don't expect miracles overnight.  Stick to your routine for at least a few weeks to see real improvements.
* **Listen to Your Skin:** If a product causes irritation, stop using it.
* **Patch Test:** Before applying a new product to your entire face, test it on a small area (like your inner arm) to check for any reactions.
* **Hydration from the Inside Out:**  Drink plenty of water throughout the day!


Remember, everyone's skin is unique.  If you're still struggling after trying these suggestions, consulting a dermatologist is always a good idea. They can provide personalized advice and rule out any underlying skin conditions.  Good luck, and happy hydrating!

2025-04-20 09:22:50,886 - app - INFO -    Redis
2025-04-20 09:22:50,891 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:23:06,658 - app - INFO -    Redis
2025-04-20 09:23:06,662 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:24:54,242 - app - INFO -    Redis
2025-04-20 09:24:54,243 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:25:25,406 - app - INFO -   
2025-04-20 09:25:30,677 - app - INFO -    Redis
2025-04-20 09:25:30,679 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:25:32,912 - root - INFO - Received message:   
2025-04-20 09:25:33,445 - root - INFO - Detected language: ru
2025-04-20 09:25:33,445 - root - INFO - Detected category: acne, skin type: None
2025-04-20 09:25:33,446 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:25:40,214 - root - INFO - Received recommendations from Gemini: !  ,  ?             ,      !

**1.   :**

* **   :**   ,  ,  - (, , )   ,     .  ,     ,            -.      - -  .

* **    :**  ()  -    ,     .      ,     -      .  , ,        .


**2.  :**

* **  (BHA):**    ,  ,         .       .

* ** ( B3):**   ,  ,       .     ,  .

* ** ( ):**    ,   ,   .  ,    ,         1-2   .


**3.  :**

* ** :**
    1.         .
    2.     SPF 30   (    !).
    3.     .

* ** :**
    1.    /.
    2.       (1-2   ,   ).
    3.   (  ,  ).
    4. 1-2         (   !).

* ** :**
    1.   - (1-2   ).         .
    2.     - (1   )    .


**4.   :**

*   ,         .
*     :   ( ) ,       .
*      ,    .
*       .       .


**5.  :**

*        .         .
*        ,   .
*         ,   .    !
*   !    ,   4-8   .


,    ! ,    ,       ,       .        -  !

2025-04-20 09:25:47,943 - app - INFO -   
2025-04-20 09:26:09,314 - app - INFO -    Redis
2025-04-20 09:26:09,319 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:26:09,359 - app - INFO -   
2025-04-20 09:26:09,404 - app - INFO -   
2025-04-20 09:26:13,379 - app - INFO -    Redis
2025-04-20 09:26:13,384 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:26:17,790 - root - INFO - Received message:   
2025-04-20 09:26:18,840 - root - INFO - Detected language: ru
2025-04-20 09:26:18,841 - root - INFO - Detected category: acne, skin type: None
2025-04-20 09:26:18,842 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:26:26,669 - root - INFO - Received recommendations from Gemini: !  ,         .   ,     !

1. **  :**

   * ** :**   ,        (  -  , , ),     (, ).          ,       .
   * **:**     ,    -   ,    .       ,  ,      .     ,  , , .


2. ** :**

   * **  (BHA):**    ,   ,       .      ,   .
   * ** ( B3):**   ,    ,  ,       .      ,    .
   * ** :**     (  -     ) ,     ,  .     .


3. ** :**

   * ** :**
      1.  ,    .
      2.     SPF 30   (    !).
   * ** :**
      1.  (  ).
      2.    .
      3. 1-2             (    ).
      4.   .
   * ** :**
      1.    (  - 1-2   )   ,  !
      2.    (    )  1     -.


4. **  :**

   *      ""  "  ".
   *     :  ,   (, )  ,    .
   *        ,    .
   *   ,      ().


5. ** :**

   *     ,    .
   *          .
   *           ,   .       , ,     .
   *          .     , ,        .


,    !  ,       ,    .     ,     ( !).  !

2025-04-20 09:28:11,877 - app - INFO -    Redis
2025-04-20 09:28:11,880 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:28:21,731 - app - INFO -   
2025-04-20 09:28:32,550 - app - INFO -    Redis
2025-04-20 09:28:32,552 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:28:32,568 - root - INFO - Received message:    
2025-04-20 09:28:33,453 - root - INFO - Detected language: uk
2025-04-20 09:28:33,454 - root - INFO - Detected category: hydration, skin type: dry
2025-04-20 09:28:33,455 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:28:40,626 - root - INFO - Received recommendations from Gemini: Hey there!  So you're dealing with dry skin and hydration concerns?  Let's get you sorted with a skincare plan that'll leave your skin feeling happy and healthy.

### Skin Analysis: Dry Skin Decoded

Dry skin is characterized by a lack of oil (sebum) production. This leads to a rough, flaky texture, tightness, especially after washing, and a tendency to be sensitive and prone to irritation.  The main concern, in your case, is dehydration   your skin isn't getting enough moisture, which is different from a lack of oil.  This can be caused by several things: harsh soaps, environmental factors like cold weather or low humidity, aging, or even certain medications.

### Key Ingredients for Happy, Hydrated Skin

To combat dryness and dehydration, we'll focus on these superstars:

* **Hyaluronic Acid:** This is a humectant, meaning it draws moisture from the air *into* your skin. Think of it as a sponge for your face!  It's amazing at plumping up the skin and reducing the appearance of fine lines.  It's generally well-tolerated by most skin types.

* **Ceramides:** These are lipids naturally found in your skin that help form a protective barrier, preventing moisture loss.  Boosting ceramide levels helps lock in hydration and improve the overall health of your skin's barrier function.

* **Glycerin:** Another humectant, glycerin attracts and retains moisture, contributing to a more supple and hydrated complexion.  It's gentle and effective for even the most sensitive dry skin.


### Your Personalized Care Plan:  A Simple, Effective Routine

**Morning Routine:**

1. **Gentle Cleanser:** Use a creamy, hydrating cleanser to avoid stripping your skin's natural oils. Avoid foaming cleansers, which tend to be more drying.
2. **Hyaluronic Acid Serum:** Apply a few drops of hyaluronic acid serum to damp skin. This helps it draw in more moisture.
3. **Moisturizer:**  Follow with a rich, creamy moisturizer containing ceramides or glycerin.
4. **Sunscreen (SPF 30 or higher):**  Essential to protect your skin from sun damage, which can worsen dryness and accelerate aging.


**Evening Routine:**

1. **Gentle Cleanser:** Same as morning.
2. **Treatment Serum (optional):**  A couple of times a week, you can incorporate a serum with a gentle exfoliant like lactic acid (alpha hydroxy acid) to gently remove dead skin cells and improve hydration.  Start slowly and patch test first!
3. **Moisturizer:** Apply a thicker night cream or moisturizer, focusing on areas that are particularly dry.  A hydrating face oil can be layered on top for extra nourishment.


**Weekly Treatments:**

1. **Hydrating Mask:** Once or twice a week, use a hydrating sheet mask or a creamy hydrating mask to give your skin an extra moisture boost.


### Product Recommendations: Finding Your Perfect Match

When choosing products, look for:

* **"Hydrating," "Moisturizing," or "For Dry Skin" labels.**
* **Ingredients like hyaluronic acid, ceramides, glycerin, and other humectants.**
* **Avoid products containing alcohol, fragrances, and sulfates, as these can be drying.**
* **Start with one new product at a time to monitor your skin's reaction.**


### Important Warnings & Precautions

* **Patch Test:** Always patch test any new product on a small area of skin before applying it to your whole face. This helps identify potential allergies or irritations.
* **Sun Sensitivity:** Some active ingredients, like AHAs, can make your skin more sensitive to the sun.  Always use sunscreen during the day when using these.
* **Listen to Your Skin:** If you experience any significant irritation, redness, or burning, discontinue use and consult a dermatologist.
* **Consistency is Key:**  Be patient and consistent with your routine to see the best results. It can take several weeks to notice a significant improvement.


Remember, this is a general guideline.  If you have persistent concerns or severe dry skin, it's always best to consult a dermatologist for personalized advice. They can help identify underlying issues and recommend specific treatments if needed.  Good luck, and happy hydrating!

2025-04-20 09:30:17,499 - app - INFO -    Redis
2025-04-20 09:30:17,501 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:31:00,958 - app - INFO -   
2025-04-20 09:31:07,176 - app - INFO -    Redis
2025-04-20 09:31:07,177 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:31:08,970 - root - INFO - Received message:   
2025-04-20 09:31:09,387 - root - INFO - Detected language: ru
2025-04-20 09:31:09,388 - root - INFO - Detected category: acne, skin type: None
2025-04-20 09:31:09,388 - root - INFO - Sending recommendations prompt to Gemini
2025-04-20 09:31:17,157 - root - INFO - Received recommendations from Gemini: !  ,       .

**1.   **

* **  :**       - (, , )     ,      .   ,     ,             .        -.

* **    :**  ()     -   ,    .           -.        (  ),  ,    .


<br>

**2.  **

* **  (BHA):**    ,  ,       .      .

* ** ( B3):**   ,  ,    ,        .      ,     .

* ** :**       ,   ,    .


<br>

**3.  **

* ** :**
    *       .    ,    .
    *     SPF 30           .

* ** :**
    *  :          ,       .
    *       ( ,   ).
    *  ,    .           .

* ** :**
    * 1-2        (,     ).     .
    * 1        -.


<br>

**4.   **

* **   :**   ,   "  ", "  ", "" (  ).

* **     :**  !     (, ), ,    .     .       ,    .


<br>

**5.  **

* ** :**        .     .    !        .

* ** :**      ,         .           .


,     .   ,    !     ,           .

2025-04-20 09:33:01,800 - app - INFO -    Redis
2025-04-20 09:33:01,801 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:33:11,931 - app - INFO -    Redis
2025-04-20 09:33:11,933 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:34:57,203 - app - INFO -   
2025-04-20 09:38:47,141 - app - INFO -    Redis
2025-04-20 09:38:47,142 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:39:00,651 - app - INFO -   
2025-04-20 09:39:04,963 - app - INFO -    Redis
2025-04-20 09:39:04,965 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:39:52,397 - root - INFO - Received message:   
2025-04-20 09:39:52,964 - root - INFO - Detected language: ru
2025-04-20 09:39:52,965 - root - ERROR - Error generating response: Unknown field for GenerationConfig: function_call
2025-04-20 09:39:52,966 - root - ERROR - Error processing request: 500:     . ,   .
2025-04-20 09:40:58,375 - app - INFO -    Redis
2025-04-20 09:40:58,379 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:41:08,121 - app - INFO -    Redis
2025-04-20 09:41:08,124 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:41:43,827 - app - INFO -    Redis
2025-04-20 09:41:43,829 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:42:10,712 - app - INFO -   
2025-04-20 09:42:17,399 - root - INFO - Received message:   
2025-04-20 09:42:18,099 - root - INFO - Detected language: ru
2025-04-20 09:42:18,100 - app - WARNING - Attempt 1 failed: Unknown field for GenerationConfig: function_call
2025-04-20 09:42:18,101 - app - WARNING - Attempt 2 failed: Unknown field for GenerationConfig: function_call
2025-04-20 09:42:18,102 - app - ERROR - Error generating response: Unknown field for GenerationConfig: function_call
2025-04-20 09:42:18,103 - app - ERROR - Error processing request: 500:     . ,   .
2025-04-20 09:43:55,528 - app - INFO -    Redis
2025-04-20 09:43:55,533 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:44:01,220 - app - INFO -    Redis
2025-04-20 09:44:01,225 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:44:01,245 - app - INFO -   
2025-04-20 09:44:09,144 - app - INFO - Starting chat request processing
2025-04-20 09:44:09,145 - app - INFO - Received message: '  ', session_id: 717ba571-6015-416d-bbf9-77bf5b2d994b
2025-04-20 09:44:10,172 - app - INFO - Detected language: ru
2025-04-20 09:44:10,173 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 09:44:10,174 - app - ERROR - Error on attempt 1: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 09:44:10,175 - app - INFO - Attempt 2/3 to get response from Gemini
2025-04-20 09:44:10,176 - app - ERROR - Error on attempt 2: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 09:44:10,177 - app - INFO - Attempt 3/3 to get response from Gemini
2025-04-20 09:44:10,179 - app - ERROR - Error on attempt 3: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 09:44:10,180 - app - ERROR - Error in Gemini API interaction: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 09:44:10,181 - app - ERROR - Returning error to user:     . ,   .
2025-04-20 09:44:10,182 - app - ERROR - Unexpected error in chat endpoint: 500:     . ,   .
Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 458, in chat
    response = model.generate_content(
        prompts,
    ...<3 lines>...
        }
    )
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\generativeai\generative_models.py", line 305, in generate_content
    request = self._prepare_request(
        contents=contents,
    ...<3 lines>...
        tool_config=tool_config,
    )
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\generativeai\generative_models.py", line 154, in _prepare_request
    contents = content_types.to_contents(contents)
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\generativeai\types\content_types.py", line 326, in to_contents
    contents = [strict_to_content(c) for c in contents]
                ~~~~~~~~~~~~~~~~~^^^
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\generativeai\types\content_types.py", line 304, in strict_to_content
    content = _convert_dict(content)
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\generativeai\types\content_types.py", line 176, in _convert_dict
    raise KeyError(
    ...<5 lines>...
    )
KeyError: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 528, in chat
    raise HTTPException(
    ...<2 lines>...
    )
fastapi.exceptions.HTTPException: 500:     . ,   .
2025-04-20 09:45:49,098 - app - INFO -    Redis
2025-04-20 09:45:49,099 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:47:02,143 - app - INFO -   
2025-04-20 09:47:06,159 - app - INFO -    Redis
2025-04-20 09:47:06,167 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:47:10,796 - app - INFO -    Redis
2025-04-20 09:47:10,797 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:47:10,805 - app - INFO - Starting chat request processing
2025-04-20 09:47:10,806 - app - INFO - Received message: '  ', session_id: c99d552b-2cd6-4c3f-bb37-5d101a2cbf4a
2025-04-20 09:47:11,257 - app - INFO - Detected language: ru
2025-04-20 09:47:11,258 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 09:47:11,979 - app - ERROR - Error on attempt 1: 400 Content with system role is not supported.
2025-04-20 09:47:11,979 - app - INFO - Attempt 2/3 to get response from Gemini
2025-04-20 09:47:12,798 - app - ERROR - Error on attempt 2: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:47:12,798 - app - INFO - Attempt 3/3 to get response from Gemini
2025-04-20 09:47:13,203 - app - ERROR - Error on attempt 3: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:47:13,204 - app - ERROR - Error in Gemini API interaction: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:47:13,204 - app - ERROR - Returning error to user:     . ,   .
2025-04-20 09:47:13,205 - app - ERROR - Unexpected error in chat endpoint: 500:     . ,   .
Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 523, in chat
    response = model.generate_content(
        prompt,
    ...<5 lines>...
        }
    )
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\generativeai\generative_models.py", line 331, in generate_content
    response = self._client.generate_content(
        request,
        **request_options,
    )
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\ai\generativelanguage_v1beta\services\generative_service\client.py", line 835, in generate_content
    response = rpc(
        request,
    ...<2 lines>...
        metadata=metadata,
    )
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\api_core\gapic_v1\method.py", line 131, in __call__
    return wrapped_func(*args, **kwargs)
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 293, in retry_wrapped_func
    return retry_target(
        target,
    ...<3 lines>...
        on_error=on_error,
    )
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 153, in retry_target
    _retry_error_helper(
    ~~~~~~~~~~~~~~~~~~~^
        exc,
        ^^^^
    ...<6 lines>...
        timeout,
        ^^^^^^^^
    )
    ^
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\api_core\retry\retry_base.py", line 212, in _retry_error_helper
    raise final_exc from source_exc
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\api_core\retry\retry_unary.py", line 144, in retry_target
    result = target()
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\api_core\timeout.py", line 130, in func_with_timeout
    return func(*args, **kwargs)
  File "c:\Users\AnnBer\XCare Ai\venv\Lib\site-packages\google\api_core\grpc_helpers.py", line 78, in error_remapped_callable
    raise exceptions.from_grpc_error(exc) from exc
google.api_core.exceptions.InvalidArgument: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\AnnBer\XCare Ai\app.py", line 593, in chat
    raise HTTPException(status_code=500, detail=error_msg)
fastapi.exceptions.HTTPException: 500:     . ,   .
2025-04-20 09:48:24,739 - app - INFO -    Redis
2025-04-20 09:48:24,742 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:49:02,047 - app - INFO -    Redis
2025-04-20 09:49:02,048 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:49:02,058 - app - INFO -   
2025-04-20 09:49:08,982 - app - INFO - Starting chat request processing
2025-04-20 09:49:08,983 - app - INFO - Received message: '  ', session_id: e14a9316-99a6-46e9-8b2a-0bb43498b882
2025-04-20 09:49:09,299 - app - INFO - Detected language: uk
2025-04-20 09:49:09,300 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 09:49:10,823 - app - ERROR - Error on attempt 1: 400 Content with system role is not supported.
2025-04-20 09:49:10,824 - app - INFO - Attempt 2/3 to get response from Gemini
2025-04-20 09:49:11,179 - app - ERROR - Error on attempt 2: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:49:11,179 - app - INFO - Attempt 3/3 to get response from Gemini
2025-04-20 09:49:12,046 - app - ERROR - Error on attempt 3: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:49:12,047 - app - ERROR - Error generating response: Failed to get valid response after 3 attempts: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:49:37,175 - app - INFO -   
2025-04-20 09:49:41,864 - app - INFO -    Redis
2025-04-20 09:49:41,866 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:49:41,873 - app - INFO - Starting chat request processing
2025-04-20 09:49:41,873 - app - INFO - Received message: '', session_id: be4ac8ce-63a9-4e0d-adcb-7fccfab3c0df
2025-04-20 09:49:42,237 - app - INFO - Detected language: mk
2025-04-20 09:49:42,238 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 09:49:42,951 - app - ERROR - Error on attempt 1: 400 Content with system role is not supported.
2025-04-20 09:49:42,951 - app - INFO - Attempt 2/3 to get response from Gemini
2025-04-20 09:49:43,765 - app - ERROR - Error on attempt 2: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:49:43,766 - app - INFO - Attempt 3/3 to get response from Gemini
2025-04-20 09:49:44,199 - app - ERROR - Error on attempt 3: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:49:44,199 - app - ERROR - Error generating response: Failed to get valid response after 3 attempts: 400 Unable to submit request because a request can only contain one System role content with one text part. Learn more: https://cloud.google.com/vertex-ai/generative-ai/docs/model-reference/gemini
2025-04-20 09:51:45,860 - app - INFO -    Redis
2025-04-20 09:51:45,863 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:51:54,481 - app - INFO -   
2025-04-20 09:52:00,986 - app - INFO -    Redis
2025-04-20 09:52:00,988 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:52:00,997 - app - INFO - Starting chat request processing
2025-04-20 09:52:00,997 - app - INFO - Received message: '', session_id: be4ac8ce-63a9-4e0d-adcb-7fccfab3c0df
2025-04-20 09:52:01,562 - app - INFO - Detected language: mk
2025-04-20 09:52:01,562 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 09:52:01,564 - app - ERROR - Error on attempt 1: Unknown field for GenerationConfig: function_call
2025-04-20 09:52:01,564 - app - INFO - Attempt 2/3 to get response from Gemini
2025-04-20 09:52:01,565 - app - ERROR - Error on attempt 2: Unknown field for GenerationConfig: function_call
2025-04-20 09:52:01,565 - app - INFO - Attempt 3/3 to get response from Gemini
2025-04-20 09:52:01,566 - app - ERROR - Error on attempt 3: Unknown field for GenerationConfig: function_call
2025-04-20 09:52:01,566 - app - ERROR - Error generating response: Failed to get valid response after 3 attempts: Unknown field for GenerationConfig: function_call
2025-04-20 09:52:31,478 - app - INFO -    Redis
2025-04-20 09:52:31,481 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:52:57,267 - app - INFO -   
2025-04-20 09:53:01,375 - app - INFO -    Redis
2025-04-20 09:53:01,378 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:53:01,543 - app - INFO - Starting chat request processing
2025-04-20 09:53:01,544 - app - INFO - Received message: '', session_id: 46e279bc-6a14-4856-a3b8-52271556d18a
2025-04-20 09:53:01,959 - app - INFO - Detected language: ru
2025-04-20 09:53:01,960 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 09:53:01,961 - app - ERROR - Error on attempt 1: Unknown field for GenerationConfig: function_call
2025-04-20 09:53:01,962 - app - INFO - Attempt 2/3 to get response from Gemini
2025-04-20 09:53:01,962 - app - ERROR - Error on attempt 2: Unknown field for GenerationConfig: function_call
2025-04-20 09:53:01,963 - app - INFO - Attempt 3/3 to get response from Gemini
2025-04-20 09:53:01,963 - app - ERROR - Error on attempt 3: Unknown field for GenerationConfig: function_call
2025-04-20 09:53:01,964 - app - ERROR - Error generating response: Failed to get valid response after 3 attempts: Unknown field for GenerationConfig: function_call
2025-04-20 09:54:17,834 - app - INFO -    Redis
2025-04-20 09:54:17,837 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:54:37,055 - app - INFO -   
2025-04-20 09:54:43,098 - app - INFO - Starting chat request processing
2025-04-20 09:54:43,100 - app - INFO - Received message: '', session_id: 2a3dde42-b7f5-4aea-a436-daf9fc2c427a
2025-04-20 09:54:43,191 - app - INFO - Detected language: mk
2025-04-20 09:54:43,192 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 09:54:43,194 - app - ERROR - Error on attempt 1: Unknown field for GenerationConfig: function_call
2025-04-20 09:54:43,195 - app - INFO - Attempt 2/3 to get response from Gemini
2025-04-20 09:54:43,197 - app - ERROR - Error on attempt 2: Unknown field for GenerationConfig: function_call
2025-04-20 09:54:43,198 - app - INFO - Attempt 3/3 to get response from Gemini
2025-04-20 09:54:43,200 - app - ERROR - Error on attempt 3: Unknown field for GenerationConfig: function_call
2025-04-20 09:54:43,201 - app - ERROR - Error generating response: Failed to get valid response after 3 attempts: Unknown field for GenerationConfig: function_call
2025-04-20 09:54:43,360 - app - INFO -    Redis
2025-04-20 09:54:43,363 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:54:55,657 - app - INFO -    Redis
2025-04-20 09:54:55,660 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:57:01,493 - app - INFO -    Redis
2025-04-20 09:57:01,495 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:58:05,542 - app - INFO -    Redis
2025-04-20 09:58:05,544 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:58:55,400 - app - INFO -   
2025-04-20 09:58:59,289 - app - INFO -    Redis
2025-04-20 09:58:59,291 - app - INFO -  gemini-1.5-flash  
2025-04-20 09:59:00,009 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 09:59:28,024 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:00:50,805 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:01:41,434 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:02:23,660 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:02:56,492 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:03:01,834 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:05:11,749 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:33:52,059 - app - INFO -   
2025-04-20 10:37:21,672 - app - INFO -   
2025-04-20 10:40:14,314 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:44:05,174 - app - INFO -   
2025-04-20 10:44:11,828 - app - INFO -    Redis
2025-04-20 10:44:11,830 - app - INFO -  gemini-1.5-flash  
2025-04-20 10:44:15,076 - app - INFO -   
2025-04-20 10:45:14,093 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:46:26,698 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:47:18,878 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:53:29,238 - app - INFO -   
2025-04-20 10:53:34,220 - app - INFO -    Redis
2025-04-20 10:53:34,222 - app - INFO -  gemini-1.5-flash  
2025-04-20 10:53:34,223 - app - ERROR - Error loading products dataset: [Errno 2] No such file or directory: 'products_dataset_complete.json'
2025-04-20 10:53:34,229 - app - INFO -   
2025-04-20 10:53:56,794 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:54:17,845 - app - INFO -   
2025-04-20 10:54:19,267 - app - INFO -   
2025-04-20 10:56:00,487 - app - INFO -   
2025-04-20 10:56:01,915 - app - INFO -    Redis
2025-04-20 10:56:01,917 - app - INFO -  gemini-1.5-flash  
2025-04-20 10:56:01,921 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 10:56:07,138 - app - INFO -    Redis
2025-04-20 10:56:07,141 - app - INFO -  gemini-1.5-flash  
2025-04-20 10:56:07,146 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 10:56:24,724 - app - INFO -   
2025-04-20 10:56:26,261 - app - INFO -   
2025-04-20 10:56:29,356 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:56:38,440 - app - INFO -    Redis
2025-04-20 10:56:38,442 - app - INFO -  gemini-1.5-flash  
2025-04-20 10:56:38,446 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 10:56:44,917 - app - INFO -    Redis
2025-04-20 10:56:44,919 - app - INFO -  gemini-1.5-flash  
2025-04-20 10:56:44,924 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 10:57:46,657 - app - INFO -    Redis
2025-04-20 10:57:46,659 - app - INFO -  gemini-1.5-flash  
2025-04-20 10:57:46,662 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 10:58:00,725 - app - INFO -   
2025-04-20 10:58:28,929 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 10:59:45,425 - app - INFO - Searching products with context: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne', 'acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True, 'questions_asked': set()}
2025-04-20 10:59:45,426 - app - INFO - Searching products for skin_type: combination, concerns: ['acne', 'acne']
2025-04-20 10:59:45,428 - app - INFO - Found 0 suitable products
2025-04-20 11:00:34,563 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:01:12,478 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:01:29,636 - app - INFO - Searching products with context: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne', 'acne', 'acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True, 'questions_asked': set()}
2025-04-20 11:01:29,637 - app - INFO - Searching products for skin_type: combination, concerns: ['acne', 'acne', 'acne']
2025-04-20 11:01:29,637 - app - INFO - Found 0 suitable products
2025-04-20 11:07:05,404 - app - INFO -    Redis
2025-04-20 11:07:05,406 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:07:05,414 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:07:29,143 - app - INFO -   
2025-04-20 11:07:35,897 - app - INFO -    Redis
2025-04-20 11:07:35,899 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:07:35,904 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:07:50,598 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:08:08,217 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:08:29,858 - app - INFO -   
2025-04-20 11:08:35,696 - app - INFO -    Redis
2025-04-20 11:08:35,698 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:08:35,703 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:08:46,210 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:09:00,322 - app - INFO -    Redis
2025-04-20 11:09:00,324 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:09:00,327 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:09:12,047 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:16:33,937 - app - INFO - Searching products with context: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True, 'questions_asked': set()}
2025-04-20 11:16:33,938 - app - INFO - Searching products for skin_type: combination, concerns: ['acne']
2025-04-20 11:16:33,939 - app - INFO - Looking for products with ingredients: {'niacinamide', 'salicylic acid', 'tea tree oil', 'benzoyl peroxide'}
2025-04-20 11:16:33,945 - app - INFO - Found 3 suitable products
2025-04-20 11:19:13,412 - app - INFO -    Redis
2025-04-20 11:19:13,414 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:19:13,418 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:19:17,353 - app - INFO -    Redis
2025-04-20 11:19:17,355 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:19:17,360 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:19:59,475 - app - INFO -   
2025-04-20 11:20:53,997 - app - INFO - User agreed to product search. Context: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True, 'questions_asked': set()}
2025-04-20 11:20:53,998 - app - INFO - Searching products for skin_type: combination, concerns: ['acne']
2025-04-20 11:20:53,999 - app - INFO - Looking for products with ingredients: {'niacinamide', 'tea tree oil', 'salicylic acid', 'benzoyl peroxide'}
2025-04-20 11:20:54,007 - app - INFO - Found 3 suitable products
2025-04-20 11:21:08,515 - app - INFO -   
2025-04-20 11:21:28,226 - app - INFO -    Redis
2025-04-20 11:21:28,231 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:21:28,239 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:21:44,883 - app - INFO - User agreed to product search. Context: {'skin_type': 'dry', 'age': 30, 'concerns': ['acne', 'acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True, 'questions_asked': set()}
2025-04-20 11:21:44,885 - app - INFO - Searching products for skin_type: dry, concerns: ['acne', 'acne']
2025-04-20 11:21:44,885 - app - INFO - Looking for products with ingredients: {'niacinamide', 'tea tree oil', 'salicylic acid', 'benzoyl peroxide'}
2025-04-20 11:21:44,894 - app - INFO - Found 3 suitable products
2025-04-20 11:21:53,964 - app - INFO -    Redis
2025-04-20 11:21:53,967 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:21:53,975 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:22:58,500 - app - INFO -    Redis
2025-04-20 11:22:58,503 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:22:58,509 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:23:17,762 - app - INFO -   
2025-04-20 11:23:22,009 - app - INFO -    Redis
2025-04-20 11:23:22,011 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:23:22,016 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:23:24,029 - app - INFO -   
2025-04-20 11:23:39,172 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:24:06,102 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:25:39,056 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:31:07,592 - app - INFO -    Redis
2025-04-20 11:31:07,593 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:31:07,595 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:31:09,976 - app - INFO -   
2025-04-20 11:31:15,705 - app - INFO -    Redis
2025-04-20 11:31:15,707 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:31:15,711 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:31:24,022 - app - INFO - Updated context: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:31:24,022 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:31:35,627 - app - INFO - Updated context: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:31:35,628 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:32:07,837 - app - INFO - Updated context: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:32:07,838 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:36:12,217 - app - INFO -    Redis
2025-04-20 11:36:12,219 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:36:12,222 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:36:18,697 - app - INFO -    Redis
2025-04-20 11:36:18,699 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:36:18,704 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:36:29,085 - app - INFO -   
2025-04-20 11:37:30,953 - app - INFO -   
2025-04-20 11:37:41,217 - app - INFO - Updated context: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:37:41,218 - app - INFO - Updated context after message: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:37:41,219 - app - INFO - Detected agreement to search products. Context state: {'skin_type': 'combination', 'age': 30, 'concerns': ['acne'], 'allergies': True, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:37:41,220 - app - INFO - Has basic info, searching products...
2025-04-20 11:37:41,221 - app - INFO - Searching products for skin_type: combination, concerns: ['acne']
2025-04-20 11:37:41,222 - app - INFO - Looking for products with ingredients: {'benzoyl peroxide', 'salicylic acid', 'niacinamide', 'tea tree oil'}
2025-04-20 11:37:41,233 - app - INFO - Found 3 suitable products
2025-04-20 11:37:41,234 - app - INFO - Found 3 products and 3 ingredients
2025-04-20 11:39:59,744 - app - INFO -    Redis
2025-04-20 11:39:59,745 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:39:59,749 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:40:29,450 - app - INFO -   
2025-04-20 11:40:41,405 - app - INFO -    Redis
2025-04-20 11:40:41,408 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:40:41,418 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:40:52,563 - app - INFO -    Redis
2025-04-20 11:40:52,566 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:40:52,576 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:41:04,652 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:41:04,655 - app - INFO - Updated context after message: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:41:04,656 - app - INFO - Detected agreement to search products. Context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:41:04,657 - app - INFO - Has basic info, searching products...
2025-04-20 11:41:04,658 - app - INFO - Searching products for skin_type: dry, concerns: ['acne', 'dry_skin']
2025-04-20 11:41:04,658 - app - INFO - Looking for products with ingredients: {'ceramides', 'niacinamide', 'salicylic acid', 'squalane', 'glycerin', 'hyaluronic acid', 'tea tree oil', 'benzoyl peroxide'}
2025-04-20 11:41:04,673 - app - INFO - Found 3 suitable products
2025-04-20 11:41:04,674 - app - INFO - Found 3 products and 6 ingredients
2025-04-20 11:41:10,025 - app - INFO -    Redis
2025-04-20 11:41:10,026 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:41:10,030 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:43:00,002 - app - INFO -   
2025-04-20 11:43:01,354 - app - INFO -    Redis
2025-04-20 11:43:01,358 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:43:01,372 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:43:15,099 - app - INFO - Updated context: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:43:15,100 - app - INFO - Updated context after message: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:43:15,100 - app - INFO - Generating regular response through Gemini
2025-04-20 11:43:15,101 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:43:32,190 - app - INFO -    Redis
2025-04-20 11:43:32,192 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:43:32,198 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:43:41,316 - app - INFO - Received chat request
2025-04-20 11:43:41,317 - app - INFO - Processing message: 'yes find me products', session_id: 1f9b1e66-cda0-454a-a508-cea2d448d550
2025-04-20 11:43:41,318 - app - INFO - Creating new context for session 1f9b1e66-cda0-454a-a508-cea2d448d550
2025-04-20 11:43:42,250 - app - INFO - Detected language: en
2025-04-20 11:43:42,252 - app - INFO - Updated context: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:43:42,253 - app - INFO - Updated context: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:43:42,254 - app - INFO - Is agreement message: True
2025-04-20 11:43:42,255 - app - INFO - Processing agreement to search products. Context state: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:43:42,255 - app - INFO - Missing info: ['skin type (dry/oily/combination/sensitive/normal)', 'skin concerns (acne/wrinkles/pigmentation/etc.) or age']
2025-04-20 11:44:07,645 - app - INFO - Received chat request
2025-04-20 11:44:07,646 - app - INFO - Processing message: 'dry acne 30  years', session_id: 1f9b1e66-cda0-454a-a508-cea2d448d550
2025-04-20 11:44:07,657 - app - INFO - Detected language: en
2025-04-20 11:44:07,658 - app - INFO - Updated context: {'skin_type': 'dry', 'age': 30, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:44:07,659 - app - INFO - Updated context: {'skin_type': 'dry', 'age': 30, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:44:07,660 - app - INFO - Is agreement message: True
2025-04-20 11:44:07,660 - app - INFO - Processing agreement to search products. Context state: {'skin_type': 'dry', 'age': 30, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:44:07,661 - app - INFO - Has basic info, searching products...
2025-04-20 11:44:07,662 - app - INFO - Searching products for skin_type: dry, concerns: ['acne']
2025-04-20 11:44:07,663 - app - INFO - Looking for products with ingredients: {'benzoyl peroxide', 'salicylic acid', 'niacinamide', 'tea tree oil'}
2025-04-20 11:44:07,672 - app - INFO - Found 3 suitable products
2025-04-20 11:44:07,673 - app - INFO - Found 3 products and 3 ingredients
2025-04-20 11:47:18,851 - app - INFO -    Redis
2025-04-20 11:47:18,852 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:47:18,855 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:47:42,931 - app - INFO -    Redis
2025-04-20 11:47:42,933 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:47:42,937 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:49:35,907 - app - INFO -   
2025-04-20 11:49:48,501 - app - INFO - Received chat request
2025-04-20 11:49:48,502 - app - INFO - Processing message: 'i have acne', session_id: 83d22aec-0ffc-4d8f-9cac-723adf1c4206
2025-04-20 11:49:48,502 - app - INFO - Creating new context for session 83d22aec-0ffc-4d8f-9cac-723adf1c4206
2025-04-20 11:49:48,981 - app - INFO - Detected language: da
2025-04-20 11:49:48,981 - app - INFO - Updating context from message: i have acne
2025-04-20 11:49:48,981 - app - INFO - Added concern: acne
2025-04-20 11:49:48,982 - app - INFO - Updated context state: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:49:48,982 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:49:48,983 - app - INFO - Is agreement message: False
2025-04-20 11:49:48,983 - app - INFO - Generating regular response through Gemini
2025-04-20 11:49:48,983 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:50:02,026 - app - INFO - Received chat request
2025-04-20 11:50:02,027 - app - INFO - Processing message: 'yes find me products', session_id: 83d22aec-0ffc-4d8f-9cac-723adf1c4206
2025-04-20 11:50:02,043 - app - INFO - Detected language: en
2025-04-20 11:50:02,044 - app - INFO - Updating context from message: yes find me products
2025-04-20 11:50:02,044 - app - INFO - Updated context state: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:50:02,045 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:50:02,046 - app - INFO - Is agreement message: True
2025-04-20 11:50:02,046 - app - INFO - Processing product search request. Context state: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 11:50:02,047 - app - INFO - Missing info: ['skin type (dry/oily/combination/sensitive/normal)']
2025-04-20 11:50:10,566 - app - INFO - Received chat request
2025-04-20 11:50:10,567 - app - INFO - Processing message: 'dry acne 30 years', session_id: 83d22aec-0ffc-4d8f-9cac-723adf1c4206
2025-04-20 11:50:10,580 - app - INFO - Detected language: en
2025-04-20 11:50:10,581 - app - INFO - Updating context from message: dry acne 30 years
2025-04-20 11:50:10,581 - app - INFO - Found skin type: dry
2025-04-20 11:50:10,582 - app - INFO - Added concern: acne
2025-04-20 11:50:10,582 - app - INFO - Found age: 30
2025-04-20 11:50:10,583 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': 30, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:50:10,583 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': 'dry', 'age': 30, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:50:10,584 - app - INFO - Is agreement message: True
2025-04-20 11:50:10,584 - app - INFO - Processing product search request. Context state: {'skin_type': 'dry', 'age': 30, 'concerns': ['acne'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:50:10,585 - app - INFO - Has basic info, searching products...
2025-04-20 11:50:10,585 - app - INFO - Searching products for skin_type: dry, concerns: ['acne']
2025-04-20 11:50:10,586 - app - INFO - Looking for products with ingredients: {'benzoyl peroxide', 'salicylic acid', 'tea tree oil', 'niacinamide'}
2025-04-20 11:50:10,593 - app - INFO - Found 3 suitable products
2025-04-20 11:50:10,594 - app - INFO - Found 3 products and 3 ingredients
2025-04-20 11:50:41,964 - app - INFO -   
2025-04-20 11:50:42,007 - app - INFO -    Redis
2025-04-20 11:50:42,011 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:50:42,029 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:50:49,470 - app - INFO -    Redis
2025-04-20 11:50:49,472 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:50:49,476 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:50:59,504 - app - INFO - Received chat request
2025-04-20 11:50:59,504 - app - INFO - Processing message: 'i have acne and dry skin', session_id: e01e9d2a-b1da-45a2-8540-5273acd5b3bd
2025-04-20 11:50:59,505 - app - INFO - Creating new context for session e01e9d2a-b1da-45a2-8540-5273acd5b3bd
2025-04-20 11:51:00,085 - app - INFO - Detected language: da
2025-04-20 11:51:00,085 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 11:51:00,086 - app - INFO - Found skin type: dry
2025-04-20 11:51:00,086 - app - INFO - Added concern: acne
2025-04-20 11:51:00,087 - app - INFO - Added concern: dry_skin
2025-04-20 11:51:00,087 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:51:00,088 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:51:00,088 - app - INFO - Is agreement message: False
2025-04-20 11:51:00,089 - app - INFO - Processing product search request. Context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:51:00,089 - app - INFO - Has basic info, searching products...
2025-04-20 11:51:00,089 - app - INFO - Searching products for skin_type: dry, concerns: ['acne', 'dry_skin']
2025-04-20 11:51:00,090 - app - INFO - Looking for products with ingredients: {'niacinamide', 'hyaluronic acid', 'squalane', 'benzoyl peroxide', 'tea tree oil', 'glycerin', 'salicylic acid', 'ceramides'}
2025-04-20 11:51:00,100 - app - INFO - Found 3 suitable products
2025-04-20 11:51:00,101 - app - INFO - Found 3 products and 6 ingredients
2025-04-20 11:52:51,728 - app - INFO -    Redis
2025-04-20 11:52:51,730 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:52:51,734 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:53:15,136 - app - INFO -   
2025-04-20 11:53:20,259 - app - INFO -    Redis
2025-04-20 11:53:20,261 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:53:20,266 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:53:23,085 - app - INFO - Received chat request
2025-04-20 11:53:23,086 - app - INFO - Processing message: 'i have acne and dry skin', session_id: 07c88155-379b-431b-9679-07b2eebc2484
2025-04-20 11:53:23,086 - app - INFO - Creating new context for session 07c88155-379b-431b-9679-07b2eebc2484
2025-04-20 11:53:23,496 - app - INFO - Detected language: da
2025-04-20 11:53:23,496 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 11:53:23,497 - app - INFO - Found skin type: dry
2025-04-20 11:53:23,497 - app - INFO - Added concern: acne
2025-04-20 11:53:23,497 - app - INFO - Added concern: dry_skin
2025-04-20 11:53:23,498 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:53:23,499 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:53:23,499 - app - INFO - Is agreement message: False
2025-04-20 11:53:23,499 - app - INFO - Processing product search request. Context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:53:23,500 - app - INFO - Has basic info, searching products...
2025-04-20 11:53:23,500 - app - INFO - Searching with skin_type: dry, concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 11:53:23,500 - app - INFO - Searching products for skin_type: dry, concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 11:53:23,501 - app - INFO - Standardized concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 11:53:23,501 - app - INFO - Looking for products with ingredients: {'glycerin', 'benzoyl peroxide', 'squalane', 'hyaluronic acid', 'niacinamide', 'ceramides', 'tea tree oil', 'salicylic acid'}
2025-04-20 11:53:23,501 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,502 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,502 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,502 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,503 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,503 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,503 - app - INFO - Product None contains ingredients: ['glycerin', 'benzoyl peroxide', 'niacinamide']
2025-04-20 11:53:23,504 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,504 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,504 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,505 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,505 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,506 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:23,507 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,507 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,507 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,508 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,508 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,508 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,509 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,509 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,510 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,510 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,510 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,511 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,511 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,512 - app - INFO - Product None contains ingredients: ['glycerin', 'hyaluronic acid', 'niacinamide']
2025-04-20 11:53:23,512 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,512 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,513 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,513 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane', 'salicylic acid']
2025-04-20 11:53:23,513 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,514 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,514 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,514 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,515 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,515 - app - INFO - Product None contains ingredients: ['niacinamide']
2025-04-20 11:53:23,516 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,516 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,517 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,517 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide', 'salicylic acid']
2025-04-20 11:53:23,518 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,518 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,518 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,519 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,519 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,519 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,520 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,520 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,520 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,521 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,521 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,522 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane']
2025-04-20 11:53:23,523 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,523 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,524 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,524 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,524 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,524 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,525 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,525 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,525 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,526 - app - INFO - Product None contains ingredients: ['glycerin', 'hyaluronic acid']
2025-04-20 11:53:23,526 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,527 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,527 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,527 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:23,528 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,528 - app - INFO - Product None contains ingredients: ['glycerin', 'hyaluronic acid', 'niacinamide', 'salicylic acid']
2025-04-20 11:53:23,528 - app - INFO - Added product None with score 12
2025-04-20 11:53:23,528 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:23,529 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,529 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,529 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,530 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,530 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,530 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide', 'salicylic acid']
2025-04-20 11:53:23,531 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,531 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,531 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,532 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,532 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,533 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,533 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,534 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,534 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,534 - app - INFO - Product None contains ingredients: ['squalane']
2025-04-20 11:53:23,535 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,535 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,535 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,536 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,536 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,537 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,537 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,537 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,538 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,539 - app - INFO - Product None contains ingredients: ['glycerin', 'hyaluronic acid']
2025-04-20 11:53:23,539 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,540 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane']
2025-04-20 11:53:23,540 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,541 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane']
2025-04-20 11:53:23,541 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,541 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,542 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,542 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,543 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,543 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,543 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,544 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide', 'salicylic acid']
2025-04-20 11:53:23,544 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,544 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,545 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,545 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:23,546 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,546 - app - INFO - Product None contains ingredients: ['glycerin', 'hyaluronic acid', 'niacinamide', 'salicylic acid']
2025-04-20 11:53:23,546 - app - INFO - Added product None with score 12
2025-04-20 11:53:23,547 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:23,547 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,547 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane', 'salicylic acid']
2025-04-20 11:53:23,548 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,548 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:23,549 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,549 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide', 'salicylic acid']
2025-04-20 11:53:23,550 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,550 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane', 'niacinamide', 'salicylic acid']
2025-04-20 11:53:23,550 - app - INFO - Added product None with score 12
2025-04-20 11:53:23,551 - app - INFO - Product None contains ingredients: ['glycerin', 'benzoyl peroxide', 'salicylic acid']
2025-04-20 11:53:23,551 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,551 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide', 'salicylic acid']
2025-04-20 11:53:23,552 - app - INFO - Added product None with score 9
2025-04-20 11:53:23,552 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:23,553 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,553 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:23,553 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,554 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 11:53:23,554 - app - INFO - Added product None with score 6
2025-04-20 11:53:23,554 - app - INFO - Product None contains ingredients: ['niacinamide']
2025-04-20 11:53:23,555 - app - INFO - Added product None with score 3
2025-04-20 11:53:23,556 - app - INFO - Found 3 suitable products
2025-04-20 11:53:23,556 - app - INFO - Found 3 products and 6 ingredients
2025-04-20 11:53:33,412 - app - INFO -   
2025-04-20 11:53:37,310 - app - INFO -    Redis
2025-04-20 11:53:37,312 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:53:37,317 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:53:38,772 - app - INFO -    Redis
2025-04-20 11:53:38,774 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:53:38,779 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:53:38,787 - app - INFO - Received chat request
2025-04-20 11:53:38,787 - app - INFO - Processing message: 'i have acne and dry skin', session_id: 7fc91d4f-5ebc-497f-adaf-bd77d133c883
2025-04-20 11:53:38,788 - app - INFO - Creating new context for session 7fc91d4f-5ebc-497f-adaf-bd77d133c883
2025-04-20 11:53:39,307 - app - INFO - Detected language: da
2025-04-20 11:53:39,308 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 11:53:39,308 - app - INFO - Found skin type: dry
2025-04-20 11:53:39,309 - app - INFO - Added concern: acne
2025-04-20 11:53:39,309 - app - INFO - Added concern: dry_skin
2025-04-20 11:53:39,310 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:53:39,310 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:53:39,311 - app - INFO - Is agreement message: False
2025-04-20 11:53:39,311 - app - INFO - Processing product search request. Context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:53:39,312 - app - INFO - Has basic info, searching products...
2025-04-20 11:53:39,312 - app - INFO - Searching with skin_type: dry, concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 11:53:39,313 - app - INFO - Searching products for skin_type: dry, concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 11:53:39,313 - app - INFO - Standardized concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 11:53:39,313 - app - INFO - Looking for products with ingredients: {'squalane', 'hyaluronic acid', 'salicylic acid', 'glycerin', 'tea tree oil', 'niacinamide', 'ceramides', 'benzoyl peroxide'}
2025-04-20 11:53:39,314 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,314 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,315 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,315 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,316 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,316 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,317 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide', 'benzoyl peroxide']
2025-04-20 11:53:39,317 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,318 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,319 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,320 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,320 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,321 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:39,321 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,321 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,322 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,322 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,323 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,323 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,324 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,324 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,325 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,326 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,326 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,327 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,327 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,328 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,328 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,329 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,329 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,329 - app - INFO - Product None contains ingredients: ['squalane', 'salicylic acid', 'glycerin']
2025-04-20 11:53:39,330 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,330 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,331 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,331 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,332 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,332 - app - INFO - Product None contains ingredients: ['niacinamide']
2025-04-20 11:53:39,333 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,334 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,336 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,337 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,338 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,338 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,339 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,339 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,339 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,340 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,340 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,341 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,342 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,342 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,342 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,343 - app - INFO - Product None contains ingredients: ['squalane', 'glycerin']
2025-04-20 11:53:39,343 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,344 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,344 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,345 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,345 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,345 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,346 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,346 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,347 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,348 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'glycerin']
2025-04-20 11:53:39,348 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,349 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,349 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,350 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:39,350 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,351 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'salicylic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,353 - app - INFO - Added product None with score 12
2025-04-20 11:53:39,354 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:39,354 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,355 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,355 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,356 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,356 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,357 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,357 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,358 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,358 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,359 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,359 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,359 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,360 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,360 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,360 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,361 - app - INFO - Product None contains ingredients: ['squalane']
2025-04-20 11:53:39,361 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,362 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,362 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,362 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,363 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,363 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,363 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,364 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,364 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,365 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'glycerin']
2025-04-20 11:53:39,365 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,366 - app - INFO - Product None contains ingredients: ['squalane', 'glycerin']
2025-04-20 11:53:39,366 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,367 - app - INFO - Product None contains ingredients: ['squalane', 'glycerin']
2025-04-20 11:53:39,368 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,369 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,370 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,371 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,371 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,371 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,372 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,372 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,373 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,374 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,374 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,374 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 11:53:39,375 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,375 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'salicylic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,376 - app - INFO - Added product None with score 12
2025-04-20 11:53:39,376 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:39,377 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,377 - app - INFO - Product None contains ingredients: ['squalane', 'salicylic acid', 'glycerin']
2025-04-20 11:53:39,377 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,378 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:39,379 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,379 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,379 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,380 - app - INFO - Product None contains ingredients: ['squalane', 'salicylic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,380 - app - INFO - Added product None with score 12
2025-04-20 11:53:39,381 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin', 'benzoyl peroxide']
2025-04-20 11:53:39,381 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,381 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin', 'niacinamide']
2025-04-20 11:53:39,382 - app - INFO - Added product None with score 9
2025-04-20 11:53:39,382 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 11:53:39,383 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,383 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 11:53:39,384 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,385 - app - INFO - Product None contains ingredients: ['salicylic acid', 'glycerin']
2025-04-20 11:53:39,386 - app - INFO - Added product None with score 6
2025-04-20 11:53:39,386 - app - INFO - Product None contains ingredients: ['niacinamide']
2025-04-20 11:53:39,387 - app - INFO - Added product None with score 3
2025-04-20 11:53:39,387 - app - INFO - Found 3 suitable products
2025-04-20 11:53:39,387 - app - INFO - Found 3 products and 6 ingredients
2025-04-20 11:58:27,173 - app - INFO -    Redis
2025-04-20 11:58:27,174 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:58:27,176 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:58:37,158 - app - INFO -    Redis
2025-04-20 11:58:37,161 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:58:37,166 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:58:38,179 - app - INFO -    Redis
2025-04-20 11:58:38,180 - app - INFO -  gemini-1.5-flash  
2025-04-20 11:58:38,185 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 11:58:39,592 - app - INFO -   
2025-04-20 11:58:48,131 - app - INFO - Received chat request
2025-04-20 11:58:48,131 - app - INFO - Processing message: 'i have acne and dry skin', session_id: c9c83fbb-d322-4abe-a790-913d7a811e65
2025-04-20 11:58:48,132 - app - INFO - Creating new context for session c9c83fbb-d322-4abe-a790-913d7a811e65
2025-04-20 11:58:48,669 - app - INFO - Detected language: da
2025-04-20 11:58:48,670 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 11:58:48,670 - app - INFO - Found skin type: dry
2025-04-20 11:58:48,671 - app - INFO - Added concern: acne
2025-04-20 11:58:48,671 - app - INFO - Added concern: dry_skin
2025-04-20 11:58:48,672 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:58:48,672 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:58:48,673 - app - INFO - Is agreement message: False
2025-04-20 11:58:48,673 - app - INFO - Generating regular response through Gemini
2025-04-20 11:58:48,673 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 11:59:09,758 - app - INFO - Received chat request
2025-04-20 11:59:09,759 - app - INFO - Processing message: 'find me', session_id: c9c83fbb-d322-4abe-a790-913d7a811e65
2025-04-20 11:59:09,772 - app - INFO - Detected language: da
2025-04-20 11:59:09,772 - app - INFO - Updating context from message: find me
2025-04-20 11:59:09,772 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:59:09,773 - app - INFO - Context changes - Before: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 11:59:09,774 - app - INFO - Is agreement message: False
2025-04-20 11:59:09,774 - app - INFO - Generating regular response through Gemini
2025-04-20 11:59:09,774 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:01:43,022 - app - INFO -    Redis
2025-04-20 12:01:43,023 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:01:43,026 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:02:08,454 - app - INFO -   
2025-04-20 12:02:15,238 - app - INFO -    Redis
2025-04-20 12:02:15,241 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:02:15,247 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:02:15,788 - app - INFO -    Redis
2025-04-20 12:02:15,791 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:02:15,795 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:02:15,801 - app - INFO - Received chat request
2025-04-20 12:02:15,801 - app - INFO - Processing message: 'i have acne and dry skin', session_id: 031a0f65-ca35-4824-9362-d6a18af5c94f
2025-04-20 12:02:15,802 - app - INFO - Creating new context for session 031a0f65-ca35-4824-9362-d6a18af5c94f
2025-04-20 12:02:16,300 - app - INFO - Detected language: da
2025-04-20 12:02:16,300 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 12:02:16,301 - app - INFO - Found skin type: dry
2025-04-20 12:02:16,301 - app - INFO - Added concern: acne
2025-04-20 12:02:16,301 - app - INFO - Added concern: dry_skin
2025-04-20 12:02:16,302 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:02:16,302 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:02:16,303 - app - INFO - Is agreement message: False
2025-04-20 12:02:16,303 - app - INFO - Generating regular response through Gemini
2025-04-20 12:02:16,303 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:02:32,395 - app - INFO - Received chat request
2025-04-20 12:02:32,396 - app - INFO - Processing message: 'find me', session_id: 031a0f65-ca35-4824-9362-d6a18af5c94f
2025-04-20 12:02:32,405 - app - INFO - Detected language: da
2025-04-20 12:02:32,406 - app - INFO - Updating context from message: find me
2025-04-20 12:02:32,406 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:02:32,407 - app - INFO - Context changes - Before: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:02:32,407 - app - INFO - Is agreement message: False
2025-04-20 12:02:32,407 - app - INFO - Generating regular response through Gemini
2025-04-20 12:02:32,408 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:08:24,224 - app - INFO -    Redis
2025-04-20 12:08:24,226 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:08:24,233 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:09:02,219 - app - INFO -    Redis
2025-04-20 12:09:02,221 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:09:02,227 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:09:29,854 - app - INFO -    Redis
2025-04-20 12:09:29,856 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:09:29,859 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:10:05,389 - app - INFO -    Redis
2025-04-20 12:10:05,391 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:10:05,395 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:11:29,981 - app - INFO -    Redis
2025-04-20 12:11:29,982 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:11:29,984 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:11:57,859 - app - INFO -   
2025-04-20 12:12:00,963 - app - INFO -    Redis
2025-04-20 12:12:00,964 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:12:00,968 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:12:04,884 - app - INFO -    Redis
2025-04-20 12:12:04,885 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:12:04,888 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:12:11,373 - app - INFO - Received chat request
2025-04-20 12:12:11,373 - app - INFO - Processing message: 'i have acne and dry skin', session_id: 61449ad9-8e92-4199-bc41-37b84116f624
2025-04-20 12:12:11,374 - app - INFO - Creating new context for session 61449ad9-8e92-4199-bc41-37b84116f624
2025-04-20 12:12:12,005 - app - INFO - Detected language: da
2025-04-20 12:12:12,005 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 12:12:12,005 - app - INFO - Found skin type: dry
2025-04-20 12:12:12,006 - app - INFO - Added concern: acne
2025-04-20 12:12:12,006 - app - INFO - Added concern: dry_skin
2025-04-20 12:12:12,007 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:12:12,008 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:12:12,008 - app - INFO - Message analysis - basic search: False, specific request: False
2025-04-20 12:12:12,009 - app - INFO - Generating regular response through Gemini
2025-04-20 12:12:12,009 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:12:23,847 - app - INFO - Received chat request
2025-04-20 12:12:23,848 - app - INFO - Processing message: 'yes', session_id: 61449ad9-8e92-4199-bc41-37b84116f624
2025-04-20 12:12:23,851 - app - INFO - Detected language: tr
2025-04-20 12:12:23,851 - app - INFO - Updating context from message: yes
2025-04-20 12:12:23,852 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:12:23,852 - app - INFO - Context changes - Before: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:12:23,853 - app - INFO - Message analysis - basic search: False, specific request: False
2025-04-20 12:12:23,853 - app - INFO - Generating regular response through Gemini
2025-04-20 12:12:23,854 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:12:53,905 - app - INFO - Received chat request
2025-04-20 12:12:53,906 - app - INFO - Processing message: 'acne and dry skin find me products', session_id: 61449ad9-8e92-4199-bc41-37b84116f624
2025-04-20 12:12:53,926 - app - INFO - Detected language: en
2025-04-20 12:12:53,927 - app - INFO - Updating context from message: acne and dry skin find me products
2025-04-20 12:12:53,928 - app - INFO - Found skin type: dry
2025-04-20 12:12:53,928 - app - INFO - Added concern: acne
2025-04-20 12:12:53,929 - app - INFO - Added concern: dry_skin
2025-04-20 12:12:53,929 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:12:53,930 - app - INFO - Context changes - Before: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:12:53,931 - app - INFO - Message analysis - basic search: True, specific request: True
2025-04-20 12:12:53,932 - app - INFO - Specific product request detected
2025-04-20 12:12:53,933 - app - INFO - Searching with skin_type: dry, concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 12:12:53,933 - app - INFO - Searching products for skin_type: dry, concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 12:12:53,934 - app - INFO - Standardized concerns: ['acne', 'dry_skin', 'dry_skin']
2025-04-20 12:12:53,935 - app - INFO - Looking for products with ingredients: {'hyaluronic acid', 'ceramides', 'tea tree oil', 'glycerin', 'benzoyl peroxide', 'salicylic acid', 'squalane', 'niacinamide'}
2025-04-20 12:12:53,936 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,937 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,938 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:53,939 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,940 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,940 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,941 - app - INFO - Product None contains ingredients: ['glycerin', 'benzoyl peroxide', 'niacinamide']
2025-04-20 12:12:53,942 - app - INFO - Added product None with score 9
2025-04-20 12:12:53,943 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:53,944 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,944 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:53,945 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,946 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 12:12:53,946 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,947 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:53,948 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,949 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:53,949 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,950 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,951 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,952 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,953 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,954 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,955 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,956 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:53,956 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,957 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'glycerin', 'niacinamide']
2025-04-20 12:12:53,958 - app - INFO - Added product None with score 9
2025-04-20 12:12:53,959 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,960 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,961 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid', 'squalane']
2025-04-20 12:12:53,962 - app - INFO - Added product None with score 9
2025-04-20 12:12:53,963 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,964 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,965 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,965 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,966 - app - INFO - Product None contains ingredients: ['niacinamide']
2025-04-20 12:12:53,967 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,968 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,969 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,970 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid', 'niacinamide']
2025-04-20 12:12:53,971 - app - INFO - Added product None with score 9
2025-04-20 12:12:53,972 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,972 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,973 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,974 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,975 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:53,975 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,976 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:53,977 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,978 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,978 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,979 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane']
2025-04-20 12:12:53,980 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,980 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:53,981 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,982 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:53,982 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,983 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:53,984 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,985 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,985 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,986 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'glycerin']
2025-04-20 12:12:53,988 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,989 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,990 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,991 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 12:12:53,991 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,992 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'glycerin', 'salicylic acid', 'niacinamide']
2025-04-20 12:12:53,993 - app - INFO - Added product None with score 12
2025-04-20 12:12:53,994 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 12:12:53,994 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,995 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:53,996 - app - INFO - Added product None with score 3
2025-04-20 12:12:53,997 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:53,997 - app - INFO - Added product None with score 6
2025-04-20 12:12:53,998 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid', 'niacinamide']
2025-04-20 12:12:53,999 - app - INFO - Added product None with score 9
2025-04-20 12:12:54,000 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:54,000 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,001 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:54,002 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,002 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:54,003 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,004 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:54,005 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,005 - app - INFO - Product None contains ingredients: ['squalane']
2025-04-20 12:12:54,006 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,007 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:54,007 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,008 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:54,009 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,009 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:54,010 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,011 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:54,012 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,013 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'glycerin']
2025-04-20 12:12:54,013 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,014 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane']
2025-04-20 12:12:54,015 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,015 - app - INFO - Product None contains ingredients: ['glycerin', 'squalane']
2025-04-20 12:12:54,016 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,018 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:54,019 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,020 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:54,020 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,021 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:54,022 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,023 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid', 'niacinamide']
2025-04-20 12:12:54,023 - app - INFO - Added product None with score 9
2025-04-20 12:12:54,024 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:54,025 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,026 - app - INFO - Product None contains ingredients: ['glycerin']
2025-04-20 12:12:54,026 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,027 - app - INFO - Product None contains ingredients: ['hyaluronic acid', 'glycerin', 'salicylic acid', 'niacinamide']
2025-04-20 12:12:54,028 - app - INFO - Added product None with score 12
2025-04-20 12:12:54,028 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 12:12:54,029 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,029 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid', 'squalane']
2025-04-20 12:12:54,030 - app - INFO - Added product None with score 9
2025-04-20 12:12:54,031 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 12:12:54,031 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,032 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid', 'niacinamide']
2025-04-20 12:12:54,033 - app - INFO - Added product None with score 9
2025-04-20 12:12:54,034 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid', 'squalane', 'niacinamide']
2025-04-20 12:12:54,034 - app - INFO - Added product None with score 12
2025-04-20 12:12:54,035 - app - INFO - Product None contains ingredients: ['glycerin', 'benzoyl peroxide', 'salicylic acid']
2025-04-20 12:12:54,036 - app - INFO - Added product None with score 9
2025-04-20 12:12:54,037 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid', 'niacinamide']
2025-04-20 12:12:54,038 - app - INFO - Added product None with score 9
2025-04-20 12:12:54,038 - app - INFO - Product None contains ingredients: ['glycerin', 'niacinamide']
2025-04-20 12:12:54,039 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,040 - app - INFO - Product None contains ingredients: ['salicylic acid']
2025-04-20 12:12:54,040 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,041 - app - INFO - Product None contains ingredients: ['glycerin', 'salicylic acid']
2025-04-20 12:12:54,042 - app - INFO - Added product None with score 6
2025-04-20 12:12:54,042 - app - INFO - Product None contains ingredients: ['niacinamide']
2025-04-20 12:12:54,043 - app - INFO - Added product None with score 3
2025-04-20 12:12:54,043 - app - INFO - Found 3 suitable products
2025-04-20 12:12:54,044 - app - INFO - Found 3 products and 6 ingredients
2025-04-20 12:14:29,753 - app - INFO -    Redis
2025-04-20 12:14:29,755 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:14:29,757 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:14:48,093 - app - INFO -    Redis
2025-04-20 12:14:48,095 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:14:48,098 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:15:28,319 - app - INFO -   
2025-04-20 12:15:33,503 - app - INFO -    Redis
2025-04-20 12:15:33,505 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:15:33,510 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:15:39,063 - app - INFO - Received chat request
2025-04-20 12:15:39,063 - app - INFO - Processing message: 'i have acne and dry skin', session_id: cd8e0c47-1e4d-4a88-b4de-d5b33016e4d6
2025-04-20 12:15:39,064 - app - INFO - Creating new context for session cd8e0c47-1e4d-4a88-b4de-d5b33016e4d6
2025-04-20 12:15:39,570 - app - INFO - Detected language: en
2025-04-20 12:15:39,571 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 12:15:39,571 - app - INFO - Found skin type: dry
2025-04-20 12:15:39,571 - app - INFO - Added concern: acne
2025-04-20 12:15:39,572 - app - INFO - Added concern: dry_skin
2025-04-20 12:15:39,572 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:15:39,573 - app - INFO - Context changes - Before: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:15:39,573 - app - INFO - Message analysis - basic search: False, specific request: False
2025-04-20 12:15:39,573 - app - INFO - Generating regular response through Gemini
2025-04-20 12:15:39,574 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:15:54,398 - app - INFO - Received chat request
2025-04-20 12:15:54,398 - app - INFO - Processing message: 'find me', session_id: cd8e0c47-1e4d-4a88-b4de-d5b33016e4d6
2025-04-20 12:15:54,412 - app - INFO - Detected language: da
2025-04-20 12:15:54,413 - app - INFO - Updating context from message: find me
2025-04-20 12:15:54,414 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:15:54,414 - app - INFO - Context changes - Before: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:15:54,415 - app - INFO - Message analysis - basic search: False, specific request: False
2025-04-20 12:15:54,415 - app - INFO - Generating regular response through Gemini
2025-04-20 12:15:54,416 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:16:51,900 - app - INFO - Received chat request
2025-04-20 12:16:51,901 - app - INFO - Processing message: 'i described problem', session_id: cd8e0c47-1e4d-4a88-b4de-d5b33016e4d6
2025-04-20 12:16:51,938 - app - INFO - Detected language: ca
2025-04-20 12:16:51,939 - app - INFO - Updating context from message: i described problem
2025-04-20 12:16:51,940 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:16:51,941 - app - INFO - Context changes - Before: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}, After: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:16:51,942 - app - INFO - Message analysis - basic search: False, specific request: False
2025-04-20 12:16:51,943 - app - INFO - Generating regular response through Gemini
2025-04-20 12:16:51,944 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:19:35,830 - app - INFO -    Redis
2025-04-20 12:19:35,832 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:19:35,837 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:20:00,180 - app - INFO -    Redis
2025-04-20 12:20:00,182 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:20:00,187 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:20:28,926 - app - INFO -   
2025-04-20 12:20:37,865 - app - INFO - Received chat request
2025-04-20 12:20:37,866 - app - INFO - Processing message: 'i have acne and dry skin', session_id: 87373375-9388-451c-ab79-135ec2fed956
2025-04-20 12:20:37,867 - app - INFO - Creating new context for session 87373375-9388-451c-ab79-135ec2fed956
2025-04-20 12:20:38,233 - app - INFO - Detected language: da
2025-04-20 12:20:38,234 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 12:20:38,234 - app - INFO - Found skin type: dry
2025-04-20 12:20:38,235 - app - INFO - Added concern: acne
2025-04-20 12:20:38,235 - app - INFO - Added concern: dry_skin
2025-04-20 12:20:38,236 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:20:38,236 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:20:38,236 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:20:42,764 - app - INFO -    Redis
2025-04-20 12:20:42,767 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:20:42,772 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:20:49,962 - app - INFO -    Redis
2025-04-20 12:20:49,966 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:20:49,974 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:20:57,509 - app - INFO - Received chat request
2025-04-20 12:20:57,510 - app - INFO - Processing message: 'find me', session_id: 87373375-9388-451c-ab79-135ec2fed956
2025-04-20 12:20:57,510 - app - INFO - Creating new context for session 87373375-9388-451c-ab79-135ec2fed956
2025-04-20 12:20:58,455 - app - INFO - Detected language: da
2025-04-20 12:20:58,456 - app - INFO - Updating context from message: find me
2025-04-20 12:20:58,461 - app - INFO - Updated context state: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 12:20:58,463 - app - INFO - Updated context: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 12:20:58,465 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:23:11,674 - app - INFO -    Redis
2025-04-20 12:23:11,676 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:23:11,684 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:23:32,129 - app - INFO -    Redis
2025-04-20 12:23:32,131 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:23:32,133 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:24:28,171 - app - INFO -   
2025-04-20 12:24:37,222 - app - INFO -    Redis
2025-04-20 12:24:37,225 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:24:37,232 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:24:41,771 - app - INFO -   
2025-04-20 12:24:48,708 - app - INFO - Received chat request
2025-04-20 12:24:48,709 - app - INFO - Processing message: 'i have acne and dry skin', session_id: bb8ac247-1eee-4f51-9364-48249f8ecec1
2025-04-20 12:24:48,710 - app - INFO - Creating new context for session bb8ac247-1eee-4f51-9364-48249f8ecec1
2025-04-20 12:24:49,288 - app - INFO - Detected language: da
2025-04-20 12:24:49,289 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 12:24:49,289 - app - INFO - Found skin type: dry
2025-04-20 12:24:49,290 - app - INFO - Added concern: acne
2025-04-20 12:24:49,290 - app - INFO - Added concern: dry_skin
2025-04-20 12:24:49,291 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:24:49,292 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:24:49,293 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:24:58,582 - app - INFO - Received chat request
2025-04-20 12:24:58,583 - app - INFO - Processing message: 'find', session_id: bb8ac247-1eee-4f51-9364-48249f8ecec1
2025-04-20 12:24:58,591 - app - INFO - Detected language: da
2025-04-20 12:24:58,592 - app - INFO - Updating context from message: find
2025-04-20 12:24:58,592 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:24:58,593 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:24:58,594 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:34:02,571 - app - INFO -    Redis
2025-04-20 12:34:02,575 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:34:02,583 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:34:16,868 - app - INFO -    Redis
2025-04-20 12:34:16,869 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:34:16,872 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:34:49,169 - app - INFO -    Redis
2025-04-20 12:34:49,171 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:34:49,177 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:36:17,236 - app - INFO -   
2025-04-20 12:36:28,888 - app - INFO -   
2025-04-20 12:36:38,561 - app - INFO - Received chat request
2025-04-20 12:36:38,561 - app - INFO - Processing message: 'i have acne and dry skin', session_id: bd6714e8-f39e-4a9e-8a2c-dcc73e868b4a
2025-04-20 12:36:38,562 - app - INFO - Creating new context for session bd6714e8-f39e-4a9e-8a2c-dcc73e868b4a
2025-04-20 12:36:39,138 - app - INFO - Detected language: da
2025-04-20 12:36:39,139 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 12:36:39,139 - app - INFO - Found skin type: dry
2025-04-20 12:36:39,139 - app - INFO - Added concern: acne
2025-04-20 12:36:39,140 - app - INFO - Added concern: dry_skin
2025-04-20 12:36:39,140 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:36:39,141 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:36:39,141 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:36:50,453 - app - INFO - Received chat request
2025-04-20 12:36:50,454 - app - INFO - Processing message: 'find me', session_id: bd6714e8-f39e-4a9e-8a2c-dcc73e868b4a
2025-04-20 12:36:50,472 - app - INFO - Detected language: da
2025-04-20 12:36:50,472 - app - INFO - Updating context from message: find me
2025-04-20 12:36:50,473 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:36:50,474 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:36:50,474 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:37:05,291 - app - INFO -   
2025-04-20 12:37:06,884 - app - INFO -    Redis
2025-04-20 12:37:06,886 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:37:06,890 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:37:12,420 - app - INFO -    Redis
2025-04-20 12:37:12,422 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:37:12,428 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:37:15,030 - app - INFO - Received chat request
2025-04-20 12:37:15,030 - app - INFO - Processing message: 'i have acne and dry skin', session_id: 3ab37525-326d-4fbd-8ce4-3802841fa3f6
2025-04-20 12:37:15,030 - app - INFO - Creating new context for session 3ab37525-326d-4fbd-8ce4-3802841fa3f6
2025-04-20 12:37:15,445 - app - INFO - Detected language: da
2025-04-20 12:37:15,446 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 12:37:15,446 - app - INFO - Found skin type: dry
2025-04-20 12:37:15,447 - app - INFO - Added concern: acne
2025-04-20 12:37:15,447 - app - INFO - Added concern: dry_skin
2025-04-20 12:37:15,447 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:37:15,448 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:37:15,448 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:37:45,172 - app - INFO - Received chat request
2025-04-20 12:37:45,173 - app - INFO - Processing message: 'find me', session_id: 3ab37525-326d-4fbd-8ce4-3802841fa3f6
2025-04-20 12:37:45,182 - app - INFO - Detected language: da
2025-04-20 12:37:45,182 - app - INFO - Updating context from message: find me
2025-04-20 12:37:45,183 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:37:45,184 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:37:45,184 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:39:44,642 - app - INFO -    Redis
2025-04-20 12:39:44,643 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:39:44,646 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:40:09,943 - app - INFO -   
2025-04-20 12:40:21,074 - app - INFO - Received chat request
2025-04-20 12:40:21,074 - app - INFO - Processing message: 'i have acne and dry skin', session_id: afecb108-9996-48f9-9fa8-7c33354c7b3c
2025-04-20 12:40:21,075 - app - INFO - Creating new context for session afecb108-9996-48f9-9fa8-7c33354c7b3c
2025-04-20 12:40:21,108 - app - INFO - Detected language: da
2025-04-20 12:40:21,109 - app - INFO - Updating context from message: i have acne and dry skin
2025-04-20 12:40:21,109 - app - INFO - Found skin type: dry
2025-04-20 12:40:21,110 - app - INFO - Added concern: acne
2025-04-20 12:40:21,110 - app - INFO - Added concern: dry_skin
2025-04-20 12:40:21,111 - app - INFO - Updated context state: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:40:21,111 - app - INFO - Updated context: {'skin_type': 'dry', 'age': None, 'concerns': ['acne', 'dry_skin'], 'allergies': None, 'current_products': None, 'has_basic_info': True}
2025-04-20 12:40:21,111 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:40:33,615 - app - INFO -    Redis
2025-04-20 12:40:33,617 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:40:33,621 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:40:33,627 - app - INFO - Received chat request
2025-04-20 12:40:33,628 - app - INFO - Processing message: 'find', session_id: afecb108-9996-48f9-9fa8-7c33354c7b3c
2025-04-20 12:40:33,628 - app - INFO - Creating new context for session afecb108-9996-48f9-9fa8-7c33354c7b3c
2025-04-20 12:40:33,993 - app - INFO - Detected language: da
2025-04-20 12:40:33,993 - app - INFO - Updating context from message: find
2025-04-20 12:40:33,994 - app - INFO - Updated context state: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 12:40:33,994 - app - INFO - Updated context: {'skin_type': None, 'age': None, 'concerns': [], 'allergies': None, 'current_products': None, 'has_basic_info': False}
2025-04-20 12:40:33,994 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:42:38,487 - app - INFO -    Redis
2025-04-20 12:42:38,489 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:42:38,497 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:43:38,457 - app - INFO -    Redis
2025-04-20 12:43:38,458 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:43:38,462 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:43:57,824 - app - INFO -    Redis
2025-04-20 12:43:57,826 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:43:57,830 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:44:03,015 - app - INFO -   
2025-04-20 12:44:06,163 - app - INFO -    Redis
2025-04-20 12:44:06,165 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:44:06,169 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:44:10,652 - app - INFO - Detected language: da
2025-04-20 12:44:10,653 - app - INFO - Updated skin type to: dry
2025-04-20 12:44:10,653 - app - INFO - Added new concerns: ['acne']
2025-04-20 12:44:10,653 - app - INFO - Context updated - skin_type: dry, concerns: ['acne']
2025-04-20 12:44:10,654 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:44:10,654 - app - ERROR - Error on attempt 1: 'str' object has no attribute 'skin_type'
2025-04-20 12:44:10,654 - app - INFO - Attempt 2/3 to get response from Gemini
2025-04-20 12:44:10,655 - app - ERROR - Error on attempt 2: 'str' object has no attribute 'skin_type'
2025-04-20 12:44:10,655 - app - INFO - Attempt 3/3 to get response from Gemini
2025-04-20 12:44:10,655 - app - ERROR - Error on attempt 3: 'str' object has no attribute 'skin_type'
2025-04-20 12:44:49,302 - app - INFO -   
2025-04-20 12:46:02,354 - app - INFO -    Redis
2025-04-20 12:46:02,356 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:46:02,365 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:46:13,285 - app - INFO -   
2025-04-20 12:46:18,982 - app - INFO -    Redis
2025-04-20 12:46:18,984 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:46:18,990 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:46:25,876 - app - INFO - Detected language: da
2025-04-20 12:46:25,876 - app - INFO - Updated skin type to: dry
2025-04-20 12:46:25,877 - app - INFO - Added new concerns: ['acne']
2025-04-20 12:46:25,877 - app - INFO - Context updated - skin_type: dry, concerns: ['acne']
2025-04-20 12:46:25,877 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:50:26,740 - app - INFO -    Redis
2025-04-20 12:50:26,745 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:50:26,752 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:50:55,538 - app - INFO -    Redis
2025-04-20 12:50:55,539 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:50:55,543 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:51:12,605 - app - INFO -   
2025-04-20 12:51:23,871 - app - INFO - Detected language: da
2025-04-20 12:51:23,872 - app - INFO - Updated skin type to: dry
2025-04-20 12:51:23,872 - app - INFO - Added new concerns: ['acne']
2025-04-20 12:51:23,873 - app - INFO - Context updated - skin_type: dry, concerns: ['acne']
2025-04-20 12:51:23,873 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:51:38,215 - app - INFO -    Redis
2025-04-20 12:51:38,217 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:51:38,223 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:51:51,327 - app - INFO -   
2025-04-20 12:52:03,308 - app - INFO -    Redis
2025-04-20 12:52:03,313 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:52:03,325 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:52:05,336 - app - INFO -    Redis
2025-04-20 12:52:05,339 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:52:05,350 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:52:06,458 - app - INFO - Detected language: da
2025-04-20 12:52:06,459 - app - INFO - Updated skin type to: dry
2025-04-20 12:52:06,460 - app - INFO - Added new concerns: ['acne']
2025-04-20 12:52:06,461 - app - INFO - Context updated - skin_type: dry, concerns: ['acne']
2025-04-20 12:52:06,461 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:55:09,622 - app - INFO -    Redis
2025-04-20 12:55:09,623 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:55:09,625 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:55:32,409 - app - INFO -    Redis
2025-04-20 12:55:32,412 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:55:32,420 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:56:24,201 - app - INFO -   
2025-04-20 12:56:30,102 - app - INFO -    Redis
2025-04-20 12:56:30,104 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:56:30,107 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:56:36,051 - app - INFO - Detected language: da
2025-04-20 12:56:36,052 - app - INFO - Added new concerns: ['acne']
2025-04-20 12:56:36,052 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 12:56:36,053 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:59:03,351 - app - INFO -    Redis
2025-04-20 12:59:03,354 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:59:03,360 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:59:11,096 - app - INFO -    Redis
2025-04-20 12:59:11,099 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:59:11,107 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 12:59:11,119 - app - INFO -   
2025-04-20 12:59:18,704 - app - INFO - Detected language: da
2025-04-20 12:59:18,704 - app - INFO - Added new concerns: ['acne']
2025-04-20 12:59:18,705 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 12:59:18,705 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 12:59:19,426 - app - INFO -    Redis
2025-04-20 12:59:19,428 - app - INFO -  gemini-1.5-flash  
2025-04-20 12:59:19,433 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:00:53,544 - app - INFO -    Redis
2025-04-20 13:00:53,545 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:00:53,547 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:01:01,289 - app - INFO -   
2025-04-20 13:01:13,560 - app - INFO -    Redis
2025-04-20 13:01:13,563 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:01:13,573 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:01:13,585 - app - INFO - Received chat request
2025-04-20 13:01:13,587 - app - INFO - Processing message: 'i have acne', session_id: 8d72a4a9-5539-4010-95a8-12eaa8212652
2025-04-20 13:01:13,588 - app - INFO - Creating new dialog context
2025-04-20 13:01:14,608 - app - INFO - Detected language: da
2025-04-20 13:01:14,609 - app - INFO - Updating context with message
2025-04-20 13:01:14,610 - app - INFO - Added new concerns: ['acne']
2025-04-20 13:01:14,611 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 13:01:14,612 - app - INFO - Updated context - skin_type: None, concerns: ['acne']
2025-04-20 13:01:14,613 - app - INFO - Product search intent detected: False
2025-04-20 13:01:14,614 - app - INFO - Generating Gemini response
2025-04-20 13:01:14,615 - app - INFO - Attempt 1/3 to get response from Gemini
2025-04-20 13:01:14,616 - app - INFO - Sending prompt to Gemini
2025-04-20 13:01:17,477 - app - INFO - Got response from Gemini: ```json
{
  "response_type": "clarification",
  "content": {
    "sections": [
      {
        "titl...
2025-04-20 13:01:17,478 - app - INFO - Found JSON content in response
2025-04-20 13:01:17,479 - app - INFO - Successfully parsed JSON response
2025-04-20 13:01:17,479 - app - INFO - Found valid structured response
2025-04-20 13:01:17,480 - app - INFO - Got Gemini response type: <class 'dict'>
2025-04-20 13:01:17,481 - app - INFO - Formatting structured response
2025-04-20 13:04:31,542 - app - INFO -    Redis
2025-04-20 13:04:31,568 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:04:31,581 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:04:41,985 - app - INFO -    Redis
2025-04-20 13:04:41,989 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:04:42,000 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:05:30,621 - app - INFO -    Redis
2025-04-20 13:05:30,623 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:05:30,637 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:05:44,317 - app - INFO -   
2025-04-20 13:05:52,370 - app - INFO -    Redis
2025-04-20 13:05:52,372 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:05:52,381 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:05:52,409 - app - INFO - Added new concerns: ['acne']
2025-04-20 13:05:52,410 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 13:05:53,510 - app - INFO - Detected language: da
2025-04-20 13:05:53,511 - app - ERROR - Error in generate_gemini_response: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:05:53,514 - app - ERROR - Error generating response: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:07:59,937 - app - INFO -    Redis
2025-04-20 13:07:59,939 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:07:59,944 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:08:30,445 - app - INFO -    Redis
2025-04-20 13:08:30,448 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:08:30,454 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:08:38,919 - app - INFO -    Redis
2025-04-20 13:08:38,922 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:08:38,929 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:08:56,166 - app - INFO -   
2025-04-20 13:09:03,848 - app - INFO - Added new concerns: ['acne']
2025-04-20 13:09:03,849 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 13:09:04,584 - app - INFO - Detected language: da
2025-04-20 13:09:04,585 - app - ERROR - Error generating content from Gemini: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:11:17,073 - app - INFO -    Redis
2025-04-20 13:11:17,075 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:11:17,079 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:11:27,485 - app - INFO -    Redis
2025-04-20 13:11:27,488 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:11:27,493 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:12:00,523 - app - INFO -   
2025-04-20 13:12:09,795 - app - INFO - Received chat request
2025-04-20 13:12:09,796 - app - INFO - Request data parsed successfully
2025-04-20 13:12:09,797 - app - INFO - Message length: 11, Session ID: 809172b4-2d0e-4e0f-9ccb-7cbdb598a4ed
2025-04-20 13:12:09,798 - app - INFO - Creating new context for session 809172b4-2d0e-4e0f-9ccb-7cbdb598a4ed
2025-04-20 13:12:09,799 - app - INFO - Added new concerns: ['acne']
2025-04-20 13:12:09,799 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 13:12:11,010 - app - INFO - Detected language: da
2025-04-20 13:12:11,011 - app - INFO - Generating response
2025-04-20 13:12:11,011 - app - INFO - Starting generate_gemini_response
2025-04-20 13:12:11,012 - app - INFO - Input message: i have acne...
2025-04-20 13:12:11,013 - app - INFO - Context: skin_type=None, concerns=['acne']
2025-04-20 13:12:11,014 - app - INFO - System prompt loaded
2025-04-20 13:12:11,015 - app - INFO - Conversation prepared
2025-04-20 13:12:11,016 - app - INFO - Calling Gemini API
2025-04-20 13:12:11,017 - app - ERROR - Error generating content from Gemini: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:12:11,018 - app - INFO - Response generated successfully, length: 41
2025-04-20 13:12:16,951 - app - INFO -    Redis
2025-04-20 13:12:16,952 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:12:16,956 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:12:22,763 - app - INFO - Received chat request
2025-04-20 13:12:22,767 - app - INFO - Request data parsed successfully
2025-04-20 13:12:22,767 - app - INFO - Message length: 8, Session ID: 809172b4-2d0e-4e0f-9ccb-7cbdb598a4ed
2025-04-20 13:12:22,768 - app - INFO - Found existing context for session 809172b4-2d0e-4e0f-9ccb-7cbdb598a4ed
2025-04-20 13:12:22,768 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 13:12:22,772 - app - INFO - Detected language: ru
2025-04-20 13:12:22,772 - app - INFO - Generating response
2025-04-20 13:12:22,773 - app - INFO - Starting generate_gemini_response
2025-04-20 13:12:22,773 - app - INFO - Input message:  ...
2025-04-20 13:12:22,773 - app - INFO - Context: skin_type=None, concerns=['acne']
2025-04-20 13:12:22,774 - app - INFO - System prompt loaded
2025-04-20 13:12:22,774 - app - INFO - Conversation prepared
2025-04-20 13:12:22,774 - app - INFO - Calling Gemini API
2025-04-20 13:12:22,775 - app - ERROR - Error generating content from Gemini: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:12:22,775 - app - INFO - Response generated successfully, length: 38
2025-04-20 13:12:26,753 - app - INFO -    Redis
2025-04-20 13:12:26,754 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:12:26,758 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:12:31,977 - app - INFO - Received chat request
2025-04-20 13:12:31,977 - app - INFO - Request data parsed successfully
2025-04-20 13:12:31,978 - app - INFO - Message length: 8, Session ID: 809172b4-2d0e-4e0f-9ccb-7cbdb598a4ed
2025-04-20 13:12:31,978 - app - INFO - Creating new context for session 809172b4-2d0e-4e0f-9ccb-7cbdb598a4ed
2025-04-20 13:12:31,978 - app - INFO - Updated skin type to: dry
2025-04-20 13:12:31,979 - app - INFO - Context updated - skin_type: dry, concerns: []
2025-04-20 13:12:32,567 - app - INFO - Detected language: en
2025-04-20 13:12:32,568 - app - INFO - Generating response
2025-04-20 13:12:32,568 - app - INFO - Starting generate_gemini_response
2025-04-20 13:12:32,568 - app - INFO - Input message: dry scin...
2025-04-20 13:12:32,569 - app - INFO - Context: skin_type=dry, concerns=[]
2025-04-20 13:12:32,569 - app - INFO - System prompt loaded
2025-04-20 13:12:32,570 - app - INFO - Conversation prepared
2025-04-20 13:12:32,570 - app - INFO - Calling Gemini API
2025-04-20 13:12:32,571 - app - ERROR - Error generating content from Gemini: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:12:32,571 - app - INFO - Response generated successfully, length: 41
2025-04-20 13:14:01,603 - app - INFO -    Redis
2025-04-20 13:14:01,607 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:14:01,619 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:14:22,193 - app - INFO -   
2025-04-20 13:14:34,554 - app - INFO -    Redis
2025-04-20 13:14:34,557 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:14:34,567 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:14:35,906 - app - INFO - Added new concerns: ['acne']
2025-04-20 13:14:35,907 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 13:14:35,909 - app - ERROR - Error generating Gemini response: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:14:39,262 - app - INFO -    Redis
2025-04-20 13:14:39,265 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:14:39,275 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:14:51,233 - app - INFO -   
2025-04-20 13:14:57,981 - app - INFO -   
2025-04-20 13:15:03,578 - app - INFO - Added new concerns: ['acne']
2025-04-20 13:15:03,579 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 13:15:03,579 - app - ERROR - Error generating Gemini response: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:16:13,185 - app - INFO -    Redis
2025-04-20 13:16:13,186 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:16:13,190 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:16:51,981 - app - INFO -    Redis
2025-04-20 13:16:51,985 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:16:51,993 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:16:59,953 - app - INFO -   
2025-04-20 13:17:16,962 - app - INFO -    Redis
2025-04-20 13:17:16,966 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:17:16,980 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:17:16,995 - app - INFO -   
2025-04-20 13:17:17,029 - app - INFO -   
2025-04-20 13:17:26,742 - app - INFO - Added new concerns: ['acne']
2025-04-20 13:17:26,743 - app - INFO - Context updated - skin_type: None, concerns: ['acne']
2025-04-20 13:17:26,744 - app - INFO - Sending request to Gemini API with message: acne...
2025-04-20 13:17:26,745 - app - ERROR - Error during Gemini API call: "Unable to determine the intended type of the `dict`. For `Content`, a 'parts' key is expected. For `Part`, either an 'inline_data' or a 'text' key is expected. For `Blob`, both 'mime_type' and 'data' keys are expected. However, the provided dictionary has the following keys: ['role', 'content']"
2025-04-20 13:19:08,739 - app - INFO -    Redis
2025-04-20 13:19:08,741 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:19:08,744 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:19:45,841 - app - INFO -   
2025-04-20 13:19:50,569 - app - INFO -    Redis
2025-04-20 13:19:50,570 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:19:50,575 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:19:53,601 - app - INFO - Context updated - skin_type: None, concerns: []
2025-04-20 13:20:51,052 - app - INFO -    Redis
2025-04-20 13:20:51,056 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:20:51,070 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:20:53,064 - app - INFO -   
2025-04-20 13:21:03,115 - app - INFO - Context updated - skin_type: None, concerns: []
2025-04-20 13:21:05,510 - app - INFO -    Redis
2025-04-20 13:21:05,511 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:21:05,514 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:21:07,137 - app - INFO -   
2025-04-20 13:21:16,909 - app - INFO -    Redis
2025-04-20 13:21:16,911 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:21:16,915 - app - INFO - Products dataset loaded successfully. Total products: 76
2025-04-20 13:24:59,606 - app - INFO -   
2025-04-20 13:25:41,020 - app - INFO -   
2025-04-20 13:25:59,568 - app - INFO -    Redis
2025-04-20 13:25:59,575 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:25:59,590 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:25:59,593 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:29:12,623 - app - INFO -    Redis
2025-04-20 13:29:12,624 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:29:12,628 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:29:12,628 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:29:17,692 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:29:17,693 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:29:17,695 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:29:17,695 - app - INFO - All datasets loaded successfully
2025-04-20 13:30:16,929 - app - INFO -   
2025-04-20 13:31:12,485 - app - INFO -    Redis
2025-04-20 13:31:12,491 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:31:12,499 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:31:12,500 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:31:18,295 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:31:18,296 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:31:18,298 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:31:18,298 - app - INFO - All datasets loaded successfully
2025-04-20 13:31:18,308 - app - INFO -   
2025-04-20 13:31:18,327 - app - INFO -   
2025-04-20 13:31:18,421 - app - INFO -    Redis
2025-04-20 13:31:18,424 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:31:18,431 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:31:18,432 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:31:23,733 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:31:23,734 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:31:23,735 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:31:23,735 - app - INFO - All datasets loaded successfully
2025-04-20 13:31:27,704 - app - INFO - Updated category to: acne
2025-04-20 13:31:27,705 - app - INFO - Added concern: acne
2025-04-20 13:33:30,573 - app - INFO -   
2025-04-20 13:33:37,912 - app - INFO -    Redis
2025-04-20 13:33:37,917 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:33:37,928 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:33:37,928 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:33:43,479 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:33:43,480 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:33:43,481 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:33:43,482 - app - INFO - All datasets loaded successfully
2025-04-20 13:33:53,781 - app - INFO -    Redis
2025-04-20 13:33:53,784 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:33:53,787 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:33:53,788 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:33:58,671 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:33:58,672 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:33:58,673 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:33:58,673 - app - INFO - All datasets loaded successfully
2025-04-20 13:34:12,160 - app - INFO -    Redis
2025-04-20 13:34:12,162 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:34:12,167 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:34:12,167 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:34:16,748 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:34:16,749 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:34:16,750 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:34:16,750 - app - INFO - All datasets loaded successfully
2025-04-20 13:34:16,755 - app - INFO -   
2025-04-20 13:34:16,763 - app - INFO - Updated category to: acne
2025-04-20 13:34:16,764 - app - INFO - Added concern: acne
2025-04-20 13:34:18,856 - app - INFO -   
2025-04-20 13:34:20,279 - app - INFO - Updated category to: acne
2025-04-20 13:34:20,280 - app - INFO - Added concern: acne
2025-04-20 13:36:10,437 - app - INFO -   
2025-04-20 13:36:31,395 - app - INFO -   
2025-04-20 13:36:45,746 - app - INFO -    Redis
2025-04-20 13:36:45,747 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:36:45,752 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:36:45,753 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:36:49,388 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:36:49,389 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:36:49,390 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:36:49,390 - app - INFO - All datasets loaded successfully
2025-04-20 13:36:49,395 - app - INFO - Updated category to: acne
2025-04-20 13:36:49,395 - app - INFO - Added concern: acne
2025-04-20 13:37:55,096 - app - INFO -    Redis
2025-04-20 13:37:55,098 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:37:55,101 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:37:55,101 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:38:00,185 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:38:00,200 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:38:00,229 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:38:00,237 - app - INFO - All datasets loaded successfully
2025-04-20 13:38:18,790 - app - INFO -    Redis
2025-04-20 13:38:18,792 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:38:18,796 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:38:18,797 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:38:22,454 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:38:22,456 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:38:22,457 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:38:22,457 - app - INFO - All datasets loaded successfully
2025-04-20 13:38:44,779 - app - INFO -   
2025-04-20 13:46:24,848 - app - ERROR -    Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:46:41,261 - app - ERROR -    Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:48:38,316 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:48:38,317 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 13:48:38,319 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:48:38,321 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:48:38,322 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:48:44,018 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:48:44,019 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:48:44,020 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:48:44,020 - app - INFO - All datasets loaded successfully
2025-04-20 13:48:44,191 - app - INFO -   
2025-04-20 13:48:44,206 - app - INFO -   
2025-04-20 13:48:52,759 - app - INFO - Updated category to: acne
2025-04-20 13:48:52,759 - app - INFO - Added concern: acne
2025-04-20 13:49:40,579 - app - INFO - Updated skin type to: dry
2025-04-20 13:52:53,305 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:52:53,306 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 13:52:53,311 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:52:53,316 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:52:53,317 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:52:58,674 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:52:58,675 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:52:58,677 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:52:58,678 - app - INFO - All datasets loaded successfully
2025-04-20 13:53:23,985 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:53:23,987 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 13:53:23,994 - app - INFO -  gemini-1.5-flash  
2025-04-20 13:53:24,001 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:53:24,001 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:53:27,448 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:53:27,450 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:53:27,451 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:53:27,452 - app - INFO - All datasets loaded successfully
2025-04-20 13:54:35,565 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:54:35,565 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 13:54:35,569 - app - ERROR - Error loading datasets: name 'load_dataset' is not defined
2025-04-20 13:54:35,570 - app - INFO - Gemini model initialized successfully
2025-04-20 13:54:35,571 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:54:35,572 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:54:39,763 - app - INFO - Embedding model initialized successfully
2025-04-20 13:55:15,905 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:55:15,906 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 13:55:15,912 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:55:15,913 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:55:15,914 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:55:15,914 - app - INFO - All datasets loaded successfully
2025-04-20 13:55:15,915 - app - INFO - Gemini model initialized successfully
2025-04-20 13:55:15,917 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:55:15,917 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:55:19,918 - app - INFO - Embedding model initialized successfully
2025-04-20 13:55:54,658 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:55:54,658 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 13:55:54,662 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:55:54,663 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:55:54,664 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:55:54,664 - app - INFO - All datasets loaded successfully
2025-04-20 13:55:54,665 - app - INFO - Gemini model initialized successfully
2025-04-20 13:55:54,667 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:55:54,668 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:55:59,639 - app - INFO - Embedding model initialized successfully
2025-04-20 13:56:01,297 - app - INFO -   
2025-04-20 13:56:07,741 - app - INFO - Updated category to: acne
2025-04-20 13:56:07,742 - app - INFO - Added concern: acne
2025-04-20 13:56:25,682 - root - INFO -     
2025-04-20 13:58:59,842 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 13:58:59,842 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 13:58:59,848 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 13:58:59,850 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 13:58:59,851 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 13:58:59,852 - app - INFO - All datasets loaded successfully
2025-04-20 13:58:59,853 - app - INFO - Gemini model initialized successfully
2025-04-20 13:58:59,856 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 13:58:59,856 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 13:59:05,694 - app - INFO - Embedding model initialized successfully
2025-04-20 14:00:25,100 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:00:25,100 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:00:25,104 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:00:25,105 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:00:25,106 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:00:25,106 - app - INFO - All datasets loaded successfully
2025-04-20 14:00:25,106 - app - INFO - Gemini model initialized successfully
2025-04-20 14:00:25,107 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:00:25,107 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:00:28,819 - app - INFO - Embedding model initialized successfully
2025-04-20 14:01:27,875 - app - INFO -   
2025-04-20 14:01:30,862 - app - INFO -   
2025-04-20 14:01:47,970 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:01:47,970 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:01:47,973 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:01:47,974 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:01:47,975 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:01:47,975 - app - INFO - All datasets loaded successfully
2025-04-20 14:01:47,975 - app - INFO - Gemini model initialized successfully
2025-04-20 14:01:47,977 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:01:47,977 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:01:53,365 - app - INFO - Embedding model initialized successfully
2025-04-20 14:01:53,372 - app - INFO -   
2025-04-20 14:02:55,759 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:02:55,760 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:02:55,763 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:02:55,764 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:02:55,764 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:02:55,765 - app - INFO - All datasets loaded successfully
2025-04-20 14:02:55,765 - app - INFO - Gemini model initialized successfully
2025-04-20 14:02:55,767 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:02:55,767 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:03:06,106 - app - INFO - Embedding model initialized successfully
2025-04-20 14:03:24,040 - app - INFO -   
2025-04-20 14:03:30,844 - app - INFO -   
2025-04-20 14:04:06,288 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:04:06,289 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:04:06,294 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:04:06,295 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:04:06,296 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:04:06,297 - app - INFO - All datasets loaded successfully
2025-04-20 14:04:06,298 - app - INFO - Gemini model initialized successfully
2025-04-20 14:04:06,300 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:04:06,301 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:04:10,688 - app - INFO - Embedding model initialized successfully
2025-04-20 14:05:05,262 - app - INFO -   
2025-04-20 14:06:14,794 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:06:14,832 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:06:14,852 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:06:14,853 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:06:14,854 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:06:14,854 - app - INFO - All datasets loaded successfully
2025-04-20 14:06:14,854 - app - INFO - Gemini model initialized successfully
2025-04-20 14:06:14,856 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:06:14,856 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:06:18,754 - app - INFO - Embedding model initialized successfully
2025-04-20 14:06:20,142 - app - INFO -   
2025-04-20 14:06:22,077 - app - INFO -   
2025-04-20 14:06:22,873 - app - INFO -   
2025-04-20 14:06:25,865 - app - INFO -   
2025-04-20 14:06:26,529 - app - INFO -   
2025-04-20 14:06:27,034 - app - INFO -   
2025-04-20 14:06:27,749 - app - INFO -   
2025-04-20 14:06:28,484 - app - INFO -   
2025-04-20 14:06:29,086 - app - INFO -   
2025-04-20 14:06:29,279 - app - INFO -   
2025-04-20 14:06:29,432 - app - INFO -   
2025-04-20 14:06:29,570 - app - INFO -   
2025-04-20 14:08:04,206 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:08:04,207 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:08:04,209 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:08:04,210 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:08:04,211 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:08:04,211 - app - INFO - All datasets loaded successfully
2025-04-20 14:08:04,211 - app - INFO - Gemini model initialized successfully
2025-04-20 14:08:04,213 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:08:04,213 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:08:07,691 - app - INFO - Embedding model initialized successfully
2025-04-20 14:08:32,837 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:08:32,837 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:08:32,840 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:08:32,841 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:08:32,842 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:08:32,842 - app - INFO - All datasets loaded successfully
2025-04-20 14:08:32,843 - app - INFO - Gemini model initialized successfully
2025-04-20 14:08:32,845 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:08:32,846 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:08:37,149 - app - INFO - Embedding model initialized successfully
2025-04-20 14:08:50,966 - app - INFO -   
2025-04-20 14:08:59,317 - app - INFO - Updated category to: acne
2025-04-20 14:08:59,317 - app - INFO - Added concern: acne
2025-04-20 14:09:04,326 - root - INFO -     
2025-04-20 14:10:15,252 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:10:15,254 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:10:15,257 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:10:15,257 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:10:15,258 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:10:15,258 - app - INFO - All datasets loaded successfully
2025-04-20 14:10:15,258 - app - INFO - Gemini model initialized successfully
2025-04-20 14:10:15,259 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:10:15,260 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:10:19,084 - app - INFO - Embedding model initialized successfully
2025-04-20 14:10:30,155 - app - INFO -   
2025-04-20 14:10:36,826 - app - INFO - Received chat request: message='acne', session_id='91af798c-08a4-44fc-8911-ca2a88d9a3a3'
2025-04-20 14:10:37,470 - app - INFO - Detected language: ro
2025-04-20 14:10:37,471 - app - INFO - Creating new context for session: 91af798c-08a4-44fc-8911-ca2a88d9a3a3
2025-04-20 14:10:37,471 - app - INFO - Updated category to: acne
2025-04-20 14:10:37,471 - app - INFO - Added concern: acne
2025-04-20 14:10:37,472 - app - INFO - Generating response with Gemini API
2025-04-20 14:10:44,306 - app - INFO - Successfully generated and formatted response
2025-04-20 14:13:07,224 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:13:07,228 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:13:07,232 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:13:07,234 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:13:07,235 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:13:07,236 - app - INFO - All datasets loaded successfully
2025-04-20 14:13:07,236 - app - INFO - Gemini model initialized successfully
2025-04-20 14:13:07,239 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:13:07,239 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:13:11,700 - app - INFO - Embedding model initialized successfully
2025-04-20 14:13:15,701 - app - INFO -   
2025-04-20 14:13:34,351 - app - INFO - Received chat request: message='acne', session_id='0e8b2332-08ec-4d98-96f3-10f387fdd3ef'
2025-04-20 14:13:35,037 - app - INFO - Detected language: ro
2025-04-20 14:13:35,038 - app - INFO - Creating new context for session: 0e8b2332-08ec-4d98-96f3-10f387fdd3ef
2025-04-20 14:13:35,038 - app - INFO - Updated category to: acne
2025-04-20 14:13:35,038 - app - INFO - Added concern: acne
2025-04-20 14:13:35,039 - app - INFO - Generating response with Gemini API
2025-04-20 14:13:41,581 - app - INFO - Successfully generated and formatted response
2025-04-20 14:16:37,618 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:16:37,619 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:16:37,627 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:16:37,628 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:16:37,630 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:16:37,630 - app - INFO - All datasets loaded successfully
2025-04-20 14:16:37,631 - app - INFO - Gemini model initialized successfully
2025-04-20 14:16:37,635 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:16:37,635 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:16:42,118 - app - INFO - Embedding model initialized successfully
2025-04-20 14:17:43,378 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:17:43,379 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:17:43,381 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:17:43,382 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:17:43,383 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:17:43,383 - app - INFO - All datasets loaded successfully
2025-04-20 14:17:43,384 - app - INFO - Gemini model initialized successfully
2025-04-20 14:17:43,386 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:17:43,386 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:17:48,912 - app - INFO - Embedding model initialized successfully
2025-04-20 14:18:49,752 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:18:49,752 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:18:49,756 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:18:49,757 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:18:49,758 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:18:49,759 - app - INFO - All datasets loaded successfully
2025-04-20 14:18:49,759 - app - INFO - Gemini model initialized successfully
2025-04-20 14:18:49,762 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:18:49,762 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:18:55,668 - app - INFO - Embedding model initialized successfully
2025-04-20 14:18:55,939 - app - INFO -   
2025-04-20 14:20:13,291 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:20:13,291 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:20:13,293 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:20:13,294 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:20:13,294 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:20:13,295 - app - INFO - All datasets loaded successfully
2025-04-20 14:20:13,295 - app - ERROR - Error during startup: name 'model' is not defined
2025-04-20 14:20:35,875 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:20:35,877 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:20:35,880 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:20:35,882 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:20:35,885 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:20:35,886 - app - INFO - All datasets loaded successfully
2025-04-20 14:20:35,886 - app - ERROR - Error during startup: name 'model' is not defined
2025-04-20 14:21:51,298 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:21:51,299 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:21:51,300 - app - INFO - Gemini model initialized successfully
2025-04-20 14:21:51,303 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:21:51,304 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:21:51,305 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:21:51,305 - app - INFO - All datasets loaded successfully
2025-04-20 14:21:51,308 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:21:51,308 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:21:54,847 - app - INFO - Embedding model initialized successfully
2025-04-20 14:21:57,821 - app - INFO -   
2025-04-20 14:22:49,711 - app - INFO - Received chat request: message='acne', session_id='cf40a5c0-4c8b-4c92-baeb-0959284ae265'
2025-04-20 14:22:50,179 - app - INFO - Detected language: ro
2025-04-20 14:22:50,180 - app - INFO - Creating new context for session: cf40a5c0-4c8b-4c92-baeb-0959284ae265
2025-04-20 14:22:50,180 - app - INFO - Updated category to: acne
2025-04-20 14:22:50,180 - app - INFO - Added concern: acne
2025-04-20 14:22:50,180 - app - INFO - Generating response with Gemini API
2025-04-20 14:22:56,711 - app - INFO - Successfully generated and formatted response
2025-04-20 14:25:16,176 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:25:16,177 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:25:16,178 - app - INFO - Gemini model initialized successfully
2025-04-20 14:25:16,181 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:25:16,183 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:25:16,184 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:25:16,184 - app - INFO - All datasets loaded successfully
2025-04-20 14:25:16,188 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:25:16,189 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:25:21,211 - app - INFO - Embedding model initialized successfully
2025-04-20 14:25:21,238 - app - INFO -   
2025-04-20 14:26:31,066 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:26:31,068 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:26:31,068 - app - INFO - Gemini model initialized successfully
2025-04-20 14:26:31,071 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:26:31,073 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:26:31,074 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:26:31,074 - app - INFO - All datasets loaded successfully
2025-04-20 14:26:31,079 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:26:31,080 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:26:34,525 - app - INFO - Embedding model initialized successfully
2025-04-20 14:26:36,447 - app - INFO -   
2025-04-20 14:26:49,304 - app - INFO - Updated category to: acne
2025-04-20 14:26:49,304 - app - INFO - Added concern: acne
2025-04-20 14:26:49,305 - app - INFO - Generating response with Gemini API
2025-04-20 14:28:07,040 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:28:07,040 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:28:07,041 - app - INFO - Gemini model initialized successfully
2025-04-20 14:28:07,042 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:28:07,043 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:28:07,043 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:28:07,044 - app - INFO - All datasets loaded successfully
2025-04-20 14:28:07,045 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:28:07,045 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:28:12,058 - app - INFO - Embedding model initialized successfully
2025-04-20 14:28:31,109 - app - INFO -   
2025-04-20 14:28:32,670 - app - INFO -   
2025-04-20 14:28:33,493 - app - INFO -   
2025-04-20 14:28:44,066 - app - INFO - Updated category to: acne
2025-04-20 14:28:44,067 - app - INFO - Added concern: acne
2025-04-20 14:30:11,833 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:30:11,834 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:30:11,836 - app - INFO - Gemini model initialized successfully
2025-04-20 14:30:11,841 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:30:11,845 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:30:11,847 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:30:11,848 - app - INFO - All datasets loaded successfully
2025-04-20 14:30:11,852 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:30:11,852 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:30:15,496 - app - INFO - Embedding model initialized successfully
2025-04-20 14:30:44,379 - app - INFO -   
2025-04-20 14:30:53,659 - app - INFO - Updated category to: acne
2025-04-20 14:30:53,660 - app - INFO - Added concern: acne
2025-04-20 14:34:12,247 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:34:12,248 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:34:12,250 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:34:12,251 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:34:12,251 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:34:12,252 - app - INFO - All datasets loaded successfully
2025-04-20 14:34:12,252 - app - INFO - Gemini model initialized successfully
2025-04-20 14:34:12,253 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:34:12,253 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:34:15,638 - app - INFO - Embedding model initialized successfully
2025-04-20 14:34:17,268 - app - INFO -   
2025-04-20 14:34:30,221 - app - INFO -   
2025-04-20 14:34:38,308 - app - INFO - Updated category to: acne
2025-04-20 14:34:38,309 - app - INFO - Added concern: acne
2025-04-20 14:34:42,730 - root - INFO -     
2025-04-20 14:38:40,502 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:38:40,503 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:38:40,505 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:38:40,506 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:38:40,507 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:38:40,507 - app - INFO - All datasets loaded successfully
2025-04-20 14:38:40,508 - app - INFO - Gemini model initialized successfully
2025-04-20 14:38:40,510 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:38:40,510 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:38:45,741 - app - INFO - Embedding model initialized successfully
2025-04-20 14:38:50,535 - app - INFO -   
2025-04-20 14:38:52,115 - app - INFO -   
2025-04-20 14:38:56,596 - app - INFO -   
2025-04-20 14:39:02,199 - app - INFO - Updated category to: acne
2025-04-20 14:39:02,199 - app - INFO - Added concern: acne
2025-04-20 14:39:06,580 - root - INFO -     
2025-04-20 14:40:18,983 - app - INFO - Updated skin type to: dry
2025-04-20 14:40:18,984 - app - INFO - Updated category to: acne
2025-04-20 14:42:57,928 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:42:57,928 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:42:57,931 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:42:57,932 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:42:57,933 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:42:57,933 - app - INFO - All datasets loaded successfully
2025-04-20 14:42:57,934 - app - INFO - Gemini model initialized successfully
2025-04-20 14:42:57,936 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:42:57,936 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:43:01,377 - app - INFO - Embedding model initialized successfully
2025-04-20 14:43:01,385 - app - INFO -   
2025-04-20 14:43:04,789 - app - INFO -   
2025-04-20 14:43:05,860 - app - INFO -   
2025-04-20 14:43:23,566 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:43:23,567 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:43:23,570 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:43:23,571 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:43:23,571 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:43:23,572 - app - INFO - All datasets loaded successfully
2025-04-20 14:43:23,572 - app - INFO - Gemini model initialized successfully
2025-04-20 14:43:23,574 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:43:23,575 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:43:27,056 - app - INFO - Embedding model initialized successfully
2025-04-20 14:43:55,919 - app - INFO -   
2025-04-20 14:44:03,606 - app - INFO - Updated category to: acne
2025-04-20 14:44:03,607 - app - INFO - Added concern: acne
2025-04-20 14:44:08,411 - root - INFO -     
2025-04-20 14:45:54,320 - app - INFO -   
2025-04-20 14:45:59,631 - app - INFO -   
2025-04-20 14:47:12,068 - app - INFO - Updated skin type to: dry
2025-04-20 14:47:12,068 - app - INFO - Updated category to: acne
2025-04-20 14:47:12,069 - app - INFO - Added concern: acne
2025-04-20 14:51:34,323 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:51:34,324 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:51:34,329 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:51:34,330 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:51:34,331 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:51:34,331 - app - INFO - All datasets loaded successfully
2025-04-20 14:51:34,331 - app - INFO - Gemini model initialized successfully
2025-04-20 14:51:34,332 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:51:34,333 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:51:39,049 - app - INFO - Embedding model initialized successfully
2025-04-20 14:51:44,286 - app - INFO -   
2025-04-20 14:52:05,369 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 14:52:05,370 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 14:52:05,372 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 14:52:05,373 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 14:52:05,374 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 14:52:05,374 - app - INFO - All datasets loaded successfully
2025-04-20 14:52:05,375 - app - INFO - Gemini model initialized successfully
2025-04-20 14:52:05,377 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 14:52:05,377 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 14:52:10,894 - app - INFO - Embedding model initialized successfully
2025-04-20 14:52:15,308 - app - INFO - Updated skin type to: dry
2025-04-20 14:52:15,308 - app - INFO - Updated category to: acne
2025-04-20 14:52:15,309 - app - INFO - Added concern: acne
2025-04-20 14:52:19,491 - root - INFO -     
2025-04-20 14:53:19,178 - app - INFO - Updated skin type to: dry
2025-04-20 14:53:19,178 - app - INFO - Updated category to: acne
2025-04-20 14:53:52,678 - app - INFO - Updated category to: acne
2025-04-20 15:16:30,617 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:16:30,618 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:16:30,621 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:16:30,622 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:16:30,623 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:16:30,623 - app - INFO - All datasets loaded successfully
2025-04-20 15:16:30,623 - app - INFO - Gemini model initialized successfully
2025-04-20 15:16:30,624 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:16:30,625 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:16:36,123 - app - INFO - Embedding model initialized successfully
2025-04-20 15:16:50,730 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:16:50,731 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:16:50,734 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:16:50,735 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:16:50,736 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:16:50,737 - app - INFO - All datasets loaded successfully
2025-04-20 15:16:50,737 - app - INFO - Gemini model initialized successfully
2025-04-20 15:16:50,739 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:16:50,740 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:16:55,695 - app - INFO - Embedding model initialized successfully
2025-04-20 15:17:06,763 - app - INFO -   
2025-04-20 15:17:15,178 - app - INFO -   
2025-04-20 15:21:03,350 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:21:03,351 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:21:03,355 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:21:03,357 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:21:03,357 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:21:03,357 - app - INFO - All datasets loaded successfully
2025-04-20 15:21:03,358 - app - INFO - Gemini model initialized successfully
2025-04-20 15:21:03,360 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:21:03,360 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:21:08,328 - app - INFO - Embedding model initialized successfully
2025-04-20 15:21:26,324 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:21:26,324 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:21:26,327 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:21:26,328 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:21:26,329 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:21:26,330 - app - INFO - All datasets loaded successfully
2025-04-20 15:21:26,330 - app - INFO - Gemini model initialized successfully
2025-04-20 15:21:26,332 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:21:26,332 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:21:30,744 - app - INFO - Embedding model initialized successfully
2025-04-20 15:21:30,823 - app - INFO -   
2025-04-20 15:24:06,654 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:24:06,655 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:24:06,658 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:24:06,659 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:24:06,660 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:24:06,660 - app - INFO - All datasets loaded successfully
2025-04-20 15:24:06,660 - app - INFO - Gemini model initialized successfully
2025-04-20 15:24:06,662 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:24:06,662 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:24:11,428 - app - INFO - Embedding model initialized successfully
2025-04-20 15:24:20,458 - app - INFO -   
2025-04-20 15:28:09,873 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:28:09,874 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:28:09,876 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:28:09,877 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:28:09,877 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:28:09,877 - app - INFO - All datasets loaded successfully
2025-04-20 15:28:09,877 - app - INFO - Gemini model initialized successfully
2025-04-20 15:28:09,879 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:28:09,879 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:28:13,572 - app - INFO - Embedding model initialized successfully
2025-04-20 15:28:17,160 - app - INFO -   
2025-04-20 15:28:40,820 - app - INFO - Updated category to: acne
2025-04-20 15:28:40,821 - app - INFO - Added concern: acne
2025-04-20 15:28:47,697 - root - INFO -     
2025-04-20 15:28:49,437 - app - ERROR - Error generating response: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-04-20 15:28:59,765 - app - INFO - Updated category to: acne
2025-04-20 15:29:00,213 - app - ERROR - Error generating response: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-04-20 15:31:20,811 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:31:20,811 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:31:20,815 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:31:20,816 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:31:20,817 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:31:20,817 - app - INFO - All datasets loaded successfully
2025-04-20 15:31:20,818 - app - INFO - Gemini model initialized successfully
2025-04-20 15:31:20,821 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:31:20,821 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:31:24,763 - app - INFO - Embedding model initialized successfully
2025-04-20 15:31:45,653 - app - INFO -   
2025-04-20 15:31:55,122 - app - INFO - Updated category to: acne
2025-04-20 15:31:55,122 - app - INFO - Added concern: acne
2025-04-20 15:32:00,155 - root - INFO -     
2025-04-20 15:32:02,075 - app - ERROR - Error generating response: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-04-20 15:34:32,463 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:34:32,463 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:34:32,469 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:34:32,471 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:34:32,472 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:34:32,473 - app - INFO - All datasets loaded successfully
2025-04-20 15:34:32,474 - app - INFO - Gemini model initialized successfully
2025-04-20 15:34:32,476 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:34:32,477 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:34:37,973 - app - INFO - Embedding model initialized successfully
2025-04-20 15:34:44,005 - app - INFO -   
2025-04-20 15:34:51,854 - app - INFO - Updated category to: acne
2025-04-20 15:34:51,854 - app - INFO - Added concern: acne
2025-04-20 15:34:56,590 - root - INFO -     
2025-04-20 15:46:24,057 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 15:46:24,057 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 15:46:24,060 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 15:46:24,061 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 15:46:24,062 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 15:46:24,062 - app - INFO - All datasets loaded successfully
2025-04-20 15:46:24,062 - app - INFO - Gemini model initialized successfully
2025-04-20 15:46:24,064 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 15:46:24,064 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 15:46:27,518 - app - INFO - Embedding model initialized successfully
2025-04-20 15:46:30,817 - app - INFO -   
2025-04-20 15:46:55,917 - app - INFO -   
2025-04-20 15:47:02,811 - app - INFO -   
2025-04-20 16:06:26,395 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 16:06:26,396 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 16:06:26,399 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 16:06:26,411 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 16:06:26,412 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 16:06:26,413 - app - INFO - All datasets loaded successfully
2025-04-20 16:06:26,413 - app - INFO - Gemini model initialized successfully
2025-04-20 16:06:26,415 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 16:06:26,416 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 16:06:30,753 - app - INFO - Embedding model initialized successfully
2025-04-20 16:12:40,879 - app - INFO -   
2025-04-20 16:12:55,011 - app - INFO - Updated category to: acne
2025-04-20 16:12:55,011 - app - INFO - Added concern: acne
2025-04-20 16:12:59,684 - root - INFO -     
2025-04-20 16:36:32,657 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 16:36:32,659 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 16:36:32,669 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 16:36:32,671 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 16:36:32,673 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 16:36:32,674 - app - INFO - All datasets loaded successfully
2025-04-20 16:36:32,674 - app - INFO - Gemini model initialized successfully
2025-04-20 16:36:32,677 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 16:36:32,678 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 16:36:37,031 - app - INFO - Embedding model initialized successfully
2025-04-20 16:36:37,135 - app - INFO -   
2025-04-20 16:37:13,996 - app - INFO -   
2025-04-20 16:37:18,951 - app - INFO -   
2025-04-20 16:37:37,615 - app - INFO - Updated category to: acne
2025-04-20 16:37:37,615 - app - INFO - Added concern: acne
2025-04-20 16:37:42,960 - root - INFO -     
2025-04-20 16:38:46,352 - app - ERROR - Error analyzing image with Gemini: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-04-20 16:38:46,416 - app - ERROR - Image processing error: 'name'
2025-04-20 16:41:18,609 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 16:41:18,609 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 16:41:18,612 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 16:41:18,613 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 16:41:18,614 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 16:41:18,614 - app - INFO - All datasets loaded successfully
2025-04-20 16:41:18,614 - app - INFO - Gemini model initialized successfully
2025-04-20 16:41:18,616 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 16:41:18,617 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 16:41:21,963 - app - INFO - Embedding model initialized successfully
2025-04-20 16:41:36,881 - app - INFO -   
2025-04-20 16:41:57,319 - app - ERROR - Error analyzing image with Gemini: 404 Gemini 1.0 Pro Vision has been deprecated on July 12, 2024. Consider switching to different model, for example gemini-1.5-flash.
2025-04-20 16:42:02,262 - root - INFO -     
2025-04-20 16:42:02,322 - app - ERROR - Image processing error: 'name'
2025-04-20 16:49:35,299 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 16:49:35,299 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 16:49:35,302 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 16:49:35,303 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 16:49:35,303 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 16:49:35,304 - app - INFO - All datasets loaded successfully
2025-04-20 16:49:35,304 - app - INFO - Gemini model initialized successfully
2025-04-20 16:49:35,305 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 16:49:35,306 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 16:49:39,905 - app - INFO - Embedding model initialized successfully
2025-04-20 16:50:05,341 - app - INFO -   
2025-04-20 16:50:17,199 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:50:17,199 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:50:58,313 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:50:58,314 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:16,906 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:16,907 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:28,623 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:28,624 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:28,783 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:28,784 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:28,931 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:28,932 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:29,079 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:29,080 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:30,465 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:30,466 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:30,772 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:30,772 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:30,965 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:30,966 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:51:31,141 - app - ERROR - Error processing image: object tuple can't be used in 'await' expression
2025-04-20 16:51:31,141 - app - ERROR - Error in chat endpoint: name 'detect_russian' is not defined
2025-04-20 16:55:02,123 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 16:55:02,123 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 16:55:02,126 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 16:55:02,127 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 16:55:02,128 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 16:55:02,129 - app - INFO - All datasets loaded successfully
2025-04-20 16:55:02,129 - app - INFO - Gemini model initialized successfully
2025-04-20 16:55:02,131 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 16:55:02,132 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 16:55:06,435 - app - INFO - Embedding model initialized successfully
2025-04-20 16:55:49,140 - app - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 16:55:49,141 - app - WARNING - Running without Redis - some features may be limited
2025-04-20 16:55:49,143 - app - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 16:55:49,144 - app - INFO - Successfully loaded se_dataset.json
2025-04-20 16:55:49,144 - app - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 16:55:49,144 - app - INFO - All datasets loaded successfully
2025-04-20 16:55:49,145 - app - INFO - Gemini model initialized successfully
2025-04-20 16:55:49,146 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 16:55:49,146 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 16:55:52,544 - app - INFO - Embedding model initialized successfully
2025-04-20 16:55:58,131 - app - INFO -   
2025-04-20 16:56:17,396 - root - INFO -     
2025-04-20 16:56:17,421 - app - ERROR - Error in chat endpoint: bad operand type for unary -: 'str'
2025-04-20 16:58:58,630 - __main__ - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 16:58:58,632 - __main__ - WARNING - Running without Redis - some features may be limited
2025-04-20 16:58:58,645 - __main__ - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 16:58:58,647 - __main__ - INFO - Successfully loaded se_dataset.json
2025-04-20 16:58:58,649 - __main__ - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 16:58:58,650 - __main__ - INFO - All datasets loaded successfully
2025-04-20 16:58:58,651 - __main__ - INFO - Gemini model initialized successfully
2025-04-20 16:58:58,655 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 16:58:58,656 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 16:59:03,471 - __main__ - INFO - Embedding model initialized successfully
2025-04-20 17:00:32,346 - __main__ - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 17:00:32,348 - __main__ - WARNING - Running without Redis - some features may be limited
2025-04-20 17:00:32,363 - __main__ - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 17:00:32,367 - __main__ - INFO - Successfully loaded se_dataset.json
2025-04-20 17:00:32,369 - __main__ - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 17:00:32,369 - __main__ - INFO - All datasets loaded successfully
2025-04-20 17:00:32,370 - __main__ - INFO - Gemini model initialized successfully
2025-04-20 17:00:32,373 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 17:00:32,374 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 17:00:41,195 - __main__ - INFO - Embedding model initialized successfully
2025-04-20 17:01:15,924 - __main__ - WARNING - Could not connect to Redis: Error 10061 connecting to localhost:6379.   , ..      .
2025-04-20 17:01:15,925 - __main__ - WARNING - Running without Redis - some features may be limited
2025-04-20 17:01:15,930 - __main__ - INFO - Successfully loaded products_dataset_complete.json
2025-04-20 17:01:15,931 - __main__ - INFO - Successfully loaded se_dataset.json
2025-04-20 17:01:15,932 - __main__ - INFO - Successfully loaded skin_type_questionnaire.json
2025-04-20 17:01:15,933 - __main__ - INFO - All datasets loaded successfully
2025-04-20 17:01:15,934 - __main__ - INFO - Gemini model initialized successfully
2025-04-20 17:01:15,937 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cpu
2025-04-20 17:01:15,937 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-04-20 17:01:21,354 - __main__ - INFO - Embedding model initialized successfully
2025-04-20 17:01:32,436 - __main__ - INFO -   
2025-04-20 17:01:40,835 - __main__ - INFO - Updated category to: acne
2025-04-20 17:01:40,835 - __main__ - INFO - Added concern: acne
2025-04-20 17:01:43,745 - root - INFO -     
